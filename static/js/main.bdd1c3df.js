/*! For license information please see main.bdd1c3df.js.LICENSE.txt */
(()=>{var e={81:function(e,t){(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(e){return 0==e?0:e>0?1:-1});var e=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},n=function(e,t){return e.x*t.x+e.y*t.y},r=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},i=function(e,t){return{x:e.x*t,y:e.y*t}},s=Math.pow(2,-65),o=function(t,n){for(var i=[],s=a(t,n),o=n.length-1,u=l(s,2*o-1,i,0),c=e(t,n[0]),h=r(c),f=0,p=0;p<u;p++){c=e(t,d(n,o,i[p],null,null));var g=r(c);g<h&&(h=g,f=i[p])}return c=e(t,n[o]),(g=r(c))<h&&(h=g,f=1),{location:f,distance:h}},a=function(t,r){for(var s=r.length-1,o=2*s-1,a=[],l=[],u=[],c=[],h=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],d=0;d<=s;d++)a[d]=e(r[d],t);for(d=0;d<=s-1;d++)l[d]=e(r[d+1],r[d]),l[d]=i(l[d],3);for(var f=0;f<=s-1;f++)for(var p=0;p<=s;p++)u[f]||(u[f]=[]),u[f][p]=n(l[f],a[p]);for(d=0;d<=o;d++)c[d]||(c[d]=[]),c[d].y=0,c[d].x=parseFloat(d)/o;for(var g=s,m=s-1,v=0;v<=g+m;v++){var y=Math.max(0,v-m),b=Math.min(v,g);for(d=y;d<=b;d++){var w=v-d;c[d+w].y+=u[w][d]*h[w][d]}}return c},l=function(e,t,n,r){var i,s,o=[],a=[],f=[],p=[];switch(u(e,t)){case 0:return 0;case 1:if(r>=64)return n[0]=(e[0].x+e[t].x)/2,1;if(c(e,t))return n[0]=h(e,t),1}d(e,t,.5,o,a),i=l(o,t,f,r+1),s=l(a,t,p,r+1);for(var g=0;g<i;g++)n[g]=f[g];for(g=0;g<s;g++)n[g+i]=p[g];return i+s},u=function(e,t){var n,r,i=0;n=r=Math.sgn(e[0].y);for(var s=1;s<=t;s++)(n=Math.sgn(e[s].y))!=r&&i++,r=n;return i},c=function(e,t){var n,r,i,o,a,l,u,c,h;o=e[0].y-e[t].y,a=e[t].x-e[0].x,l=e[0].x*e[t].y-e[t].x*e[0].y,c=h=0;for(var d=1;d<t;d++){var f=o*e[d].x+a*e[d].y+l;f>c?c=f:f<h&&(h=f)}return n=(1*(l-c)-0*(u=a))*(1/(0*u-1*o)),r=(1*(l-h)-0*(u=a))*(1/(0*u-1*o)),i=Math.min(n,r),Math.max(n,r)-i<s?1:0},h=function(e,t){var n=e[t].x-e[0].x,r=e[t].y-e[0].y,i=e[0].x-0;return 0+1*((n*(e[0].y-0)-r*i)*(1/(0*n-1*r)))},d=function(e,t,n,r,i){for(var s=[[]],o=0;o<=t;o++)s[0][o]=e[o];for(var a=1;a<=t;a++)for(o=0;o<=t-a;o++)s[a]||(s[a]=[]),s[a][o]||(s[a][o]={}),s[a][o].x=(1-n)*s[a-1][o].x+n*s[a-1][o+1].x,s[a][o].y=(1-n)*s[a-1][o].y+n*s[a-1][o+1].y;if(null!=r)for(o=0;o<=t;o++)r[o]=s[o][0];if(null!=i)for(o=0;o<=t;o++)i[o]=s[t-o][o];return s[t][0]},f={},p=function(e,t){for(var n=function(e){var t=f[e];if(!t){var n=function(e){return function(t){return e}},r=function(){return function(e){return e}},i=function(){return function(e){return 1-e}},s=function(e){return function(t){for(var n=1,r=0;r<e.length;r++)n*=e[r](t);return n}};(t=[]).push(new function(){return function(t){return Math.pow(t,e)}});for(var o=1;o<e;o++){for(var a=[new n(e)],l=0;l<e-o;l++)a.push(new r);for(l=0;l<o;l++)a.push(new i);t.push(new s(a))}t.push(new function(){return function(t){return Math.pow(1-t,e)}}),f[e]=t}return t}(e.length-1),r=0,i=0,s=0;s<e.length;s++)r+=e[s].x*n[s](t),i+=e[s].y*n[s](t);return{x:r,y:i}},g=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},m=function(e){return e[0].x===e[1].x&&e[0].y===e[1].y},v=function(e,t,n){if(m(e))return{point:e[0],location:t};for(var r=p(e,t),i=0,s=t,o=n>0?1:-1,a=null;i<Math.abs(n);)a=p(e,s+=.005*o),i+=g(a,r),r=a;return{point:a,location:s}},y=function(e,t){var n=p(e,t),r=p(e.slice(0,e.length-1),t),i=r.y-n.y,s=r.x-n.x;return 0===i?1/0:Math.atan(i/s)},b=function(e,t,n,r,i){var s=r-t,o=e-n,a=e*(t-r)+t*(n-e),l=function(e){return[w(e,"x"),w(e,"y")]}(i),u=[s*l[0][0]+o*l[1][0],s*l[0][1]+o*l[1][1],s*l[0][2]+o*l[1][2],s*l[0][3]+o*l[1][3]+a],c=E.apply(null,u),h=[];if(null!=c)for(var d=0;d<3;d++){var f,p=c[d],g=Math.pow(p,2),m=Math.pow(p,3),v=[l[0][0]*m+l[0][1]*g+l[0][2]*p+l[0][3],l[1][0]*m+l[1][1]*g+l[1][2]*p+l[1][3]];f=n-e!==0?(v[0]-e)/(n-e):(v[1]-t)/(r-t),p>=0&&p<=1&&f>=0&&f<=1&&h.push(v)}return h};function w(e,t){return[-e[0][t]+3*e[1][t]+-3*e[2][t]+e[3][t],3*e[0][t]-6*e[1][t]+3*e[2][t],-3*e[0][t]+3*e[1][t],e[0][t]]}function _(e){return e<0?-1:e>0?1:0}function E(e,t,n,r){var i,s,o=t/e,a=n/e,l=r/e,u=(3*a-Math.pow(o,2))/9,c=(9*o*a-27*l-2*Math.pow(o,3))/54,h=Math.pow(u,3)+Math.pow(c,2),d=[];if(h>=0)i=_(c+Math.sqrt(h))*Math.pow(Math.abs(c+Math.sqrt(h)),1/3),s=_(c-Math.sqrt(h))*Math.pow(Math.abs(c-Math.sqrt(h)),1/3),d[0]=-o/3+(i+s),d[1]=-o/3-(i+s)/2,d[2]=-o/3-(i+s)/2,0!==Math.abs(Math.sqrt(3)*(i-s)/2)&&(d[1]=-1,d[2]=-1);else{var f=Math.acos(c/Math.sqrt(-Math.pow(u,3)));d[0]=2*Math.sqrt(-u)*Math.cos(f/3)-o/3,d[1]=2*Math.sqrt(-u)*Math.cos((f+2*Math.PI)/3)-o/3,d[2]=2*Math.sqrt(-u)*Math.cos((f+4*Math.PI)/3)-o/3}for(var p=0;p<3;p++)(d[p]<0||d[p]>1)&&(d[p]=-1);return d}var S=this.jsBezier={distanceFromCurve:o,gradientAtPoint:y,gradientAtPointAlongCurveFrom:function(e,t,n){var r=v(e,t,n);return r.location>1&&(r.location=1),r.location<0&&(r.location=0),y(e,r.location)},nearestPointOnCurve:function(e,t){var n=o(e,t);return{point:d(t,t.length-1,n.location,null,null),location:n.location}},pointOnCurve:p,pointAlongCurveFrom:function(e,t,n){return v(e,t,n).point},perpendicularToCurveAt:function(e,t,n,r){var i=v(e,t,r=null==r?0:r),s=y(e,i.location),o=Math.atan(-1/s),a=n/2*Math.sin(o),l=n/2*Math.cos(o);return[{x:i.point.x+l,y:i.point.y+a},{x:i.point.x-l,y:i.point.y-a}]},locationAlongCurveFrom:function(e,t,n){return v(e,t,n).location},getLength:function(e){var t=(new Date).getTime();if(m(e))return 0;for(var n=p(e,0),r=0,i=0,s=null;i<1;)s=p(e,i+=.005),r+=g(s,n),n=s;return console.log("length",(new Date).getTime()-t),r},lineIntersection:b,boxIntersection:function(e,t,n,r,i){var s=[];return s.push.apply(s,b(e,t,e+n,t,i)),s.push.apply(s,b(e+n,t,e+n,t+r,i)),s.push.apply(s,b(e+n,t+r,e,t+r,i)),s.push.apply(s,b(e,t+r,e,t,i)),s},boundingBoxIntersection:function(e,t){var n=[];return n.push.apply(n,b(e.x,e.y,e.x+e.w,e.y,t)),n.push.apply(n,b(e.x+e.w,e.y,e.x+e.w,e.y+e.h,t)),n.push.apply(n,b(e.x+e.w,e.y+e.h,e.x,e.y+e.h,t)),n.push.apply(n,b(e.x,e.y+e.h,e.x,e.y,t)),n},version:"0.9.0"};t.jsBezier=S}).call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.Biltong={version:"0.4.0"};t.Biltong=e;var n=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(e,t,r){return r(e=n(e)?e:[e.x,e.y],t=n(t)?t:[t.x,t.y])},i=e.gradient=function(e,t){return r(e,t,(function(e,t){return t[0]==e[0]?t[1]>e[1]?1/0:-1/0:t[1]==e[1]?t[0]>e[0]?0:-0:(t[1]-e[1])/(t[0]-e[0])}))},s=(e.normal=function(e,t){return-1/i(e,t)},e.lineLength=function(e,t){return r(e,t,(function(e,t){return Math.sqrt(Math.pow(t[1]-e[1],2)+Math.pow(t[0]-e[0],2))}))},e.quadrant=function(e,t){return r(e,t,(function(e,t){return t[0]>e[0]||t[0]==e[0]?t[1]>e[1]?2:1:t[1]>e[1]?3:4}))}),o=(e.theta=function(e,t){return r(e,t,(function(e,t){var n=i(e,t),r=Math.atan(n),o=s(e,t);return 4!=o&&3!=o||(r+=Math.PI),r<0&&(r+=2*Math.PI),r}))},e.intersects=function(e,t){var n=e.x,r=e.x+e.w,i=e.y,s=e.y+e.h,o=t.x,a=t.x+t.w,l=t.y,u=t.y+t.h;return n<=o&&o<=r&&i<=l&&l<=s||n<=a&&a<=r&&i<=l&&l<=s||n<=o&&o<=r&&i<=u&&u<=s||n<=a&&o<=r&&i<=u&&u<=s||o<=n&&n<=a&&l<=i&&i<=u||o<=r&&r<=a&&l<=i&&i<=u||o<=n&&n<=a&&l<=s&&s<=u||o<=r&&n<=a&&l<=s&&s<=u},e.encloses=function(e,t,n){var r=e.x,i=e.x+e.w,s=e.y,o=e.y+e.h,a=t.x,l=t.x+t.w,u=t.y,c=t.y+t.h,h=function(e,t,r,i){return n?e<=t&&r>=i:e<t&&r>i};return h(r,a,i,l)&&h(s,u,o,c)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),a=[null,[-1,-1],[-1,1],[1,1],[1,-1]];e.pointOnLine=function(e,t,n){var r=i(e,t),l=s(e,t),u=n>0?o[l]:a[l],c=Math.atan(r),h=Math.abs(n*Math.sin(c))*u[1],d=Math.abs(n*Math.cos(c))*u[0];return{x:e.x+d,y:e.y+h}},e.perpendicularLineTo=function(e,t,n){var r=i(e,t),s=Math.atan(-1/r),o=n/2*Math.sin(s),a=n/2*Math.cos(s);return[{x:t.x+a,y:t.y+o},{x:t.x-a,y:t.y-o}]}}.call("undefined"!==typeof window?window:this),function(){"use strict";function e(e,t,n,r,i,s,o,a){return new Touch({target:t,identifier:A(),pageX:n,pageY:r,screenX:i,screenY:s,clientX:o||i,clientY:a||s})}function n(t,n,r,i,s,o,a,l){return function(){var e=[];return Array.prototype.push.apply(e,arguments),e.item=function(e){return this[e]},e}(e.apply(null,arguments))}var r=this,i=function(e,t,n){for(var r=(n=n||e.parentNode).querySelectorAll(t),i=0;i<r.length;i++)if(r[i]===e)return!0;return!1},s=function(e){return"string"==typeof e||e.constructor===String?document.getElementById(e):e},o=function(e){return e.srcElement||e.target},a=function(e,t,n,r){if(r){if("undefined"!==typeof e.path&&e.path.indexOf)return{path:e.path,end:e.path.indexOf(n)};var i={path:[],end:-1},s=function(e){i.path.push(e),e===n?i.end=i.path.length-1:null!=e.parentNode&&s(e.parentNode)};return s(t),i}return{path:[t],end:1}},l=function(e,t){for(var n=0,r=e.length;n<r&&e[n]!=t;n++);n<e.length&&e.splice(n,1)},u=1,c=function(e,t,n){var r=u++;return e.__ta=e.__ta||{},e.__ta[t]=e.__ta[t]||{},e.__ta[t][r]=n,n.__tauid=r,r},h=function(e,t,n,r){if(null==e)return n;var s=e.split(","),l=function(r){l.__tauid=n.__tauid;var u=o(r),c=u,h=a(r,u,t,null!=e);if(-1!=h.end)for(var d=0;d<h.end;d++){c=h.path[d];for(var f=0;f<s.length;f++)i(c,s[f],t)&&n.apply(c,arguments)}};return d(n,r,l),l},d=function(e,t,n){e.__taExtra=e.__taExtra||[],e.__taExtra.push([t,n])},f=function(e,t,n,r){if(y&&w[t]){var i=h(r,e,n,w[t]);T(e,w[t],i,n)}"focus"===t&&null==e.getAttribute("tabindex")&&e.setAttribute("tabindex","1"),T(e,t,h(r,e,n,t),n)},p={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},g=function(e,t){return function(n,r,s,u){if("contextmenu"==r&&b)f(n,r,s,u);else{if(null==n.__taTapHandler){var c=n.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},h=function(){c.down=!1},d=function(){c.taps=0};f(n,"mousedown",(function(r){for(var s=o(r),l=a(r,s,n,null!=u),f=!1,p=0;p<l.end;p++){if(f)return;s=l.path[p];for(var g=0;g<c.downSelectors.length;g++)if(null==c.downSelectors[g]||i(s,c.downSelectors[g],n)){c.down=!0,setTimeout(h,e),setTimeout(d,t),f=!0;break}}})),f(n,"mouseup",(function(e){if(c.down){var t,r,s=o(e);c.taps++;var l=I(e);for(var u in p)if(p.hasOwnProperty(u)){var h=p[u];if(h.touches===l&&(1===h.taps||h.taps===c.taps))for(var d=0;d<c[u].length;d++){r=a(e,s,n,null!=c[u][d][1]);for(var f=0;f<r.end;f++)if(t=r.path[f],null==c[u][d][1]||i(t,c[u][d][1],n)){c[u][d][0].apply(t,[e]);break}}}}}))}n.__taTapHandler.downSelectors.push(u),n.__taTapHandler[r].push([s,u]),s.__taUnstore=function(){l(n.__taTapHandler[r],s)}}}},m=function(e,t,n,r){for(var i in n.__tamee[e])n.__tamee[e].hasOwnProperty(i)&&n.__tamee[e][i].apply(r,[t])},v=function(){var e=[];return function(t,n,r,s){if(!t.__tamee){t.__tamee={over:!1,mouseenter:[],mouseexit:[]};var a=function(n){var r=o(n);(null==s&&r==t&&!t.__tamee.over||i(r,s,t)&&(null==r.__tamee||!r.__tamee.over))&&(m("mouseenter",n,t,r),r.__tamee=r.__tamee||{},r.__tamee.over=!0,e.push(r))},l=function(n){for(var r=o(n),s=0;s<e.length;s++)r!=e[s]||i(n.relatedTarget||n.toElement,"*",r)||(r.__tamee.over=!1,e.splice(s,1),m("mouseexit",n,t,r))};T(t,"mouseover",h(s,t,a,"mouseover"),a),T(t,"mouseout",h(s,t,l,"mouseout"),l)}r.__taUnstore=function(){delete t.__tamee[n][r.__tauid]},c(t,n,r),t.__tamee[n][r.__tauid]=r}},y="ontouchstart"in document.documentElement||navigator.maxTouchPoints,b="onmousedown"in document.documentElement,w={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},_=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),E=_>-1&&_<9,S=function(e,t){if(null==e)return[0,0];var n=k(e),r=P(n,0);return[r[t+"X"],r[t+"Y"]]},C=function(e){return null==e?[0,0]:E?[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop]:S(e,"page")},P=function(e,t){return e.item?e.item(t):e[t]},k=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},I=function(e){return k(e).length},T=function(e,t,n,r){if(c(e,t,n),r.__tauid=n.__tauid,e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent){var i=t+n.__tauid;e["e"+i]=n,e[i]=function(){e["e"+i]&&e["e"+i](window.event)},e.attachEvent("on"+t,e[i])}},x=function(e,t,n){null!=n&&D(e,(function(){var r=s(this);if(function(e,t,n){if(e.__ta&&e.__ta[t]&&delete e.__ta[t][n.__tauid],n.__taExtra){for(var r=0;r<n.__taExtra.length;r++)x(e,n.__taExtra[r][0],n.__taExtra[r][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()}(r,t,n),null!=n.__tauid)if(r.removeEventListener)r.removeEventListener(t,n,!1),y&&w[t]&&r.removeEventListener(w[t],n,!1);else if(this.detachEvent){var i=t+n.__tauid;r[i]&&r.detachEvent("on"+t,r[i]),r[i]=null,r["e"+i]=null}n.__taTouchProxy&&x(e,n.__taTouchProxy[1],n.__taTouchProxy[0])}))},D=function(e,t){if(null!=e){e="undefined"!==typeof Window&&"unknown"!==typeof e.top&&e==e.top?[e]:"string"!==typeof e&&null==e.tagName&&null!=e.length?e:"string"===typeof e?document.querySelectorAll(e):[e];for(var n=0;n<e.length;n++)t.apply(e[n])}},A=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};r.Mottle=function(e){var t=(e=e||{}).clickThreshold||250,r=e.dblClickThreshold||450,i=new v,a=new g(t,r),u=e.smartClicks,c=function(e,t,n,r){null!=n&&D(e,(function(){var e=s(this);u&&"click"===t?function(e,t,n,r){null==e.__taSmartClicks&&(f(e,"mousedown",(function(t){e.__tad=C(t)}),r),f(e,"mouseup",(function(t){e.__tau=C(t)}),r),f(e,"click",(function(t){if(e.__tad&&e.__tau&&e.__tad[0]===e.__tau[0]&&e.__tad[1]===e.__tau[1])for(var n=0;n<e.__taSmartClicks.length;n++)e.__taSmartClicks[n].apply(o(t),[t])}),r),e.__taSmartClicks=[]);e.__taSmartClicks.push(n),n.__taUnstore=function(){l(e.__taSmartClicks,n)}}(e,0,n,r):"tap"===t||"dbltap"===t||"contextmenu"===t?a(e,t,n,r):"mouseenter"===t||"mouseexit"==t?i(e,t,n,r):f(e,t,n,r)}))};this.remove=function(e){return D(e,(function(){var e=s(this);if(e.__ta)for(var t in e.__ta)if(e.__ta.hasOwnProperty(t))for(var n in e.__ta[t])e.__ta[t].hasOwnProperty(n)&&x(e,t,e.__ta[t][n]);e.parentNode&&e.parentNode.removeChild(e)})),this},this.on=function(e,t,n,r){return c(arguments[0],arguments[1],arguments[arguments.length-1],4==arguments.length?arguments[2]:null),this},this.off=function(e,t,n){return x(e,t,n),this},this.trigger=function(e,t,r,i){var o=b&&("undefined"===typeof MouseEvent||null==r||r.constructor===MouseEvent),a=y&&!b&&w[t]?w[t]:t,l=!(y&&!b&&w[t]),u=C(r),c=S(r,"screen"),h=function(e){return S(e,"client")}(r);return D(e,(function(){var e,d=s(this);r=r||{screenX:c[0],screenY:c[1],clientX:h[0],clientY:h[1]};var f=function(e){i&&(e.payload=i)},p={TouchEvent:function(e){var t=n(window,d,0,u[0],u[1],c[0],c[1],h[0],h[1]);(e.initTouchEvent||e.initEvent)(a,!0,!0,window,null,c[0],c[1],h[0],h[1],!1,!1,!1,!1,t,t,t,1,0)},MouseEvents:function(e){e.initMouseEvent(a,!0,!0,window,0,c[0],c[1],h[0],h[1],!1,!1,!1,!1,1,d)}};if(document.createEvent){var g=!l&&!o&&y&&w[t]?"TouchEvent":"MouseEvents";e=document.createEvent(g),p[g](e),f(e),d.dispatchEvent(e)}else document.createEventObject&&((e=document.createEventObject()).eventType=e.eventName=a,e.screenX=c[0],e.screenY=c[1],e.clientX=h[0],e.clientY=h[1],f(e),d.fireEvent("on"+a,e))})),this}},r.Mottle.consume=function(e,t){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!t&&e.preventDefault&&e.preventDefault()},r.Mottle.pageLocation=C,r.Mottle.setForceTouchEvents=function(e){y=e},r.Mottle.setForceMouseEvents=function(e){b=e},r.Mottle.version="0.8.0",t.Mottle=r.Mottle}.call("undefined"===typeof window?this:window),function(){"use strict";var e=this,n=function(e,t,n){return-1===e.indexOf(t)&&(n?e.unshift(t):e.push(t),!0)},r=function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},i=function(e){return null!=e&&("string"===typeof e||e.constructor===String)},s=function(e,t,n){for(var r=(n=n||e.parentNode).querySelectorAll(t),i=0;i<r.length;i++)if(r[i]===e)return!0;return!1},o=function(e,t,n){if(s(t,n,e))return t;for(var r=t.parentNode;null!=r&&r!==e;){if(s(r,n,e))return r;r=r.parentNode}},a=function(){var e=-1;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e}(),l=a>-1&&a<9,u=9===a,c=function(e){if(l)return[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop];var t=d(e),n=h(t,0);return u?[n.pageX||n.clientX,n.pageY||n.clientY]:[n.pageX,n.pageY]},h=function(e,t){return e.item?e.item(t):e[t]},d=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},f={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},p=["stop","start","drag","drop","over","out","beforeStart"],g=function(){},m=function(){return!0},v=function(e,t,n){for(var r=0;r<e.length;r++)e[r]!=n&&t(e[r])},y=function(e,t,n,r){v(e,(function(e){e.setActive(t),t&&e.updatePosition(),n&&e.setHover(r,t)}))},b=function(e,t){if(null!=e){e=i(e)||null!=e.tagName||null==e.length?[e]:e;for(var n=0;n<e.length;n++)t.apply(e[n],[e[n]])}},w=function(e){e.stopPropagation?(e.stopPropagation(),e.preventDefault()):e.returnValue=!1},_=function(e,t,n,r){this.params=t||{},this.el=e,this.params.addClass(this.el,this._class),this.uuid=k();var i=!0;return this.setEnabled=function(e){i=e},this.isEnabled=function(){return i},this.toggleEnabled=function(){i=!i},this.setScope=function(e){this.scopes=e?e.split(/\s+/):[r]},this.addScope=function(e){var t={};for(var n in b(this.scopes,(function(e){t[e]=!0})),b(e?e.split(/\s+/):[],(function(e){t[e]=!0})),this.scopes=[],t)this.scopes.push(n)},this.removeScope=function(e){var t={};for(var n in b(this.scopes,(function(e){t[e]=!0})),b(e?e.split(/\s+/):[],(function(e){delete t[e]})),this.scopes=[],t)this.scopes.push(n)},this.toggleScope=function(e){var t={};for(var n in b(this.scopes,(function(e){t[e]=!0})),b(e?e.split(/\s+/):[],(function(e){t[e]?delete t[e]:t[e]=!0})),this.scopes=[],t)this.scopes.push(n)},this.setScope(t.scope),this.k=t.katavorio,t.katavorio},E=function(){return!0},S=function(){return!1},C=function(e,t,n,r){this._class=n.draggable;var a=_.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var l,u,h,d,p,g,v=[0,0],b=null,C=null,P=[0,0],T=!1,x=[0,0],D=!1!==this.params.consumeStartEvent,A=this.el,O=this.params.clone,N=(this.params.scroll,!1!==t.multipleDrop),j=!1,R=null,M=[],L=null,F=t.ghostProxyParent;if(l=!0===t.ghostProxy?E:t.ghostProxy&&"function"===typeof t.ghostProxy?t.ghostProxy:function(e,t){return!(!L||!L.useGhostProxy)&&L.useGhostProxy(e,t)},u=t.makeGhostProxy?t.makeGhostProxy:function(e){return L&&L.makeGhostProxy?L.makeGhostProxy(e):e.cloneNode(!0)},t.selector){var U=e.getAttribute("katavorio-draggable");null==U&&(U=""+(new Date).getTime(),e.setAttribute("katavorio-draggable",U)),M.push(t)}var V,z=t.snapThreshold,B=function(e,t,n,r,i){var s=t*Math.floor(e[0]/t),o=s+t,a=Math.abs(e[0]-s)<=r?s:Math.abs(o-e[0])<=r?o:e[0],l=n*Math.floor(e[1]/n),u=l+n;return[a,Math.abs(e[1]-l)<=i?l:Math.abs(u-e[1])<=i?u:e[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(e){if(null==this.params.grid)return e;var t=this.params.grid?this.params.grid[0]/2:z||5,n=this.params.grid?this.params.grid[1]/2:z||5;return B(e,this.params.grid[0],this.params.grid[1],t,n)},this.snap=function(e,t){if(null!=A){e=e||(this.params.grid?this.params.grid[0]:10),t=t||(this.params.grid?this.params.grid[1]:10);var n=this.params.getPosition(A),r=this.params.grid?this.params.grid[0]/2:z,i=this.params.grid?this.params.grid[1]/2:z,s=B(n,e,t,r,i);return this.params.setPosition(A,s),s}},this.setUseGhostProxy=function(e){l=e?E:S};var H=function(e){return!1===t.allowNegative?[Math.max(0,e[0]),Math.max(0,e[1])]:e},q=function(e){V="function"===typeof e?e:e?function(e,t,n,r){return H([Math.max(0,Math.min(n.w-r[0],e[0])),Math.max(0,Math.min(n.h-r[1],e[1]))])}.bind(this):function(e){return H(e)}}.bind(this);q("function"===typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(e){q(e)};var G;this.setRevert=function(e){G=e},this.params.revert&&(G=this.params.revert);var W={},K=this.setFilter=function(t,n){if(t){var r="function"===typeof(o=t)?(o._katavorioId=k(),o._katavorioId):o;W[r]=[function(n){var r,o=n.srcElement||n.target;return i(t)?r=s(o,t,e):"function"===typeof t&&(r=t(n,e)),r},!1!==n]}var o};this.addFilter=K,this.removeFilter=function(e){var t="function"===typeof e?e._katavorioId:e;delete W[t]};this.clearAllFilters=function(){W={}},this.canDrag=this.params.canDrag||m;var X,Y=[],Q=[];this.addSelector=function(e){e.selector&&M.push(e)},this.downListener=function(e){if(!e.defaultPrevented&&((this.rightButtonCanDrag||3!==e.which&&2!==e.button)&&this.isEnabled()&&this.canDrag())){var t=function(e){for(var t in W){var n=W[t],r=n[0](e);if(n[1]&&(r=!r),!r)return!1}return!0}(e)&&function(e,t,n){var r=e.srcElement||e.target;return!s(r,n.getInputFilterSelector(),t)}(e,this.el,this.k);if(t){if(L=null,R=null,M.length>0){var r=function(e,t,n){for(var r=null,i=t.getAttribute("katavorio-draggable"),a=null!=i?"[katavorio-draggable='"+i+"'] ":"",l=0;l<e.length;l++)if(null!=(r=o(t,n,a+e[l].selector))){if(e[l].filter){var u=s(n,e[l].filter,r);if(!0===e[l].filterExclude&&!u||u)return null}return[e[l],r]}return null}(M,this.el,e.target||e.srcElement);if(null!=r&&(L=r[0],R=r[1]),null==R)return}else R=this.el;if(O)if(A=R.cloneNode(!0),this.params.addClass(A,f.clonedDrag),A.setAttribute("id",null),A.style.position="absolute",null!=this.params.parent){var i=this.params.getPosition(this.el);A.style.left=i[0]+"px",A.style.top=i[1]+"px",this.params.parent.appendChild(A)}else{var l=function(e){var t=e.getBoundingClientRect(),n=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||n.scrollTop,s=window.pageXOffset||r.scrollLeft||n.scrollLeft,o=r.clientTop||n.clientTop||0,a=r.clientLeft||n.clientLeft||0,l=t.top+i-o,u=t.left+s-a;return{top:Math.round(l),left:Math.round(u)}}(R);A.style.left=l.left+"px",A.style.top=l.top+"px",document.body.appendChild(A)}else A=R;D&&w(e),v=c(e),A&&A.parentNode&&(x=[A.parentNode.scrollLeft,A.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),a.markSelection(this),a.markPosses(this),this.params.addClass(document.body,n.noSelect),Z("beforeStart",{el:this.el,pos:b,e:e,drag:this})}else this.params.consumeFilteredEvents&&w(e)}}.bind(this),this.moveListener=function(e){if(v){if(!T)if(!1!==Z("start",{el:this.el,pos:b,e:e,drag:this})){if(!v)return;this.mark(!0),T=!0}else this.abort();if(v){Q.length=0;var t=c(e),n=t[0]-v[0],r=t[1]-v[1],i=this.params.ignoreZoom?1:a.getZoom();A&&A.parentNode&&(n+=A.parentNode.scrollLeft-x[0],r+=A.parentNode.scrollTop-x[1]),n/=i,r/=i,this.moveBy(n,r,e),a.updateSelection(n,r,this),a.updatePosses(n,r,this)}}}.bind(this),this.upListener=function(e){v&&(v=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,n.noSelect),this.unmark(e),a.unmarkSelection(this,e),a.unmarkPosses(this,e),this.stop(e),a.notifyPosseDragStop(this,e),T=!1,Q.length=0,O?(A&&A.parentNode&&A.parentNode.removeChild(A),A=null):G&&!0===G(A,this.params.getPosition(A))&&(this.params.setPosition(A,b),Z("revert",A)))}.bind(this),this.getFilters=function(){return W},this.abort=function(){null!=v&&this.upListener()},this.getDragElement=function(e){return e?R||this.el:A||this.el};var J={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};t.events.start&&J.start.push(t.events.start),t.events.beforeStart&&J.beforeStart.push(t.events.beforeStart),t.events.stop&&J.stop.push(t.events.stop),t.events.drag&&J.drag.push(t.events.drag),t.events.revert&&J.revert.push(t.events.revert),this.on=function(e,t){J[e]&&J[e].push(t)},this.off=function(e,t){if(J[e]){for(var n=[],r=0;r<J[e].length;r++)J[e][r]!==t&&n.push(J[e][r]);J[e]=n}};var $,Z=function(e,t){var n=null;if(L&&L[e])n=L[e](t);else if(J[e])for(var r=0;r<J[e].length;r++)try{var i=J[e][r](t);null!=i&&(n=i)}catch(s){}return n};this.notifyStart=function(e){Z("start",{el:this.el,pos:this.params.getPosition(A),e:e,drag:this})},this.stop=function(e,t){if(t||T){var n=[],r=a.getSelection(),i=this.params.getPosition(A);if(r.length>0)for(var s=0;s<r.length;s++){var o=this.params.getPosition(r[s].el);n.push([r[s].el,{left:o[0],top:o[1]},r[s]])}else n.push([A,{left:i[0],top:i[1]},this]);Z("stop",{el:A,pos:$||i,finalPos:i,e:e,drag:this,selection:n})}},this.mark=function(e){var t;b=this.params.getPosition(A),C=this.params.getPosition(A,!0),P=[C[0]-b[0],C[1]-b[1]],this.size=this.params.getSize(A),Y=a.getMatchingDroppables(this),y(Y,!0,!1,this),this.params.addClass(A,this.params.dragClass||n.drag),t=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(A):this.params.getSize(A.parentNode),X={w:t[0],h:t[1]},p=0,g=0,e&&a.notifySelectionDragStart(this)},this.unmark=function(e,r){if(y(Y,!1,!0,this),j&&l(R,A)?($=[A.offsetLeft-p,A.offsetTop-g],A.parentNode.removeChild(A),A=R):$=null,this.params.removeClass(A,this.params.dragClass||n.drag),Y.length=0,j=!1,!r){Q.length>0&&$&&t.setPosition(R,$),Q.sort(I);for(var i=0;i<Q.length;i++){if(!0===Q[i].drop(this,e))break}}},this.moveBy=function(e,n,r){Q.length=0;var i=this.toGrid([b[0]+e,b[1]+n]),s=function(e,t,n,r){return null!=L&&L.constrain&&"function"===typeof L.constrain?L.constrain(e,t,n,r):V(e,t,n,r)}(i,A,X,this.size);if(l(this.el,A))if(i[0]!==s[0]||i[1]!==s[1]){if(!j){var o=u(R);t.addClass(o,f.ghostProxy),F?(F.appendChild(o),h=t.getPosition(R.parentNode,!0),d=t.getPosition(t.ghostProxyParent,!0),p=h[0]-d[0],g=h[1]-d[1]):R.parentNode.appendChild(o),A=o,j=!0}s=i}else j&&(A.parentNode.removeChild(A),A=R,j=!1,h=null,d=null,p=0,g=0);var a={x:s[0],y:s[1],w:this.size[0],h:this.size[1]},c={x:a.x+P[0],y:a.y+P[1],w:a.w,h:a.h},m=null;this.params.setPosition(A,[s[0]+p,s[1]+g]);for(var v=0;v<Y.length;v++){var y={x:Y[v].pagePosition[0],y:Y[v].pagePosition[1],w:Y[v].size[0],h:Y[v].size[1]};this.params.intersects(c,y)&&(N||null==m||m===Y[v].el)&&Y[v].canDrop(this)?(m||(m=Y[v].el),Q.push(Y[v]),Y[v].setHover(this,!0,r)):Y[v].isHover()&&Y[v].setHover(this,!1,r)}Z("drag",{el:this.el,pos:s,e:r,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?K(this.params.handle,!1):K(this.params.filter,this.params.filterExclude)},P=function(e,t,n,r){this._class=n.droppable,this.params=t||{},this.rank=t.rank||0,this._activeClass=this.params.activeClass||n.active,this._hoverClass=this.params.hoverClass||n.hover,_.apply(this,arguments);var i=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(e){this.params[e?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(e){return!0},this.isHover=function(){return i},this.setHover=function(e,t,n){(t||null==this.el._katavorioDragHover||this.el._katavorioDragHover===e.el._katavorio)&&(this.params[t?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=t?e.el._katavorio:null,i!==t&&this.params.events[t?"over":"out"]({el:this.el,e:n,drag:e,drop:this}),i=t)},this.drop=function(e,t){return this.params.events.drop({drag:e,e:t,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,i=null}},k=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},I=function(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:0},T=function(e){return null==e||null==(e="string"===typeof e||e.constructor===String?document.getElementById(e):e)?null:(e._katavorio=e._katavorio||k(),e)};e.Katavorio=function(e){var t=[],s={};this._dragsByScope={},this._dropsByScope={};var o=1,a=function(e,t){b(e,(function(e){for(var n=0;n<e.scopes.length;n++)t[e.scopes[n]]=t[e.scopes[n]]||[],t[e.scopes[n]].push(e)}))},l=function(t,n){var r=0;return b(t,(function(t){for(var i=0;i<t.scopes.length;i++)if(n[t.scopes[i]]){var s=e.indexOf(n[t.scopes[i]],t);-1!==s&&(n[t.scopes[i]].splice(s,1),r++)}})),r>0},u=(this.getMatchingDroppables=function(e){for(var t=[],n={},r=0;r<e.scopes.length;r++){var i=this._dropsByScope[e.scopes[r]];if(i)for(var s=0;s<i.length;s++)!i[s].canDrop(e)||n[i[s].uuid]||!i[s].allowLoopback&&i[s].el===e.el||(n[i[s].uuid]=!0,t.push(i[s]))}return t.sort(I),t},function(t){t=t||{};var n,r={events:{}};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];for(n=0;n<p.length;n++)r.events[p[n]]=t[p[n]]||g;return r.katavorio=this,r}.bind(this)),c=function(e,t){for(var n=0;n<p.length;n++)t[p[n]]&&e.on(p[n],t[p[n]])}.bind(this),h={},d=e.css||{},m=e.scope||"katavorio-drag-scope";for(var y in f)h[y]=f[y];for(var y in d)h[y]=d[y];var w=e.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return w},this.setInputFilterSelector=function(e){return w=e,this},this.draggable=function(t,n){var r=[];return b(t,function(t){if(null!=(t=T(t)))if(null==t._katavorioDrag){var i=u(n);t._katavorioDrag=new C(t,i,h,m),a(t._katavorioDrag,this._dragsByScope),r.push(t._katavorioDrag),e.addClass(t,i.selector?h.delegatedDraggable:h.draggable)}else c(t._katavorioDrag,n)}.bind(this)),r},this.droppable=function(t,n){var r=[];return b(t,function(t){if(null!=(t=T(t))){var i=new P(t,u(n),h,m);t._katavorioDrop=t._katavorioDrop||[],t._katavorioDrop.push(i),a(i,this._dropsByScope),r.push(i),e.addClass(t,h.droppable)}}.bind(this)),r},this.select=function(n){return b(n,(function(){var n=T(this);n&&n._katavorioDrag&&(s[n._katavorio]||(t.push(n._katavorioDrag),s[n._katavorio]=[n,t.length-1],e.addClass(n,h.selected)))})),this},this.deselect=function(n){return b(n,(function(){var n=T(this);if(n&&n._katavorio&&s[n._katavorio]){for(var r=[],i=0;i<t.length;i++)t[i].el!==n&&r.push(t[i]);t=r,delete s[n._katavorio],e.removeClass(n,h.selected)}})),this},this.deselectAll=function(){for(var n in s){var r=s[n];e.removeClass(r[0],h.selected)}t.length=0,s={}},this.markSelection=function(e){v(t,(function(e){e.mark()}),e)},this.markPosses=function(e){e.posses&&b(e.posses,(function(t){e.posseRoles[t]&&x[t]&&v(x[t].members,(function(e){e.mark()}),e)}))},this.unmarkSelection=function(e,n){v(t,(function(e){e.unmark(n)}),e)},this.unmarkPosses=function(e,t){e.posses&&b(e.posses,(function(n){e.posseRoles[n]&&x[n]&&v(x[n].members,(function(e){e.unmark(t,!0)}),e)}))},this.getSelection=function(){return t.slice(0)},this.updateSelection=function(e,n,r){v(t,(function(t){t.moveBy(e,n)}),r)};var _=function(e,t){t.posses&&b(t.posses,(function(n){t.posseRoles[n]&&x[n]&&v(x[n].members,(function(t){e(t)}),t)}))};this.updatePosses=function(e,t,n){_((function(n){n.moveBy(e,t)}),n)},this.notifyPosseDragStop=function(e,t){_((function(e){e.stop(t,!0)}),e)},this.notifySelectionDragStop=function(e,n){v(t,(function(e){e.stop(n,!0)}),e)},this.notifySelectionDragStart=function(e,n){v(t,(function(e){e.notifyStart(n)}),e)},this.setZoom=function(e){o=e},this.getZoom=function(){return o};var E=function(e,t,n,r){b(e,(function(e){l(e,n),e[r](t),a(e,n)}))};b(["set","add","remove","toggle"],function(e){this[e+"Scope"]=function(t,n){E(t._katavorioDrag,n,this._dragsByScope,e+"Scope"),E(t._katavorioDrop,n,this._dropsByScope,e+"Scope")}.bind(this),this[e+"DragScope"]=function(t,n){E(t.constructor===C?t:t._katavorioDrag,n,this._dragsByScope,e+"Scope")}.bind(this),this[e+"DropScope"]=function(t,n){E(t.constructor===P?t:t._katavorioDrop,n,this._dropsByScope,e+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(e,t){for(var n in this._dragsByScope)v(this._dragsByScope[n],(function(n){n.snap(e,t)}))},this.getDragsForScope=function(e){return this._dragsByScope[e]},this.getDropsForScope=function(e){return this._dropsByScope[e]};var S=function(e,n,r){if((e=T(e))[n]){var i=t.indexOf(e[n]);i>=0&&t.splice(i,1),l(e[n],r)&&b(e[n],(function(e){e.destroy()})),delete e[n]}},k=function(e,t,n,r){(e=T(e))[t]&&e[t].off(n,r)};this.elementRemoved=function(e){e._katavorioDrag&&this.destroyDraggable(e),e._katavorioDrop&&this.destroyDroppable(e)},this.destroyDraggable=function(e,t,n){1===arguments.length?S(e,"_katavorioDrag",this._dragsByScope):k(e,"_katavorioDrag",t,n)},this.destroyDroppable=function(e,t,n){1===arguments.length?S(e,"_katavorioDrop",this._dropsByScope):k(e,"_katavorioDrop",t,n)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},t=[],s={},x={}};var x={},D=function(e,t,r){var s=i(t)?t:t.id,o=!!i(t)||!1!==t.active,a=x[s]||function(){var e={name:s,members:[]};return x[s]=e,e}();return b(e,(function(e){if(e._katavorioDrag){if(r&&null!=e._katavorioDrag.posseRoles[a.name])return;n(a.members,e._katavorioDrag),n(e._katavorioDrag.posses,a.name),e._katavorioDrag.posseRoles[a.name]=o}})),a};this.addToPosse=function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(D(e,arguments[r]));return 1===n.length?n[0]:n},this.setPosse=function(e,t){for(var n=[],r=1;r<arguments.length;r++)n.push(D(e,arguments[r],!0).name);return b(e,function(e){if(e._katavorioDrag){var t=function(e,t){for(var n=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&n.push(e[r]);return n}(e._katavorioDrag.posses,n);Array.prototype.push.apply([],e._katavorioDrag.posses);for(var r=0;r<t.length;r++)this.removeFromPosse(e,t[r])}}.bind(this)),1===n.length?n[0]:n},this.removeFromPosse=function(e,t){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var n=1;n<arguments.length;n++)t=arguments[n],b(e,(function(e){if(e._katavorioDrag&&e._katavorioDrag.posses){var n=e._katavorioDrag;b(t,(function(e){r(x[e].members,n),r(n.posses,e),delete n.posseRoles[e]}))}}))},this.removeFromAllPosses=function(e){b(e,(function(e){if(e._katavorioDrag&&e._katavorioDrag.posses){var t=e._katavorioDrag;b(t.posses,(function(e){r(x[e].members,t)})),t.posses.length=0,t.posseRoles={}}}))},this.setPosseState=function(e,t,n){var r=x[t];r&&b(e,(function(e){e._katavorioDrag&&e._katavorioDrag.posses&&(e._katavorioDrag.posseRoles[r.name]=n)}))}},e.Katavorio.version="1.0.0",t.Katavorio=e.Katavorio}.call("undefined"!==typeof window?window:this),function(){var e=this;e.jsPlumbUtil=e.jsPlumbUtil||{};var n=e.jsPlumbUtil;function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return"string"===typeof e}function s(e){return"boolean"===typeof e}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return"[object Date]"===Object.prototype.toString.call(e)}function l(e){return"[object Function]"===Object.prototype.toString.call(e)}function u(e){if(i(e))return""+e;if(s(e))return!!e;if(a(e))return new Date(e.getTime());if(l(e))return e;if(r(e)){for(var t=[],n=0;n<e.length;n++)t.push(u(e[n]));return t}if(o(e)){var c={};for(var h in e)c[h]=u(e[h]);return c}return e}function c(e,t,n,a){var l,c,h={},d={};for(n=n||[],a=a||[],c=0;c<n.length;c++)h[n[c]]=!0;for(c=0;c<a.length;c++)d[a[c]]=!0;var f=u(e);for(c in t)if(null==f[c]||d[c])f[c]=t[c];else if(i(t[c])||s(t[c]))h[c]?((l=[]).push.apply(l,r(f[c])?f[c]:[f[c]]),l.push.apply(l,s(t[c])?t[c]:[t[c]]),f[c]=l):f[c]=t[c];else if(r(t[c]))l=[],r(f[c])&&l.push.apply(l,f[c]),l.push.apply(l,t[c]),f[c]=l;else if(o(t[c]))for(var p in o(f[c])||(f[c]={}),t[c])f[c][p]=t[c][p];return f}function h(e,t){if(e)for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function d(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),-1!==n}function f(e,t,n,r){var i=e[t];return null==i&&(i=[],e[t]=i),i[r?"unshift":"push"](n),i}t.jsPlumbUtil=n,n.isArray=r,n.isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)},n.isString=i,n.isBoolean=s,n.isNull=function(e){return null==e},n.isObject=o,n.isDate=a,n.isFunction=l,n.isNamedFunction=function(e){return l(e)&&null!=e.name&&e.name.length>0},n.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},n.clone=u,n.merge=c,n.replace=function(e,t,n){if(null!=e){var r=e;return t.replace(/([^\.])+/g,(function(e,t,i,s){var o=e.match(/([^\[0-9]+){1}(\[)([0-9+])/),a=function(){return r[o[1]]||(r[o[1]]=[],r[o[1]])};if(i+e.length>=s.length)o?a()[o[3]]=n:r[e]=n;else if(o){var l=a();r=l[o[3]]||(l[o[3]]={},l[o[3]])}else r=r[e]||(r[e]={},r[e]);return""})),e}},n.functionChain=function(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0][n[r][1]].apply(n[r][0],n[r][2]);if(i===t)return i}return e},n.populate=function(e,t,n,s){var a=function(e){if(null!=e){if(i(e))return function(e){var n=e.match(/(\${.*?})/g);if(null!=n)for(var r=0;r<n.length;r++){var i=t[n[r].substring(2,n[r].length-1)]||"";null!=i&&(e=e.replace(n[r],i))}return e}(e);if(!l(e)||s||null!=n&&0!==(e.name||"").indexOf(n)){if(r(e)){for(var u=[],c=0;c<e.length;c++)u.push(a(e[c]));return u}if(o(e)){var h={};for(var d in e)h[d]=a(e[d]);return h}return e}return e(t)}};return a(e)},n.findWithFunction=h,n.removeWithFunction=function(e,t){var n=h(e,t);return n>-1&&e.splice(n,1),-1!==n},n.remove=d,n.addWithFunction=function(e,t,n){-1===h(e,n)&&e.push(t)},n.addToList=f,n.suggest=function(e,t,n){return-1===e.indexOf(t)&&(n?e.unshift(t):e.push(t),!0)},n.extend=function(e,t,n){var i;t=r(t)?t:[t];var s=function(t){for(var n=t.__proto__;null!=n;)if(null!=n.prototype){for(var r in n.prototype)n.prototype.hasOwnProperty(r)&&!e.prototype.hasOwnProperty(r)&&(e.prototype[r]=n.prototype[r]);n=n.prototype.__proto__}else n=null};for(i=0;i<t.length;i++){for(var o in t[i].prototype)t[i].prototype.hasOwnProperty(o)&&!e.prototype.hasOwnProperty(o)&&(e.prototype[o]=t[i].prototype[o]);s(t[i])}var a=function(e,n){return function(){for(i=0;i<t.length;i++)t[i].prototype[e]&&t[i].prototype[e].apply(this,arguments);return n.apply(this,arguments)}},l=function(t){for(var n in t)e.prototype[n]=a(n,t[n])};if(arguments.length>2)for(i=2;i<arguments.length;i++)l(arguments[i]);return e};for(var p=[],g=0;g<256;g++)p[g]=(g<16?"0":"")+g.toString(16);function m(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return p[255&e]+p[e>>8&255]+p[e>>16&255]+p[e>>24&255]+"-"+p[255&t]+p[t>>8&255]+"-"+p[t>>16&15|64]+p[t>>24&255]+"-"+p[63&n|128]+p[n>>8&255]+"-"+p[n>>16&255]+p[n>>24&255]+p[255&r]+p[r>>8&255]+p[r>>16&255]+p[r>>24&255]}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(n.logEnabled&&"undefined"!==typeof console)try{var r=arguments[arguments.length-1];console.log(r)}catch(i){}}n.uuid=m,n.fastTrim=function(e){if(null==e)return null;for(var t=e.replace(/^\s\s*/,""),n=/\s/,r=t.length;n.test(t.charAt(--r)););return t.slice(0,r+1)},n.each=function(e,t){e=null==e.length||"string"===typeof e?[e]:e;for(var n=0;n<e.length;n++)t(e[n])},n.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},n.mergeWithParents=function(e,t,n){n=n||"parent";var r=function(e){return e?t[e]:null},i=function(e){return e?r(e[n]):null},s=function(e,t){if(null==e)return t;var n=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];"override"===t.mergeStrategy&&Array.prototype.push.apply(n,["events","overlays"]);var r=c(e,t,[],n);return s(i(e),r)},o=function(e){if(null==e)return{};if("string"===typeof e)return r(e);if(e.length){for(var t=!1,n=0,i=void 0;!t&&n<e.length;)(i=o(e[n]))?t=!0:n++;return i}},a=o(e);return a?s(i(a),a):{}},n.logEnabled=!0,n.log=v,n.wrap=function(e,t,n){return function(){var r=null;try{null!=t&&(r=t.apply(this,arguments))}catch(i){v("jsPlumb function failed : "+i)}if(null!=e&&(null==n||r!==n))try{r=e.apply(this,arguments)}catch(i){v("wrapped function failed : "+i)}return r}};var y=function(){var e=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,n,r){var i=function(t){f(e._listeners,t,n,r),n.__jsPlumb=n.__jsPlumb||{},n.__jsPlumb[m()]=t};if("string"===typeof t)i(t);else if(null!=t.length)for(var s=0;s<t.length;s++)i(t[s]);return e},this.fire=function(e,t,n){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[e]){var r=this._listeners[e].length,i=0,s=!1,o=null;if(!this.shouldFireEvent||this.shouldFireEvent(e,t,n))for(;!s&&i<r&&!1!==o;){if(this.eventsToDieOn[e])this._listeners[e][i].apply(this,[t,n]);else try{o=this._listeners[e][i].apply(this,[t,n])}catch(a){v("jsPlumb: fire failed for event "+e+" : "+a)}i++,null!=this._listeners&&null!=this._listeners[e]||(s=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=e.queue.pop();t&&e.fire.apply(e,t)},this.unbind=function(e,t){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"===typeof e)delete this._listeners[e];else if(e.__jsPlumb){var n=void 0;for(var r in e.__jsPlumb)n=e.__jsPlumb[r],d(this._listeners[n]||[],e)}}else 2===arguments.length&&d(this._listeners[e]||[],t);return this},this.getListener=function(t){return e._listeners[t]},this.setSuspendEvents=function(t){e.eventsSuspended=t},this.isSuspendEvents=function(){return e.eventsSuspended},this.silently=function(t){e.setSuspendEvents(!0);try{t()}catch(n){v("Cannot execute silent function "+n)}e.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in e._listeners)e._listeners[t]=null}};function b(e,t,n){var r=[e[0]-t[0],e[1]-t[1]],i=Math.cos(n/360*Math.PI*2),s=Math.sin(n/360*Math.PI*2);return[r[0]*i-r[1]*s+t[0],r[1]*i+r[0]*s+t[1],i,s]}n.EventGenerator=y,n.rotatePoint=b,n.rotateAnchorOrientation=function(e,t){var n=b(e,[0,0],t);return[Math.round(n[0]),Math.round(n[1])]}}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this;e.jsPlumbUtil.matchesSelector=function(e,t,n){for(var r=(n=n||e.parentNode).querySelectorAll(t),i=0;i<r.length;i++)if(r[i]===e)return!0;return!1},e.jsPlumbUtil.consume=function(e,t){e.stopPropagation?e.stopPropagation():e.returnValue=!1,!t&&e.preventDefault&&e.preventDefault()},e.jsPlumbUtil.sizeElement=function(e,t,n,r,i){e&&(e.style.height=i+"px",e.height=i,e.style.width=r+"px",e.width=r,e.style.left=t+"px",e.style.top=n+"px")}}.call("undefined"!==typeof window?window:this),function(){var e={deriveAnchor:function(e,t,n,r){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[e][t]}},t=function(e,t){this.count=0,this.instance=e,this.lists={},this.options=t||{},this.instance.addList=function(e,t){return this.listManager.addList(e,t)},this.instance.removeList=function(e){this.listManager.removeList(e)},this.instance.bind("manageElement",function(e){for(var t=this.instance.getSelector(e.el,"[jtk-scrollable-list]"),n=0;n<t.length;n++)this.addList(t[n])}.bind(this)),this.instance.bind("unmanageElement",(function(e){this.removeList(e.el)})),this.instance.bind("connection",function(e,t){null==t&&(this._maybeUpdateParentList(e.source),this._maybeUpdateParentList(e.target))}.bind(this))};this.jsPlumbListManager=t,t.prototype={addList:function(t,r){var i=this.instance.extend({},e);this.instance.extend(i,this.options),r=this.instance.extend(i,r||{});var s=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[s]=new n(this.instance,t,r,s)},removeList:function(e){var t=this.lists[e._jsPlumbList];t&&(t.destroy(),delete this.lists[e._jsPlumbList])},_maybeUpdateParentList:function(e){for(var t=e.parentNode,n=this.instance.getContainer();null!=t&&t!==n;){if(null!=t._jsPlumbList&&null!=this.lists[t._jsPlumbList])return void t._jsPlumbScrollHandler();t=t.parentNode}}};var n=function(e,t,n,r){function i(e,t,r,i){return n.anchor?n.anchor:n.deriveAnchor(e,t,r,i)}function s(e,t,r,i){return n.deriveEndpoint?n.deriveEndpoint(e,t,r,i):n.endpoint?n.endpoint:r.type}t._jsPlumbList=r;var o=function(n){for(var r=e.getSelector(t,".jtk-managed"),o=e.getId(t),a=0;a<r.length;a++){if(r[a].offsetTop<t.scrollTop)r[a]._jsPlumbProxies||(r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],e.select({source:r[a]}).each((function(n){e.proxyConnection(n,0,t,o,(function(){return s("top",0,n.endpoints[0],n)}),(function(){return i("top",0,n.endpoints[0],n)})),r[a]._jsPlumbProxies.push([n,0])})),e.select({target:r[a]}).each((function(n){e.proxyConnection(n,1,t,o,(function(){return s("top",1,n.endpoints[1],n)}),(function(){return i("top",1,n.endpoints[1],n)})),r[a]._jsPlumbProxies.push([n,1])})));else if(r[a].offsetTop+r[a].offsetHeight>t.scrollTop+t.offsetHeight)r[a]._jsPlumbProxies||(r[a]._jsPlumbProxies=r[a]._jsPlumbProxies||[],e.select({source:r[a]}).each((function(n){e.proxyConnection(n,0,t,o,(function(){return s("bottom",0,n.endpoints[0],n)}),(function(){return i("bottom",0,n.endpoints[0],n)})),r[a]._jsPlumbProxies.push([n,0])})),e.select({target:r[a]}).each((function(n){e.proxyConnection(n,1,t,o,(function(){return s("bottom",1,n.endpoints[1],n)}),(function(){return i("bottom",1,n.endpoints[1],n)})),r[a]._jsPlumbProxies.push([n,1])})));else if(r[a]._jsPlumbProxies){for(var l=0;l<r[a]._jsPlumbProxies.length;l++)e.unproxyConnection(r[a]._jsPlumbProxies[l][0],r[a]._jsPlumbProxies[l][1],o);delete r[a]._jsPlumbProxies}e.revalidate(r[a])}!function(t){for(var n=t.parentNode,r=e.getContainer();null!=n&&n!==r;){if(e.hasClass(n,"jtk-managed"))return void e.recalculateOffsets(n);n=n.parentNode}}(t)};e.setAttribute(t,"jtk-scrollable-list","true"),t._jsPlumbScrollHandler=o,e.on(t,"scroll",o),o(),this.destroy=function(){e.off(t,"scroll",o),delete t._jsPlumbScrollHandler;for(var n=e.getSelector(t,".jtk-managed"),r=e.getId(t),i=0;i<n.length;i++)if(n[i]._jsPlumbProxies){for(var s=0;s<n[i]._jsPlumbProxies.length;s++)e.unproxyConnection(n[i]._jsPlumbProxies[s][0],n[i]._jsPlumbProxies[s][1],r);delete n[i]._jsPlumbProxies}}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,n=e.jsPlumbUtil,r=function(e){if(e._jsPlumb.paintStyle&&e._jsPlumb.hoverPaintStyle){var t={};d.extend(t,e._jsPlumb.paintStyle),d.extend(t,e._jsPlumb.hoverPaintStyle),delete e._jsPlumb.hoverPaintStyle,t.gradient&&e._jsPlumb.paintStyle.fill&&delete t.gradient,e._jsPlumb.hoverPaintStyle=t}},i=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],s=function(e){return null==e?null:e.split(" ")},o=function(e,t,n){for(var r in t)e[r]=n},a=function(e,t,r){if(e.getDefaultType){var i=e.getTypeDescriptor(),s={},a=e.getDefaultType(),l=n.merge({},a);o(s,a,"__default");for(var u=0,c=e._jsPlumb.types.length;u<c;u++){var h=e._jsPlumb.types[u];if("__default"!==h){var d=e._jsPlumb.instance.getType(h,i);if(null!=d){var f=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],p=[];"override"===d.mergeStrategy?Array.prototype.push.apply(f,["events","overlays","cssClass"]):p.push("cssClass"),l=n.merge(l,d,p,f),o(s,d,h)}}}t&&(l=n.populate(l,t,"_")),e.applyType(l,r,s),r||e.repaint()}},l=e.jsPlumbUIComponent=function(e){n.EventGenerator.apply(this,arguments);var t=arguments,r=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:e._jsPlumb,parameters:e.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:e.beforeDetach,beforeDrop:e.beforeDrop,overlayPlacements:[],hoverClass:e.hoverClass||e._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(e,t,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{},this._jsPlumb.typeCache[n][e]=t},this.getCachedTypeItem=function(e,t){return this._jsPlumb.typeCache[t]?this._jsPlumb.typeCache[t][e]:null},this.getId=function(){return r};var i=e.overlays||[],s={};if(this.defaultOverlayKeys){for(var o=0;o<this.defaultOverlayKeys.length;o++)Array.prototype.push.apply(i,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[o]]||[]);for(o=0;o<i.length;o++){var a=d.convertToFullOverlaySpec(i[o]);s[a[1].id]=a}}var l={overlays:s,parameters:e.parameters||{},scope:e.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return l},this.appendToDefaultType=function(e){for(var t in e)l[t]=e[t]},e.events)for(var u in e.events)this.bind(u,e.events[u]);this.clone=function(){var e=Object.create(this.constructor.prototype);return this.constructor.apply(e,t),e}.bind(this),this.isDetachAllowed=function(e){var t=!0;if(this._jsPlumb.beforeDetach)try{t=this._jsPlumb.beforeDetach(e)}catch(r){n.log("jsPlumb: beforeDetach callback failed",r)}return t},this.isDropAllowed=function(e,t,r,i,s,o,a){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:e,targetId:t,scope:r,connection:i,dropEndpoint:s,source:o,target:a});if(this._jsPlumb.beforeDrop)try{l=this._jsPlumb.beforeDrop({sourceId:e,targetId:t,scope:r,connection:i,dropEndpoint:s,source:o,target:a})}catch(u){n.log("jsPlumb: beforeDrop callback failed",u)}return l};var c=[];this.setListenerComponent=function(e){for(var t=0;t<c.length;t++)c[t][3]=e}},u=function(e,t){var n=e._jsPlumb.types[t],r=e._jsPlumb.instance.getType(n,e.getTypeDescriptor());null!=r&&r.cssClass&&e.canvas&&e._jsPlumb.instance.removeClass(e.canvas,r.cssClass)};n.extend(e.jsPlumbUIComponent,n.EventGenerator,{getParameter:function(e){return this._jsPlumb.parameters[e]},setParameter:function(e,t){this._jsPlumb.parameters[e]=t},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(e){this._jsPlumb.parameters=e},getClass:function(){return d.getClass(this.canvas)},hasClass:function(e){return d.hasClass(this.canvas,e)},addClass:function(e){d.addClass(this.canvas,e)},removeClass:function(e){d.removeClass(this.canvas,e)},updateClasses:function(e,t){d.updateClasses(this.canvas,e,t)},setType:function(e,t,n){this.clearTypes(),this._jsPlumb.types=s(e)||[],a(this,t,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(e,t){a(this,e,t)},hasType:function(e){return-1!==this._jsPlumb.types.indexOf(e)},addType:function(e,t,n){var r=s(e),i=!1;if(null!=r){for(var o=0,l=r.length;o<l;o++)this.hasType(r[o])||(this._jsPlumb.types.push(r[o]),i=!0);i&&a(this,t,n)}},removeType:function(e,t,n){var r=s(e),i=!1,o=function(e){var t=this._jsPlumb.types.indexOf(e);return-1!==t&&(u(this,t),this._jsPlumb.types.splice(t,1),!0)}.bind(this);if(null!=r){for(var l=0,c=r.length;l<c;l++)i=o(r[l])||i;i&&a(this,t,n)}},clearTypes:function(e,t){for(var n=this._jsPlumb.types.length,r=0;r<n;r++)u(this,0),this._jsPlumb.types.splice(0,1);a(this,e,t)},toggleType:function(e,t,n){var r=s(e);if(null!=r){for(var i=0,o=r.length;i<o;i++){var l=this._jsPlumb.types.indexOf(r[i]);-1!==l?(u(this,l),this._jsPlumb.types.splice(l,1)):this._jsPlumb.types.push(r[i])}a(this,t,n)}},applyType:function(e,t){if(this.setPaintStyle(e.paintStyle,t),this.setHoverPaintStyle(e.hoverPaintStyle,t),e.parameters)for(var n in e.parameters)this.setParameter(n,e.parameters[n]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(e,t){this._jsPlumb.paintStyle=e,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,r(this),t||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(e,t){this._jsPlumb.hoverPaintStyle=e,r(this),t||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(e){(e||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(e,t,n){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=e;var r=e?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[r](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[r](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=e?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(n=n||jsPlumbUtil.uuid(),this.repaint({timestamp:n,recalc:!1}))),this.getAttachedElements&&!t&&function(e,t,n,r){var i=e.getAttachedElements();if(i)for(var s=0,o=i.length;s<o;s++)r&&r===i[s]||i[s].setHover(t,!0,n)}(this,e,jsPlumbUtil.uuid(),this)}}});var c=0,h=e.jsPlumbInstance=function(t){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},t&&d.extend(this.Defaults,t),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},n.EventGenerator.apply(this);var r=this,s=function(){var e=c+1;return c++,e}(),o=r.bind,a={},u=1,h=function(e){if(null==e)return null;if(3===e.nodeType||8===e.nodeType)return{el:e,text:!0};var t=r.getElement(e);return{el:t,id:n.isString(e)&&null==t?e:V(t)}};for(var f in this.getInstanceIndex=function(){return s},this.setZoom=function(e,t){return u=e,r.fire("zoom",u),t&&r.repaintEverything(),!0},this.getZoom=function(){return u},this.Defaults)a[f]=this.Defaults[f];var p,g=[];this.unbindContainer=function(){if(null!=p&&g.length>0)for(var e=0;e<g.length;e++)r.off(p,g[e][0],g[e][1])},this.setContainer=function(e){this.unbindContainer(),e=this.getElement(e),this.select().each((function(t){t.moveParent(e)})),this.selectEndpoints().each((function(t){t.moveParent(e)}));var t=p;p=e,g.length=0;for(var n={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},s=function(e,t,i){var s=t.srcElement||t.target,o=(s&&s.parentNode?s.parentNode._jsPlumb:null)||(s?s._jsPlumb:null)||(s&&s.parentNode&&s.parentNode.parentNode?s.parentNode.parentNode._jsPlumb:null);if(o){o.fire(e,o,t);var a=i&&n[i+e]||e;r.fire(a,o.component||o,t)}},o=function(e,t,n){g.push([e,n]),r.on(p,e,t,n)},a=function(e){o(e,".jtk-connector",(function(t){s(e,t)})),o(e,".jtk-endpoint",(function(t){s(e,t,"endpoint")})),o(e,".jtk-overlay",(function(t){s(e,t)}))},l=0;l<i.length;l++)a(i[l]);for(var u in _){var c=_[u].el;c.parentNode===t&&(t.removeChild(c),p.appendChild(c))}},this.getContainer=function(){return p},this.bind=function(e,t){"ready"===e&&v?t():o.apply(r,[e,t])},r.importDefaults=function(e){for(var t in e)r.Defaults[t]=e[t];return e.Container&&r.setContainer(e.Container),r},r.restoreDefaults=function(){return r.Defaults=d.extend({},a),r};var m=null,v=!1,y=[],b={},w={},_={},E={},S={},C=!1,P=[],k=!1,I=null,T=this.Defaults.Scope,x=1,D=function(){return""+x++},A=function(e,t){p?p.appendChild(e):t?this.getElement(t).appendChild(e):this.appendToRoot(e)}.bind(this),O=function(e,t,n,i){var s={c:[],e:[]};if(!k&&null!=(e=r.getElement(e))){var o=V(e),a=e.querySelectorAll(".jtk-managed");null==n&&(n=jsPlumbUtil.uuid());ie({elId:o,offset:t,recalc:!1,timestamp:n});for(var l=0;l<a.length;l++)ie({elId:a[l].getAttribute("id"),recalc:!0,timestamp:n});var u=r.router.redraw(o,t,n,null,i);if(Array.prototype.push.apply(s.c,u.c),Array.prototype.push.apply(s.e,u.e),a)for(var c=0;c<a.length;c++)u=r.router.redraw(a[c].getAttribute("id"),null,n,null,i,!0),Array.prototype.push.apply(s.c,u.c),Array.prototype.push.apply(s.e,u.e)}return s},N=function(e){return w[e]},j=function(e,t){var i=d.extend({},e);if(t&&d.extend(i,t),i.source&&(i.source.endpoint?i.sourceEndpoint=i.source:i.source=r.getElement(i.source)),i.target&&(i.target.endpoint?i.targetEndpoint=i.target:i.target=r.getElement(i.target)),e.uuids&&(i.sourceEndpoint=N(e.uuids[0]),i.targetEndpoint=N(e.uuids[1])),i.sourceEndpoint&&i.sourceEndpoint.isFull())n.log(r,"could not add connection; source endpoint is full");else if(i.targetEndpoint&&i.targetEndpoint.isFull())n.log(r,"could not add connection; target endpoint is full");else{if(!i.type&&i.sourceEndpoint&&(i.type=i.sourceEndpoint.connectionType),i.sourceEndpoint&&i.sourceEndpoint.connectorOverlays){i.overlays=i.overlays||[];for(var s=0,o=i.sourceEndpoint.connectorOverlays.length;s<o;s++)i.overlays.push(i.sourceEndpoint.connectorOverlays[s])}i.sourceEndpoint&&i.sourceEndpoint.scope&&(i.scope=i.sourceEndpoint.scope),!i["pointer-events"]&&i.sourceEndpoint&&i.sourceEndpoint.connectorPointerEvents&&(i["pointer-events"]=i.sourceEndpoint.connectorPointerEvents);var a=function(e,t,n){var s=function(e,t){var n=d.extend({},e);for(var r in t)t[r]&&(n[r]=t[r]);return n}(t,{anchor:i.anchors?i.anchors[n]:i.anchor,endpoint:i.endpoints?i.endpoints[n]:i.endpoint,paintStyle:i.endpointStyles?i.endpointStyles[n]:i.endpointStyle,hoverPaintStyle:i.endpointHoverStyles?i.endpointHoverStyles[n]:i.endpointHoverStyle});return r.addEndpoint(e,s)},l=function(e,t,n,r){if(i[e]&&!i[e].endpoint&&!i[e+"Endpoint"]&&!i.newConnection){var s=n[V(i[e])];if(s=s?s[r]:null){if(!s.enabled)return!1;var o=d.extend({},s.def);delete o.label;var l=null!=s.endpoint&&s.endpoint._jsPlumb?s.endpoint:a(i[e],o,t);if(l.isFull())return!1;i[e+"Endpoint"]=l,!i.scope&&o.scope&&(i.scope=o.scope),s.uniqueEndpoint?s.endpoint?l.finalEndpoint=s.endpoint:(s.endpoint=l,l.setDeleteOnEmpty(!1)):l.setDeleteOnEmpty(!0),0===t&&s.def.connectorOverlays&&(i.overlays=i.overlays||[],Array.prototype.push.apply(i.overlays,s.def.connectorOverlays))}}};if(!1!==l("source",0,this.sourceEndpointDefinitions,i.type||"default")&&!1!==l("target",1,this.targetEndpointDefinitions,i.type||"default"))return i.sourceEndpoint&&i.targetEndpoint&&(function(e,t){for(var n=e.scope.split(/\s/),r=t.scope.split(/\s/),i=0;i<n.length;i++)for(var s=0;s<r.length;s++)if(r[s]===n[i])return!0;return!1}(i.sourceEndpoint,i.targetEndpoint)||(i=null)),i}}.bind(r),R=function(e){var t=r.Defaults.ConnectionType||r.getDefaultConnectionType();e._jsPlumb=r,e.newConnection=R,e.newEndpoint=L,e.endpointsByUUID=w,e.endpointsByElement=b,e.finaliseConnection=M,e.id="con_"+D();var n=new t(e);return n.isDetachable()&&(n.endpoints[0].initDraggable("_jsPlumbSource"),n.endpoints[1].initDraggable("_jsPlumbTarget")),n},M=r.finaliseConnection=function(e,t,n,i){if(t=t||{},e.suspendedEndpoint||y.push(e),e.pending=null,e.endpoints[0].isTemporarySource=!1,!1!==i&&r.router.newConnection(e),O(e.source),!t.doNotFireConnectionEvent&&!1!==t.fireEvent){var s={connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]};r.fire("connection",s,n)}},L=function(e,t){var n=r.Defaults.EndpointType||d.Endpoint,i=d.extend({},e);i._jsPlumb=r,i.newConnection=R,i.newEndpoint=L,i.endpointsByUUID=w,i.endpointsByElement=b,i.fireDetachEvent=H,i.elementId=t||V(i.source);var s=new n(i);return s.id="ep_"+D(),re(i.elementId,i.source),d.headless||r.getDragManager().endpointAdded(i.source,t),s},F=function(e,t,n){var r=b[e];if(r&&r.length)for(var i=0,s=r.length;i<s;i++){for(var o=0,a=r[i].connections.length;o<a;o++){if(t(r[i].connections[o]))return}n&&n(r[i])}},U=function(e,t,n){t="block"===t;var r=null;n&&(r=function(e){e.setVisible(t,!0,!0)});var i=h(e);F(i.id,(function(e){if(t&&n){var r=e.sourceId===i.id?1:0;e.endpoints[r].isVisible()&&e.setVisible(!0)}else e.setVisible(t)}),r)},V=function(e,t,i){if(n.isString(e))return e;if(null==e)return null;var o=r.getAttribute(e,"id");return o&&"undefined"!==o||(2===arguments.length&&void 0!==arguments[1]?o=t:(1===arguments.length||3===arguments.length&&!arguments[2])&&(o="jsPlumb_"+s+"_"+D()),i||r.setAttribute(e,"id",o)),o};this.setConnectionBeingDragged=function(e){C=e},this.isConnectionBeingDragged=function(){return C},this.getManagedElements=function(){return _},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(e,t,i){i=i||{};var s=d.extend({},i);d.extend(s,t),s.endpoint=s.endpoint||r.Defaults.Endpoint,s.paintStyle=s.paintStyle||r.Defaults.EndpointStyle;for(var o=[],a=n.isArray(e)||null!=e.length&&!n.isString(e)?e:[e],l=0,u=a.length;l<u;l++){s.source=r.getElement(a[l]),ne(s.source);var c=V(s.source),h=L(s,c),f=re(c,s.source,null,!k).info.o;n.addToList(b,c,h),k||h.paint({anchorLoc:h.anchor.compute({xy:[f.left,f.top],wh:P[c],element:h,timestamp:I,rotation:this.getRotation(c)}),timestamp:I}),o.push(h)}return 1===o.length?o[0]:o},this.addEndpoints=function(e,t,i){for(var s=[],o=0,a=t.length;o<a;o++){var l=r.addEndpoint(e,t[o],i);n.isArray(l)?Array.prototype.push.apply(s,l):s.push(l)}return s},this.animate=function(e,t,i){if(!this.animationSupported)return!1;i=i||{};var s=r.getElement(e),o=V(s),a=d.animEvents.step,l=d.animEvents.complete;i[a]=n.wrap(i[a],(function(){r.revalidate(o)})),i[l]=n.wrap(i[l],(function(){r.revalidate(o)})),r.doAnimate(s,t,i)},this.checkCondition=function(e,t){var i=r.getListener(e),s=!0;if(i&&i.length>0){var o=Array.prototype.slice.call(arguments,1);try{for(var a=0,l=i.length;a<l;a++)s=s&&i[a].apply(i[a],o)}catch(u){n.log(r,"cannot check condition ["+e+"]"+u)}}return s},this.connect=function(e,t){var r,i=j(e,t);if(i){if(null==i.source&&null==i.sourceEndpoint)return void n.log("Cannot establish connection - source does not exist");if(null==i.target&&null==i.targetEndpoint)return void n.log("Cannot establish connection - target does not exist");ne(i.source),r=R(i),M(r,i)}return r};var z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],B=function(e,t,n,r){var i,s,o,a=z[n],l=e[a.elId],u=(e[a.el],e.endpoints[n]),c={index:n,originalSourceId:0===n?l:e.sourceId,newSourceId:e.sourceId,originalTargetId:1===n?l:e.targetId,newTargetId:e.targetId,connection:e};if(t.constructor===d.Endpoint)(i=t).addConnection(e),t=i.element;else if(s=V(t),o=this[a.epDefs][s],s===e[a.elId])i=null;else if(o)for(var h in o){if(!o[h].enabled)return;i=null!=o[h].endpoint&&o[h].endpoint._jsPlumb?o[h].endpoint:this.addEndpoint(t,o[h].def),o[h].uniqueEndpoint&&(o[h].endpoint=i),i.addConnection(e)}else i=e.makeEndpoint(0===n,t,s);return null!=i&&(u.detachFromConnection(e),e.endpoints[n]=i,e[a.el]=i.element,e[a.elId]=i.elementId,c[0===n?"newSourceId":"newTargetId"]=i.elementId,q(c),r||e.repaint()),c.element=t,c}.bind(this);this.setSource=function(e,t,n){var r=B(e,t,0,n);this.router.sourceOrTargetChanged(r.originalSourceId,r.newSourceId,e,r.el,0)},this.setTarget=function(e,t,n){var r=B(e,t,1,n);this.router.sourceOrTargetChanged(r.originalTargetId,r.newTargetId,e,r.el,1)},this.deleteEndpoint=function(e,t,n){var i="string"===typeof e?w[e]:e;return i&&r.deleteObject({endpoint:i,dontUpdateHover:t,deleteAttachedObjects:n}),r},this.deleteEveryEndpoint=function(){var e=r.setSuspendDrawing(!0);for(var t in b){var n=b[t];if(n&&n.length)for(var i=0,s=n.length;i<s;i++)r.deleteEndpoint(n[i],!0)}b={},_={},w={},E={},S={},r.router.reset();var o=r.getDragManager();return o&&o.reset(),e||r.setSuspendDrawing(!1),r};var H=function(e,t,n){var i=r.Defaults.ConnectionType||r.getDefaultConnectionType(),s=e.constructor===i?{connection:e,source:e.source,target:e.target,sourceId:e.sourceId,targetId:e.targetId,sourceEndpoint:e.endpoints[0],targetEndpoint:e.endpoints[1]}:e;t&&r.fire("connectionDetached",s,n),r.fire("internal.connectionDetached",s,n),r.router.connectionDetached(s)},q=r.fireMoveEvent=function(e,t){r.fire("connectionMoved",e,t)};this.unregisterEndpoint=function(e){for(var t in e._jsPlumb.uuid&&(w[e._jsPlumb.uuid]=null),r.router.deleteEndpoint(e),b){var n=b[t];if(n){for(var i=[],s=0,o=n.length;s<o;s++)n[s]!==e&&i.push(n[s]);b[t]=i}b[t].length<1&&delete b[t]}};var G="isDetachAllowed";this.deleteConnection=function(e,t){return!(null==e||!(t=t||{}).force&&!n.functionChain(!0,!1,[[e.endpoints[0],G,[e]],[e.endpoints[1],G,[e]],[e,G,[e]],[r,"checkCondition",["beforeDetach",e]]]))&&(e.setHover(!1),H(e,!e.pending&&!1!==t.fireEvent,t.originalEvent),e.endpoints[0].detachFromConnection(e),e.endpoints[1].detachFromConnection(e),n.removeWithFunction(y,(function(t){return e.id===t.id})),e.cleanup(),e.destroy(),!0)},this.deleteEveryConnection=function(e){e=e||{};var t=y.length,n=0;return r.batch((function(){for(var i=0;i<t;i++)n+=r.deleteConnection(y[0],e)?1:0})),n},this.deleteConnectionsForElement=function(e,t){t=t||{},e=r.getElement(e);var n=V(e),i=b[n];if(i&&i.length)for(var s=0,o=i.length;s<o;s++)i[s].deleteEveryConnection(t);return r},this.deleteObject=function(e){var t={endpoints:{},connections:{},endpointCount:0,connectionCount:0},i=!1!==e.deleteAttachedObjects,s=function(n){null!=n&&null==t.connections[n.id]&&(e.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),t.connections[n.id]=n,t.connectionCount++)};for(var o in e.connection?s(e.connection):function(n){if(null!=n&&null==t.endpoints[n.id]&&(e.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),t.endpoints[n.id]=n,t.endpointCount++,i))for(var r=0;r<n.connections.length;r++){var o=n.connections[r];s(o)}}(e.endpoint),t.connections){var a=t.connections[o];if(a._jsPlumb){n.removeWithFunction(y,(function(e){return a.id===e.id})),H(a,!1!==e.fireEvent&&!a.pending,e.originalEvent);var l=null==e.deleteAttachedObjects?null:!e.deleteAttachedObjects;a.endpoints[0].detachFromConnection(a,null,l),a.endpoints[1].detachFromConnection(a,null,l),a.cleanup(!0),a.destroy(!0)}}for(var u in t.endpoints){var c=t.endpoints[u];c._jsPlumb&&(r.unregisterEndpoint(c),c.cleanup(!0),c.destroy(!0))}return t};var W=function(e,t,n){return function(){return function(e,t,n,r){for(var i=0,s=e.length;i<s;i++)e[i][t].apply(e[i],n);return r(e)}(e,t,arguments,n)}},K=function(e,t){return function(){return function(e,t,n){for(var r=[],i=0,s=e.length;i<s;i++)r.push([e[i][t].apply(e[i],n),e[i]]);return r}(e,t,arguments)}},X=function(e,t){var n=[];if(e)if("string"===typeof e){if("*"===e)return e;n.push(e)}else if(t)n=e;else if(e.length)for(var r=0,i=e.length;r<i;r++)n.push(h(e[r]).id);else n.push(h(e).id);return n},Y=function(e,t,n){return"*"===e||(e.length>0?-1!==e.indexOf(t):!n)};this.getConnections=function(e,t){e?e.constructor===String&&(e={scope:e}):e={};for(var n=e.scope||r.getDefaultScope(),i=X(n,!0),s=X(e.source),o=X(e.target),a=!t&&i.length>1?{}:[],l=function(e,n){if(!t&&i.length>1){var r=a[e];null==r&&(r=a[e]=[]),r.push(n)}else a.push(n)},u=0,c=y.length;u<c;u++){var h=y[u],d=h.proxies&&h.proxies[0]?h.proxies[0].originalEp.elementId:h.sourceId,f=h.proxies&&h.proxies[1]?h.proxies[1].originalEp.elementId:h.targetId;Y(i,h.scope)&&Y(s,d)&&Y(o,f)&&l(h.scope,h)}return a};var Q=function(e,t){return function(n){for(var r=0,i=e.length;r<i;r++)n(e[r]);return t(e)}},J=function(e){return function(t){return e[t]}},$=function(e,t){var n,r,i={length:e.length,each:Q(e,t),get:J(e)},s=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],o=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(n=0,r=s.length;n<r;n++)i[s[n]]=W(e,s[n],t);for(n=0,r=o.length;n<r;n++)i[o[n]]=K(e,o[n]);return i},Z=function(e){var t=$(e,Z);return d.extend(t,{setDetachable:W(e,"setDetachable",Z),setReattach:W(e,"setReattach",Z),setConnector:W(e,"setConnector",Z),delete:function(){for(var t=0,n=e.length;t<n;t++)r.deleteConnection(e[t])},isDetachable:K(e,"isDetachable"),isReattach:K(e,"isReattach")})},ee=function(e){var t=$(e,ee);return d.extend(t,{setEnabled:W(e,"setEnabled",ee),setAnchor:W(e,"setAnchor",ee),isEnabled:K(e,"isEnabled"),deleteEveryConnection:function(){for(var t=0,n=e.length;t<n;t++)e[t].deleteEveryConnection()},delete:function(){for(var t=0,n=e.length;t<n;t++)r.deleteEndpoint(e[t])}})};this.select=function(e){return(e=e||{}).scope=e.scope||"*",Z(e.connections||r.getConnections(e,!0))},this.selectEndpoints=function(e){(e=e||{}).scope=e.scope||"*";var t=!e.element&&!e.source&&!e.target,n=t?"*":X(e.element),r=t?"*":X(e.source),i=t?"*":X(e.target),s=X(e.scope,!0),o=[];for(var a in b){var l=Y(n,a,!0),u=Y(r,a,!0),c="*"!==r,h=Y(i,a,!0),d="*"!==i;if(l||u||h)e:for(var f=0,p=b[a].length;f<p;f++){var g=b[a][f];if(Y(s,g.scope,!0)){var m=c&&r.length>0&&!g.isSource,v=d&&i.length>0&&!g.isTarget;if(m||v)continue e;o.push(g)}}}return ee(o)},this.getAllConnections=function(){return y},this.getDefaultScope=function(){return T},this.getEndpoint=N,this.getEndpoints=function(e){return b[h(e).id]||[]},this.getDefaultEndpointType=function(){return d.Endpoint},this.getDefaultConnectionType=function(){return d.Connection},this.getId=V,this.draw=O,this.info=h,this.appendElement=A;var te=!1;this.isHoverSuspended=function(){return te},this.setHoverSuspended=function(e){te=e},this.hide=function(e,t){return U(e,"none",t),r},this.idstamp=D;var ne=function(e){if(!p&&e){var t=r.getElement(e);t.offsetParent&&r.setContainer(t.offsetParent)}},re=r.manage=function(e,t,n,i){return _[e]?i&&(_[e].info=ie({elId:e,timestamp:I,recalc:!0})):(_[e]={el:t,endpoints:[],connections:[],rotation:0},_[e].info=ie({elId:e,timestamp:I}),r.addClass(t,"jtk-managed"),n||r.fire("manageElement",{id:e,info:_[e].info,el:t})),_[e]};this.unmanage=function(e){if(_[e]){var t=_[e].el;r.removeClass(t,"jtk-managed"),delete _[e],r.fire("unmanageElement",{id:e,el:t})}},this.rotate=function(e,t,n){return _[e]&&(_[e].rotation=t,_[e].el.style.transform="rotate("+t+"deg)",_[e].el.style.transformOrigin="center center",!0!==n)?this.revalidate(e):{c:[],e:[]}},this.getRotation=function(e){return _[e]&&_[e].rotation||0};var ie=function(e){var t,n=e.timestamp,i=e.recalc,s=e.offset,o=e.elId;return k&&!n&&(n=I),!i&&n&&n===S[o]?{o:e.offset||E[o],s:P[o]}:(i||!s&&null==E[o]?null!=(t=_[o]?_[o].el:null)&&(P[o]=r.getSize(t),E[o]=r.getOffset(t),S[o]=n):(E[o]=s||E[o],null==P[o]&&null!=(t=_[o].el)&&(P[o]=r.getSize(t)),S[o]=n),E[o]&&!E[o].right&&(E[o].right=E[o].left+P[o][0],E[o].bottom=E[o].top+P[o][1],E[o].width=P[o][0],E[o].height=P[o][1],E[o].centerx=E[o].left+E[o].width/2,E[o].centery=E[o].top+E[o].height/2),{o:E[o],s:P[o]})};this.updateOffset=ie,this.init=function(){v||(r.Defaults.Container&&r.setContainer(r.Defaults.Container),r.router=new e.jsPlumb.DefaultRouter(r),r.anchorManager=r.router.anchorManager,v=!0,r.fire("ready",r))}.bind(this),this.log=m,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var t,i=function(t,n){if(e.jsPlumb.Anchors[t])return new e.jsPlumb.Anchors[t](n);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+t+"'"}};if(0===arguments.length)return null;var s=arguments[0],o=arguments[1],a=null;if(s.compute&&s.getOrientation)return s;if("string"===typeof s)a=i(arguments[0],{elementId:o,jsPlumbInstance:r});else if(n.isArray(s))if(n.isArray(s[0])||n.isString(s[0]))2===s.length&&n.isObject(s[1])?n.isString(s[0])?(t=e.jsPlumb.extend({elementId:o,jsPlumbInstance:r},s[1]),a=i(s[0],t)):(t=e.jsPlumb.extend({elementId:o,jsPlumbInstance:r,anchors:s[0]},s[1]),a=new e.jsPlumb.DynamicAnchor(t)):a=new d.DynamicAnchor({anchors:s,selector:null,elementId:o,jsPlumbInstance:r});else{var l={x:s[0],y:s[1],orientation:s.length>=4?[s[2],s[3]]:[0,0],offsets:s.length>=6?[s[4],s[5]]:[0,0],elementId:o,jsPlumbInstance:r,cssClass:7===s.length?s[6]:null};(a=new e.jsPlumb.Anchor(l)).clone=function(){return new e.jsPlumb.Anchor(l)}}return a.id||(a.id="anchor_"+D()),a},this.makeAnchors=function(t,i,s){for(var o=[],a=0,l=t.length;a<l;a++)"string"===typeof t[a]?o.push(e.jsPlumb.Anchors[t[a]]({elementId:i,jsPlumbInstance:s})):n.isArray(t[a])&&o.push(r.makeAnchor(t[a],i,s));return o},this.makeDynamicAnchor=function(t,n){return new e.jsPlumb.DynamicAnchor({anchors:t,selector:n,elementId:null,jsPlumbInstance:r})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var se=function(t,i,s,o,a){var u=new l(i),c=i._jsPlumb.EndpointDropHandler({jsPlumb:r,enabled:function(){return t.def.enabled},isFull:function(){var e=r.select({target:t.id}).length;return t.def.maxConnections>0&&e>=t.def.maxConnections},element:t.el,elementId:t.id,isSource:o,isTarget:a,addClass:function(e){r.addClass(t.el,e)},removeClass:function(e){r.removeClass(t.el,e)},onDrop:function(e){e.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return u.isDropAllowed.apply(u,arguments)},isRedrop:function(e){return null!=e.suspendedElement&&null!=e.suspendedEndpoint&&e.suspendedEndpoint.element===t.el},getEndpoint:function(n){var s=t.def.endpoint;if(null==s||null==s._jsPlumb){var o=r.deriveEndpointAndAnchorSpec(n.getType().join(" "),!0),a=o.endpoints?e.jsPlumb.extend(i,{endpoint:t.def.def.endpoint||o.endpoints[1]}):i;o.anchors&&(a=e.jsPlumb.extend(a,{anchor:t.def.def.anchor||o.anchors[1]})),(s=r.addEndpoint(t.el,a))._mtNew=!0}if(i.uniqueEndpoint&&(t.def.endpoint=s),s.setDeleteOnEmpty(!0),n.isDetachable()&&s.initDraggable(),null!=s.anchor.positionFinder){var l=r.getUIPosition(arguments,r.getZoom()),u=r.getOffset(t.el),c=r.getSize(t.el),h=null==l?[0,0]:s.anchor.positionFinder(l,u,c,s.anchor.constructorParams);s.anchor.x=h[0],s.anchor.y=h[1]}return s},maybeCleanup:function(e){e._mtNew&&0===e.connections.length?r.deleteObject({endpoint:e}):delete e._mtNew}}),h=e.jsPlumb.dragEvents.drop;return s.scope=s.scope||i.scope||r.Defaults.Scope,s[h]=n.wrap(s[h],c,!0),s.rank=i.rank||0,a&&(s[e.jsPlumb.dragEvents.over]=function(){return!0}),!1===i.allowLoopback&&(s.canDrop=function(e){return e.getDragElement()._jsPlumbRelatedElement!==t.el}),r.initDroppable(t.el,s,"internal"),c};this.makeTarget=function(t,n,i){var s=e.jsPlumb.extend({_jsPlumb:this},i);e.jsPlumb.extend(s,n);for(var o=s.maxConnections||-1,a=function(t){var n=h(t),i=n.id,a=e.jsPlumb.extend({},s.dropOptions||{}),l=s.connectionType||"default";this.targetEndpointDefinitions[i]=this.targetEndpointDefinitions[i]||{},ne(i),n.el._isJsPlumbGroup&&null==a.rank&&(a.rank=-1);var u={def:e.jsPlumb.extend({},s),uniqueEndpoint:s.uniqueEndpoint,maxConnections:o,enabled:!0};s.createEndpoint&&(u.uniqueEndpoint=!0,u.endpoint=r.addEndpoint(t,u.def),u.endpoint.setDeleteOnEmpty(!1)),n.def=u,this.targetEndpointDefinitions[i][l]=u,se(n,s,a,!0===s.isSource,!0),n.el._katavorioDrop[n.el._katavorioDrop.length-1].targetDef=u}.bind(this),l=t.length&&t.constructor!==String?t:[t],u=0,c=l.length;u<c;u++)a(l[u]);return this},this.unmakeTarget=function(e,t){var n=h(e);return r.destroyDroppable(n.el,"internal"),t||delete this.targetEndpointDefinitions[n.id],this},this.makeSource=function(t,i,s){var o=e.jsPlumb.extend({_jsPlumb:this},s);e.jsPlumb.extend(o,i);var a=o.connectionType||"default",l=r.deriveEndpointAndAnchorSpec(a);o.endpoint=o.endpoint||l.endpoints[0],o.anchor=o.anchor||l.anchors[0];for(var c=o.maxConnections||-1,d=o.onMaxConnections,f=function(i){var s=i.id,l=this.getElement(i.el);this.sourceEndpointDefinitions[s]=this.sourceEndpointDefinitions[s]||{},ne(s);var h={def:e.jsPlumb.extend({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:c,enabled:!0};o.createEndpoint&&(h.uniqueEndpoint=!0,h.endpoint=r.addEndpoint(t,h.def),h.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[s][a]=h,i.def=h;var f=e.jsPlumb.dragEvents.stop,p=e.jsPlumb.dragEvents.drag,g=e.jsPlumb.extend({},o.dragOptions||{}),m=g.drag,v=g.stop,y=null,b=!1;g.scope=g.scope||o.scope,g[p]=n.wrap(g[p],(function(){m&&m.apply(this,arguments),b=!1})),g[f]=n.wrap(g[f],function(){if(v&&v.apply(this,arguments),this.currentlyDragging=!1,null!=y._jsPlumb){var e=o.anchor||this.Defaults.Anchor,t=y.anchor,n=y.connections[0],i=this.makeAnchor(e,s,this),a=y.element;if(null!=i.positionFinder){var l=r.getOffset(a),u=this.getSize(a),c={left:l.left+t.x*u[0],top:l.top+t.y*u[1]},h=i.positionFinder(c,l,u,i.constructorParams);i.x=h[0],i.y=h[1]}y.setAnchor(i,!0),y.repaint(),this.repaint(y.elementId),null!=n&&this.repaint(n.targetId)}}.bind(this));var w=function(t){if(3!==t.which&&2!==t.button){s=this.getId(this.getElement(i.el));var h=this.sourceEndpointDefinitions[s][a];if(h.enabled){if(o.filter)if(!1===(n.isString(o.filter)?function(e,t,n,r,i){for(var s=e.target||e.srcElement,o=!1,a=r.getSelector(t,n),l=0;l<a.length;l++)if(a[l]===s){o=!0;break}return i?!o:o}(t,i.el,o.filter,this,o.filterExclude):o.filter(t,i.el)))return;var f=this.select({source:s}).length;if(h.maxConnections>=0&&f>=h.maxConnections)return d&&d({element:i.el,maxConnections:c},t),!1;var p=e.jsPlumb.getPositionOnElement(t,l,u),m={};e.jsPlumb.extend(m,h.def),m.isTemporarySource=!0,m.anchor=[p[0],p[1],0,0],m.dragOptions=g,h.def.scope&&(m.scope=h.def.scope),y=this.addEndpoint(s,m),b=!0,y.setDeleteOnEmpty(!0),h.uniqueEndpoint&&(h.endpoint?y.finalEndpoint=h.endpoint:(h.endpoint=y,y.setDeleteOnEmpty(!1)));var v=function(){r.off(y.canvas,"mouseup",v),r.off(i.el,"mouseup",v),b&&(b=!1,r.deleteEndpoint(y))};r.on(y.canvas,"mouseup",v),r.on(i.el,"mouseup",v);var w={};if(h.def.extract)for(var _ in h.def.extract){var E=(t.srcElement||t.target).getAttribute(_);E&&(w[h.def.extract[_]]=E)}r.trigger(y.canvas,"mousedown",t,w),n.consume(t)}}}.bind(this);this.on(i.el,"mousedown",w),h.trigger=w,o.filter&&(n.isString(o.filter)||n.isFunction(o.filter))&&r.setDragFilter(i.el,o.filter);var _=e.jsPlumb.extend({},o.dropOptions||{});se(i,o,_,!0,!0===o.isTarget)}.bind(this),p=t.length&&t.constructor!==String?t:[t],g=0,m=p.length;g<m;g++)f(h(p[g]));return this},this.unmakeSource=function(e,t,n){var i=h(e);r.destroyDroppable(i.el,"internal");var s=this.sourceEndpointDefinitions[i.id];if(s)for(var o in s)if(null==t||t===o){var a=s[o].trigger;a&&r.off(i.el,"mousedown",a),n||delete this.sourceEndpointDefinitions[i.id][o]}return this},this.unmakeEverySource=function(){for(var e in this.sourceEndpointDefinitions)r.unmakeSource(e,null,!0);return this.sourceEndpointDefinitions={},this};var oe=function(e,t,r){t=n.isArray(t)?t:[t];var i=V(e);r=r||"default";for(var s=0;s<t.length;s++){var o=this[t[s]][i];if(o&&o[r])return o[r].def.scope||this.Defaults.Scope}}.bind(this),ae=function(e,t,r,i){r=n.isArray(r)?r:[r];var s=V(e);i=i||"default";for(var o=0;o<r.length;o++){var a=this[r[o]][s];a&&a[i]&&(a[i].def.scope=t)}}.bind(this);this.getScope=function(e,t){return oe(e,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(e){return oe(e,"sourceEndpointDefinitions")},this.getTargetScope=function(e){return oe(e,"targetEndpointDefinitions")},this.setScope=function(e,t,n){this.setSourceScope(e,t,n),this.setTargetScope(e,t,n)},this.setSourceScope=function(e,t,n){ae(e,t,"sourceEndpointDefinitions",n),this.setDragScope(e,t)},this.setTargetScope=function(e,t,n){ae(e,t,"targetEndpointDefinitions",n),this.setDropScope(e,t)},this.unmakeEveryTarget=function(){for(var e in this.targetEndpointDefinitions)r.unmakeTarget(e,!0);return this.targetEndpointDefinitions={},this};var le=function(e,t,i,s,o){var a,l,u,c="source"===e?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(o=o||"default",t.length&&!n.isString(t)){a=[];for(var d=0,f=t.length;d<f;d++)c[(l=h(t[d])).id]&&c[l.id][o]&&(a[d]=c[l.id][o].enabled,u=s?!a[d]:i,c[l.id][o].enabled=u,r[u?"removeClass":"addClass"](l.el,"jtk-"+e+"-disabled"))}else{var p=(l=h(t)).id;c[p]&&c[p][o]&&(a=c[p][o].enabled,u=s?!a:i,c[p][o].enabled=u,r[u?"removeClass":"addClass"](l.el,"jtk-"+e+"-disabled"))}return a}.bind(this),ue=function(e,t){if(null!=e){if(n.isString(e)||!e.length)return t.apply(this,[e]);if(e.length)return t.apply(this,[e[0]])}}.bind(this);this.toggleSourceEnabled=function(e,t){return le("source",e,null,!0,t),this.isSourceEnabled(e,t)},this.setSourceEnabled=function(e,t,n){return le("source",e,t,null,n)},this.isSource=function(e,t){return t=t||"default",ue(e,function(e){var n=this.sourceEndpointDefinitions[h(e).id];return null!=n&&null!=n[t]}.bind(this))},this.isSourceEnabled=function(e,t){return t=t||"default",ue(e,function(e){var n=this.sourceEndpointDefinitions[h(e).id];return n&&n[t]&&!0===n[t].enabled}.bind(this))},this.toggleTargetEnabled=function(e,t){return le("target",e,null,!0,t),this.isTargetEnabled(e,t)},this.isTarget=function(e,t){return t=t||"default",ue(e,function(e){var n=this.targetEndpointDefinitions[h(e).id];return null!=n&&null!=n[t]}.bind(this))},this.isTargetEnabled=function(e,t){return t=t||"default",ue(e,function(e){var n=this.targetEndpointDefinitions[h(e).id];return n&&n[t]&&!0===n[t].enabled}.bind(this))},this.setTargetEnabled=function(e,t,n){return le("target",e,t,null,n)},this.ready=function(e){r.bind("ready",e)};this.repaint=function(e,t,n){return function(e,t){if("object"===typeof e&&e.length)for(var n=0,i=e.length;n<i;n++)t(e[n]);else t(e);return r}(e,(function(e){O(e,t,n)}))},this.revalidate=function(e,t,n){var i=n?e:r.getId(e);r.updateOffset({elId:i,recalc:!0,timestamp:t});var s=r.getDragManager();return s&&s.updateOffsets(i),O(e,null,t)},this.repaintEverything=function(){var e,t=jsPlumbUtil.uuid();for(e in b)r.updateOffset({elId:e,recalc:!0,timestamp:t});for(e in b)O(e,null,t);return this},this.removeAllEndpoints=function(e,t,n){n=n||[];var i=function(e){var s,o,a=h(e),l=b[a.id];if(l)for(n.push(a),s=0,o=l.length;s<o;s++)r.deleteEndpoint(l[s],!1);if(delete b[a.id],t&&a.el&&3!==a.el.nodeType&&8!==a.el.nodeType)for(s=0,o=a.el.childNodes.length;s<o;s++)i(a.el.childNodes[s])};return i(e),this};var ce=function(e,t){r.removeAllEndpoints(e.id,!0,t);for(var n=r.getDragManager(),i=function(e){n&&n.elementRemoved(e.id),r.router.elementRemoved(e.id),r.isSource(e.el)&&r.unmakeSource(e.el),r.isTarget(e.el)&&r.unmakeTarget(e.el),r.destroyDraggable(e.el),r.destroyDroppable(e.el),delete r.floatingConnections[e.id],delete _[e.id],delete E[e.id],e.el&&(r.removeElement(e.el),e.el._jsPlumb=null)},s=1;s<t.length;s++)i(t[s]);i(e)};this.remove=function(e,t){var n=h(e),i=[];return n.text&&n.el.parentNode?n.el.parentNode.removeChild(n.el):n.id&&r.batch((function(){ce(n,i)}),!0===t),r},this.empty=function(e,t){var n=[],i=function(e,t){var r=h(e);if(r.text)r.el.parentNode.removeChild(r.el);else if(r.el){for(;r.el.childNodes.length>0;)i(r.el.childNodes[0]);t||ce(r,n)}};return r.batch((function(){i(e,!0)}),!1===t),r},this.reset=function(e){r.silently(function(){te=!1,r.removeAllGroups(),r.removeGroupManager(),r.deleteEveryEndpoint(),e||r.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},y.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),p=null,g=null};var he=function(e){e.canvas&&e.canvas.parentNode&&e.canvas.parentNode.removeChild(e.canvas),e.cleanup(),e.destroy()};this.clear=function(){r.select().each(he),r.selectEndpoints().each(he),b={},w={}},this.setDefaultScope=function(e){return T=e,r},this.deriveEndpointAndAnchorSpec=function(e,t){for(var n=((t?"":"default ")+e).split(/[\s]/),i=null,s=null,o=null,a=null,l=0;l<n.length;l++){var u=r.getType(n[l],"connection");u&&(u.endpoints&&(i=u.endpoints),u.endpoint&&(s=u.endpoint),u.anchors&&(a=u.anchors),u.anchor&&(o=u.anchor))}return{endpoints:i||[s,s],anchors:a||[o,o]}},this.setId=function(e,t,r){var i;n.isString(e)?i=e:(e=this.getElement(e),i=this.getId(e));var s=this.getConnections({source:i,scope:"*"},!0),o=this.getConnections({target:i,scope:"*"},!0);t=""+t,r?e=this.getElement(t):(e=this.getElement(i),this.setAttribute(e,"id",t)),b[t]=b[i]||[];for(var a=0,l=b[t].length;a<l;a++)b[t][a].setElementId(t),b[t][a].setReferenceElement(e);delete b[i],this.sourceEndpointDefinitions[t]=this.sourceEndpointDefinitions[i],delete this.sourceEndpointDefinitions[i],this.targetEndpointDefinitions[t]=this.targetEndpointDefinitions[i],delete this.targetEndpointDefinitions[i],this.router.changeId(i,t);var u=this.getDragManager();u&&u.changeId(i,t),_[t]=_[i],delete _[i];var c=function(n,r,i){for(var s=0,o=n.length;s<o;s++)n[s].endpoints[r].setElementId(t),n[s].endpoints[r].setReferenceElement(e),n[s][i+"Id"]=t,n[s][i]=e};c(s,0,"source"),c(o,1,"target"),this.repaint(t)},this.setDebugLog=function(e){m=e},this.setSuspendDrawing=function(e,t){var n=k;return k=e,I=e?(new Date).getTime():null,t&&this.repaintEverything(),n},this.isSuspendDrawing=function(){return k},this.getSuspendedAt=function(){return I},this.batch=function(e,t){var r=this.isSuspendDrawing();r||this.setSuspendDrawing(!0);try{e()}catch(i){n.log("Function run while suspended failed",i)}r||this.setSuspendDrawing(!1,!t)},this.doWhileSuspended=this.batch,this.getCachedData=function(e){var t=E[e];return t?{o:t,s:P[e]}:ie({elId:e})},this.show=function(e,t){return U(e,"block",t),r},this.toggleVisible=function(e,t){var n=null;t&&(n=function(e){var t=e.isVisible();e.setVisible(!t)}),F(e,(function(e){var t=e.isVisible();e.setVisible(!t)}),n)},this.addListener=this.bind;var de=[];this.registerFloatingConnection=function(e,t,r){de[e.id]=t,n.addToList(b,e.id,r)},this.getFloatingConnectionFor=function(e){return de[e]},this.listManager=new e.jsPlumbListManager(this,this.Defaults.ListStyle)};n.extend(e.jsPlumbInstance,n.EventGenerator,{setAttribute:function(e,t,n){this.setAttribute(e,t,n)},getAttribute:function(t,n){return this.getAttribute(e.jsPlumb.getElement(t),n)},convertToFullOverlaySpec:function(e){return n.isString(e)&&(e=[e,{}]),e[1].id=e[1].id||n.uuid(),e},registerConnectionType:function(t,n){if(this._connectionTypes[t]=e.jsPlumb.extend({},n),n.overlays){for(var r={},i=0;i<n.overlays.length;i++){var s=this.convertToFullOverlaySpec(n.overlays[i]);r[s[1].id]=s}this._connectionTypes[t].overlays=r}},registerConnectionTypes:function(e){for(var t in e)this.registerConnectionType(t,e[t])},registerEndpointType:function(t,n){if(this._endpointTypes[t]=e.jsPlumb.extend({},n),n.overlays){for(var r={},i=0;i<n.overlays.length;i++){var s=this.convertToFullOverlaySpec(n.overlays[i]);r[s[1].id]=s}this._endpointTypes[t].overlays=r}},registerEndpointTypes:function(e){for(var t in e)this.registerEndpointType(t,e[t])},getType:function(e,t){return"connection"===t?this._connectionTypes[e]:this._endpointTypes[e]},setIdChanged:function(e,t){this.setId(e,t,!0)},setParent:function(e,t){var n=this.getElement(e),r=this.getId(n),i=this.getElement(t),s=this.getId(i),o=this.getDragManager();n.parentNode.removeChild(n),i.appendChild(n),o&&o.setParent(n,r,i,s)},extend:function(e,t,n){var r;if(n)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]];else for(r in t)e[r]=t[r];return e},floatingConnections:{},getFloatingAnchorIndex:function(e){return e.endpoints[0].isFloating()?0:e.endpoints[1].isFloating()?1:-1},proxyConnection:function(e,t,n,r,i,s){var o,a=e.endpoints[t].elementId,l=e.endpoints[t];e.proxies=e.proxies||[],(o=e.proxies[t]?e.proxies[t].ep:this.addEndpoint(n,{endpoint:i(e,t),anchor:s(e,t),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),e.proxies[t]={ep:o,originalEp:l},0===t?this.router.sourceOrTargetChanged(a,r,e,n,0):this.router.sourceOrTargetChanged(a,r,e,n,1),l.detachFromConnection(e,null,!0),o.connections=[e],e.endpoints[t]=o,l.setVisible(!1),e.setVisible(!0),this.revalidate(n)},unproxyConnection:function(e,t,n){if(null!=e._jsPlumb&&null!=e.proxies&&null!=e.proxies[t]){var r=e.proxies[t].originalEp.element,i=e.proxies[t].originalEp.elementId;e.endpoints[t]=e.proxies[t].originalEp,0===t?this.router.sourceOrTargetChanged(n,i,e,r,0):this.router.sourceOrTargetChanged(n,i,e,r,1),e.proxies[t].ep.detachFromConnection(e,null),e.proxies[t].originalEp.addConnection(e),e.isVisible()&&e.proxies[t].originalEp.setVisible(!0),delete e.proxies[t]}}});var d=new h;e.jsPlumb=d,d.getInstance=function(e,t){var n=new h(e);if(t)for(var r in t)n[r]=t[r];return n.init(),n},d.each=function(e,t){if(null!=e)if("string"===typeof e)t(d.getElement(e));else if(null!=e.length)for(var n=0;n<e.length;n++)t(d.getElement(e[n]));else t(e)},t.jsPlumb=d}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,r="__label";t.OverlayCapableJsPlumbUIComponent=function(t){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},t.label&&(this.getDefaultType().overlays[r]=["Label",{label:t.label,location:t.labelLocation||this.defaultLabelLocation||.5,labelStyle:t.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:r}]),this.setListenerComponent=function(e){if(this._jsPlumb)for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].setListenerComponent(e)}},t.OverlayCapableJsPlumbUIComponent.applyType=function(e,t){if(t.overlays){var n,r={};for(n in t.overlays){var i=e._jsPlumb.overlays[t.overlays[n][1].id];if(i)i.updateFrom(t.overlays[n][1]),r[t.overlays[n][1].id]=!0,i.reattach(e._jsPlumb.instance,e);else{var s=e.getCachedTypeItem("overlay",t.overlays[n][1].id);null!=s?(s.reattach(e._jsPlumb.instance,e),s.setVisible(!0),s.updateFrom(t.overlays[n][1]),e._jsPlumb.overlays[s.id]=s):s=e.addOverlay(t.overlays[n],!0),r[s.id]=!0}}for(n in e._jsPlumb.overlays)null==r[e._jsPlumb.overlays[n].id]&&e.removeOverlay(e._jsPlumb.overlays[n].id,!0)}},n.extend(t.OverlayCapableJsPlumbUIComponent,e.jsPlumbUIComponent,{setHover:function(e,t){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][e?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(e,r){var i=function(e,r){var i=null;if(n.isArray(r)){var s=r[0],o=t.extend({component:e,_jsPlumb:e._jsPlumb.instance},r[1]);3===r.length&&t.extend(o,r[2]),i=new(t.Overlays[e._jsPlumb.instance.getRenderMode()][s])(o)}else i=r.constructor===String?new(t.Overlays[e._jsPlumb.instance.getRenderMode()][r])({component:e,_jsPlumb:e._jsPlumb.instance}):r;return i.id=i.id||n.uuid(),e.cacheTypeItem("overlay",i,i.id),e._jsPlumb.overlays[i.id]=i,i}(this,e);if(this.getData&&"Label"===i.type&&n.isArray(e)){var s=this.getData(),o=e[1];if(s){var a=o.labelLocationAttribute||"labelLocation",l=s?s[a]:null;l&&(i.loc=l)}}return r||this.repaint(),i},getOverlay:function(e){return this._jsPlumb.overlays[e]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(e){var t=this.getOverlay(e);t&&t.hide()},hideOverlays:function(){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].hide()},showOverlay:function(e){var t=this.getOverlay(e);t&&t.show()},showOverlays:function(){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].show()},removeAllOverlays:function(e){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup&&this._jsPlumb.overlays[t].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},e||this.repaint()},removeOverlay:function(e,t){var n=this._jsPlumb.overlays[e];n&&(n.setVisible(!1),!t&&n.cleanup&&n.cleanup(),delete this._jsPlumb.overlays[e],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[e],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[e])},removeOverlays:function(){for(var e=0,t=arguments.length;e<t;e++)this.removeOverlay(arguments[e])},moveParent:function(e){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),e.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var t in this.canvas.parentNode.removeChild(this.canvas),e.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[t].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[t].getElement();n.parentNode.removeChild(n),e.appendChild(n)}},getLabel:function(){var e=this.getOverlay(r);return null!=e?e.getLabel():null},getLabelOverlay:function(){return this.getOverlay(r)},setLabel:function(e){var n=this.getOverlay(r);n?e.constructor===String||e.constructor===Function?n.setLabel(e):(e.label&&n.setLabel(e.label),e.location&&n.setLocation(e.location)):(n=function(e,n){var i={cssClass:n.cssClass,labelStyle:e.labelStyle,id:r,component:e,_jsPlumb:e._jsPlumb.instance},s=t.extend(i,n);return new(t.Overlays[e._jsPlumb.instance.getRenderMode()].Label)(s)}(this,e.constructor===String||e.constructor===Function?{label:e}:e),this._jsPlumb.overlays[r]=n);this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(e){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].cleanup(e),this._jsPlumb.overlays[t].destroy(e);e&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(e){this[e?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(e,t){this._jsPlumb.overlayPositions[e.id]=t},getAbsoluteOverlayPosition:function(e){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[e.id]:null},_clazzManip:function(e,t,n){if(!n)for(var r in this._jsPlumb.overlays)this._jsPlumb.overlays[r][e+"Class"](t)},addClass:function(e,t){this._clazzManip("add",e,t)},removeClass:function(e,t){this._clazzManip("remove",e,t)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,r=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];t.Endpoint=function(e){var i=e._jsPlumb,s=e.newConnection,o=e.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:e.connectionType,maxConnections:null==e.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:e.maxConnections,paintStyle:e.endpointStyle||e.paintStyle||e.style||this._jsPlumb.instance.Defaults.EndpointStyle||t.Defaults.EndpointStyle,hoverPaintStyle:e.endpointHoverStyle||e.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle,connectorStyle:e.connectorStyle,connectorHoverStyle:e.connectorHoverStyle,connectorClass:e.connectorClass,connectorHoverClass:e.connectorHoverClass,connectorOverlays:e.connectorOverlays,connector:e.connector,connectorTooltip:e.connectorTooltip}),this._jsPlumb.enabled=!(!1===e.enabled),this._jsPlumb.visible=!0,this.element=t.getElement(e.source),this._jsPlumb.uuid=e.uuid,this._jsPlumb.floatingEndpoint=null;this._jsPlumb.uuid&&(e.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=e.elementId,this.dragProxy=e.dragProxy,this._jsPlumb.connectionCost=e.connectionCost,this._jsPlumb.connectionsDirected=e.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var a=!0===e.deleteOnEmpty;this.setDeleteOnEmpty=function(e){a=e};var l=function(){var e=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var n=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(e),this.addClass(n),t.updateClasses(this.element,n,e)}.bind(this);this.prepareAnchor=function(e){var t=this._jsPlumb.instance.makeAnchor(e,this.elementId,i);return t.bind("anchorChanged",function(e){this.fire("anchorChanged",{endpoint:this,anchor:e}),l()}.bind(this)),t},this.setPreparedAnchor=function(e,t){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=e,l(),t||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(e,t){var n=this.prepareAnchor(e);return this.setPreparedAnchor(n,t),this};var u=function(e){if(this.connections.length>0)for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(e,!1);else this.setHover(e)}.bind(this);this.bind("mouseover",(function(){u(!0)})),this.bind("mouseout",(function(){u(!1)})),e._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(r,s){var o,a=function(e,n){var r=i.getRenderMode();if(t.Endpoints[r][e])return new t.Endpoints[r][e](n);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+e+"'"}},l={_jsPlumb:this._jsPlumb.instance,cssClass:e.cssClass,container:e.container,tooltip:e.tooltip,connectorTooltip:e.connectorTooltip,endpoint:this};return n.isString(r)?o=a(r,l):n.isArray(r)?(l=n.merge(r[1],l),o=a(r[0],l)):o=r.clone(),o.clone=function(){return n.isString(r)?a(r,l):n.isArray(r)?(l=n.merge(r[1],l),a(r[0],l)):void 0}.bind(this),o.typeId=s,o},this.setEndpoint=function(e,t){var n=this.prepareEndpoint(e);this.setPreparedEndpoint(n,!0)},this.setPreparedEndpoint=function(e,t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=e,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},t.extend(this,e,r),this.isSource=e.isSource||!1,this.isTemporarySource=e.isTemporarySource||!1,this.isTarget=e.isTarget||!1,this.connections=e.connections||[],this.connectorPointerEvents=e["connector-pointer-events"],this.scope=e.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=e.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,!1!==e.connectionsDetachable&&!1!==e.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==e.dragAllowedWhenFull,e.onMaxConnections&&this.bind("maxConnections",e.onMaxConnections),this.addConnection=function(e){this.connections.push(e),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(e,t,n){(t=null==t?this.connections.indexOf(e):t)>=0&&(this.connections.splice(t,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!n&&a&&0===this.connections.length&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==n})},this.deleteEveryConnection=function(e){for(var t=this.connections.length,n=0;n<t;n++)i.deleteConnection(this.connections[0],e)},this.detachFrom=function(e,t,n){for(var r=[],s=0;s<this.connections.length;s++)this.connections[s].endpoints[1]!==e&&this.connections[s].endpoints[0]!==e||r.push(this.connections[s]);for(var o=0,a=r.length;o<a;o++)i.deleteConnection(r[0]);return this},this.getElement=function(){return this.element},this.setElement=function(r){var s=this._jsPlumb.instance.getId(r),o=this.elementId;return n.removeWithFunction(e.endpointsByElement[this.elementId],function(e){return e.id===this.id}.bind(this)),this.element=t.getElement(r),this.elementId=i.getId(this.element),i.router.rehomeEndpoint(this,o,this.element),i.dragManager.endpointAdded(this.element),n.addToList(e.endpointsByElement,s,this),this},this.makeInPlaceCopy=function(){var t=this.anchor.getCurrentLocation({element:this}),n=this.anchor.getOrientation(this),r=this.anchor.getCssClass(),i={bind:function(){},compute:function(){return[t[0],t[1]]},getCurrentLocation:function(){return[t[0],t[1]]},getOrientation:function(){return n},getCssClass:function(){return r}};return o({dropOptions:e.dropOptions,anchor:i,source:this.element,paintStyle:this.getPaintStyle(),endpoint:e.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(e){var t=(e=e||{}).timestamp,n=!(!1===e.recalc);if(!t||this.timestamp!==t){var r=i.updateOffset({elId:this.elementId,timestamp:t}),s=e.offset?e.offset.o:r.o;if(null!=s){var o=e.anchorPoint,a=e.connectorPaintStyle;if(null==o){var l=e.dimensions||r.s,u={xy:[s.left,s.top],wh:l,element:this,timestamp:t};if(n&&this.anchor.isDynamic&&this.connections.length>0){var c=function(e,t){var n=0;if(null!=t)for(var r=0;r<e.connections.length;r++)if(e.connections[r].sourceId===t||e.connections[r].targetId===t){n=r;break}return e.connections[n]}(this,e.elementWithPrecedence),h=c.endpoints[0]===this?1:0,d=0===h?c.sourceId:c.targetId,f=i.getCachedData(d),p=f.o,g=f.s;u.index=0===h?1:0,u.connection=c,u.txy=[p.left,p.top],u.twh=g,u.tElement=c.endpoints[h],u.tRotation=i.getRotation(d)}else this.connections.length>0&&(u.connection=this.connections[0]);u.rotation=i.getRotation(this.elementId),o=this.anchor.compute(u)}for(var m in this.endpoint.compute(o,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,a||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=t,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var v=this._jsPlumb.overlays[m];v.isVisible()&&(this._jsPlumb.overlayPlacements[m]=v.draw(this.endpoint,this._jsPlumb.paintStyleInUse),v.paint(this._jsPlumb.overlayPlacements[m]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var c=!1;this.initDraggable=function(){if(!c&&t.isDragSupported(this.element)){var r,a={id:null,element:null},l=null,u=!1,h=null,d=function(e,t,n){var r=!1;return{drag:function(){if(r)return r=!1,!0;if(t.element){var i=n.getUIPosition(arguments,n.getZoom());null!=i&&n.setPosition(t.element,i),n.repaint(t.element,i),e.paint({anchorPoint:e.anchor.getCurrentLocation({element:e})})}},stopDrag:function(){r=!0}}}(this,a,i),f=e.dragOptions||{},p=t.dragEvents.start,g=t.dragEvents.stop,m=t.dragEvents.drag,v=t.dragEvents.beforeStart,y=function(n){l=this.connectorSelector();var c=!0;this.isEnabled()||(c=!1),null!=l||this.isSource||this.isTemporarySource||(c=!1),!this.isSource||!this.isFull()||null!=l&&this.dragAllowedWhenFull||(c=!1),null==l||l.isDetachable(this)||(this.isFull()?c=!1:l=null);var f=i.checkCondition(null==l?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:l});if(!1===f?c=!1:"object"===typeof f?t.extend(f,r||{}):f=r||{},!1===c)return i.stopDrag&&i.stopDrag(this.canvas),d.stopDrag(),!1;for(var p=0;p<this.connections.length;p++)this.connections[p].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),l&&!this.isFull()&&this.isSource&&(l=null),i.updateOffset({elId:this.elementId});var g=this._jsPlumb.instance.getOffset(this.canvas),m=this.canvas,v=this._jsPlumb.instance.getSize(this.canvas);!function(e,t,n,r){var i=t.createElement("div",{position:"absolute"});t.appendElement(i);var s=t.getId(i);t.setPosition(i,n),i.style.width=r[0]+"px",i.style.height=r[1]+"px",t.manage(s,i,!0),e.id=s,e.element=i}(a,i,g,v),i.setAttributes(this.canvas,{dragId:a.id,elId:this.elementId});var y=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var b=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);b.endpoints[1]&&(y=b.endpoints[1])}var w=this._jsPlumb.instance.makeAnchor("Center");w.isFloating=!0,this._jsPlumb.floatingEndpoint=function(e,n,r,i,s,o,a,l){return a({paintStyle:e,endpoint:r,anchor:new t.FloatingAnchor({reference:n,referenceCanvas:i,jsPlumbInstance:o}),source:s,scope:l})}(this.getPaintStyle(),w,y,this.canvas,a.element,i,o,this.scope);var _=this._jsPlumb.floatingEndpoint.anchor;if(null==l)this.setHover(!1,!1),(l=s({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:a.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:e.connectorStyle,hoverPaintStyle:e.connectorHoverStyle,connector:e.connector,overlays:e.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:e.scope,data:f})).pending=!0,l.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=_,i.fire("connectionDrag",l),i.router.newConnection(l);else{u=!0,l.setHover(!1);var E=l.endpoints[0].id===this.id?0:1;this.detachFromConnection(l,null,!0);var S=i.getDragScope(m);i.setAttribute(this.canvas,"originalScope",S),i.fire("connectionDrag",l),0===E?(h=[l.source,l.sourceId,m,S],i.router.sourceOrTargetChanged(l.endpoints[E].elementId,a.id,l,a.element,0)):(h=[l.target,l.targetId,m,S],i.router.sourceOrTargetChanged(l.endpoints[E].elementId,a.id,l,a.element,1)),l.suspendedEndpoint=l.endpoints[E],l.suspendedElement=l.endpoints[E].getElement(),l.suspendedElementId=l.endpoints[E].elementId,l.suspendedElementType=0===E?"source":"target",l.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=l.suspendedEndpoint,l.endpoints[E]=this._jsPlumb.floatingEndpoint,l.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(a,l,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),b=function(){if(i.setConnectionBeingDragged(!1),l&&null!=l.endpoints){var e=i.getDropEvent(arguments),t=i.getFloatingAnchorIndex(l);if(l.endpoints[0===t?1:0].anchor.locked=!1,l.removeClass(i.draggingClass),this._jsPlumb&&(l.deleteConnectionNow||l.endpoints[t]===this._jsPlumb.floatingEndpoint)&&u&&l.suspendedEndpoint){0===t?(l.floatingElement=l.source,l.floatingId=l.sourceId,l.floatingEndpoint=l.endpoints[0],l.floatingIndex=0,l.source=h[0],l.sourceId=h[1]):(l.floatingElement=l.target,l.floatingId=l.targetId,l.floatingEndpoint=l.endpoints[1],l.floatingIndex=1,l.target=h[0],l.targetId=h[1]);var n=this._jsPlumb.floatingEndpoint;i.setDragScope(h[2],h[3]),l.endpoints[t]=l.suspendedEndpoint,l.isReattach()||l._forceReattach||l._forceDetach||!i.deleteConnection(l,{originalEvent:e})?(l.setHover(!1),l._forceDetach=null,l._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(l),l.suspendedEndpoint.addConnection(l),1===t?i.router.sourceOrTargetChanged(l.floatingId,l.targetId,l,l.target,t):i.router.sourceOrTargetChanged(l.floatingId,l.sourceId,l,l.source,t),i.repaint(h[1])):i.deleteObject({endpoint:n})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",l,e),l.pending&&i.fire("connectionAborted",l,e),i.currentlyDragging=!1,l.suspendedElement=null,l.suspendedEndpoint=null,l=null}a&&a.element&&i.remove(a.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);(f=t.extend({},f)).scope=this.scope||f.scope,f[v]=n.wrap(f[v],(function(e){r=e.e.payload||{}}),!1),f[p]=n.wrap(f[p],y,!1),f[m]=n.wrap(f[m],d.drag),f[g]=n.wrap(f[g],b),f.multipleDrop=!1,f.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}.bind(this),i.initDraggable(this.canvas,f,"internal"),this.canvas._jsPlumbRelatedElement=this.element,c=!0}};var h=e.endpoint||this._jsPlumb.instance.Defaults.Endpoint||t.Defaults.Endpoint;this.setEndpoint(h,!0);var d=e.anchor?e.anchor:e.anchors?e.anchors:i.Defaults.Anchor||"Top";this.setAnchor(d,!0);var f=["default",e.type||""].join(" ");this.addType(f,e.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var p=function(r,s,o,a){if(t.isDropSupported(this.element)){var l=e.dropOptions||i.Defaults.DropOptions||t.Defaults.DropOptions;(l=t.extend({},l)).scope=l.scope||this.scope;var u=t.dragEvents.drop,c=t.dragEvents.over,h=t.dragEvents.out,d=this,f=i.EndpointDropHandler({getEndpoint:function(){return d},jsPlumb:i,enabled:function(){return null==o||o.isEnabled()},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(e){d.addClass(e)},removeClass:function(e){d.removeClass(e)},isDropAllowed:function(){return d.isDropAllowed.apply(d,arguments)},reference:a,isRedrop:function(e,t){return e.suspendedEndpoint&&t.reference&&e.suspendedEndpoint.id===t.reference.id}});l[u]=n.wrap(l[u],f,!0),l[c]=n.wrap(l[c],function(){var e=t.getDragObject(arguments),n=i.getAttribute(t.getElement(e),"dragId"),r=i.getFloatingConnectionFor(n);if(null!=r){var s=i.getFloatingAnchorIndex(r);if(this.isTarget&&0!==s||r.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===r.suspendedEndpoint.id){var o=i.checkCondition("checkDropAllowed",{sourceEndpoint:r.endpoints[s],targetEndpoint:this,connection:r});this[(o?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(o?"remove":"add")+"Class"](i.endpointDropForbiddenClass),r.endpoints[s].anchor.over(this.anchor,this)}}}.bind(this)),l[h]=n.wrap(l[h],function(){var e=t.getDragObject(arguments),n=null==e?null:i.getAttribute(t.getElement(e),"dragId"),r=n?i.getFloatingConnectionFor(n):null;if(null!=r){var s=i.getFloatingAnchorIndex(r);(this.isTarget&&0!==s||r.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===r.suspendedEndpoint.id)&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),r.endpoints[s].anchor.out())}}.bind(this)),i.initDroppable(r,l,"internal",s)}}.bind(this);return this.anchor.isFloating||p(this.canvas,!(e._transient||this.anchor.isFloating),this,e.reference),this},n.extend(t.Endpoint,t.OverlayCapableJsPlumbUIComponent,{setVisible:function(e,t,n){if(this._jsPlumb.visible=e,this.canvas&&(this.canvas.style.display=e?"block":"none"),this[e?"showOverlays":"hideOverlays"](),!t)for(var r=0;r<this.connections.length;r++)if(this.connections[r].setVisible(e),!n){var i=this===this.connections[r].endpoints[0]?1:0;1===this.connections[r].endpoints[i].connections.length&&this.connections[r].endpoints[i].setVisible(e,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(e,n){this.setPaintStyle(e.endpointStyle||e.paintStyle,n),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle,n),null!=e.maxConnections&&(this._jsPlumb.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),t.extend(this,e,r),null!=e.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,e.cssClass),t.OverlayCapableJsPlumbUIComponent.applyType(this,e)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(e){this._jsPlumb.enabled=e},cleanup:function(){var e=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");t.removeClass(this.element,e),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(e){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(e)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(e){var t=!1;if(e)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]===e||this.connections[n].endpoints[0]===e){t=!0;break}return t},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(e){this._jsPlumb.connectionCost=e},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(e){this._jsPlumb.connectionsDirected=e},setElementId:function(e){this.elementId=e,this.anchor.elementId=e},setReferenceElement:function(e){this.element=t.getElement(e)},setDragAllowedWhenFull:function(e){this.dragAllowedWhenFull=e},equals:function(e){return this.anchor.equals(e.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(e){return this.anchor.compute(e)}}),e.jsPlumbInstance.prototype.EndpointDropHandler=function(e){return function(t){var r=e.jsPlumb;e.removeClass(r.endpointDropAllowedClass),e.removeClass(r.endpointDropForbiddenClass);var i=r.getDropEvent(arguments),s=r.getDragObject(arguments),o=r.getAttribute(s,"dragId"),a=(r.getAttribute(s,"elId"),r.getAttribute(s,"originalScope")),l=r.getFloatingConnectionFor(o);if(null!=l){var u=null!=l.suspendedEndpoint;if(!u||null!=l.suspendedEndpoint._jsPlumb){var c=e.getEndpoint(l);if(null!=c){if(e.isRedrop(l,e))return l._forceReattach=!0,l.setHover(!1),void(e.maybeCleanup&&e.maybeCleanup(c));var h=r.getFloatingAnchorIndex(l);if(0===h&&!e.isSource||1===h&&!e.isTarget)e.maybeCleanup&&e.maybeCleanup(c);else{e.onDrop&&e.onDrop(l),a&&r.setDragScope(s,a);var d=e.isFull(t);if(d&&c.fire("maxConnections",{endpoint:this,connection:l,maxConnections:c._jsPlumb.maxConnections},i),!d&&e.enabled()){var f=!0;0===h?(l.floatingElement=l.source,l.floatingId=l.sourceId,l.floatingEndpoint=l.endpoints[0],l.floatingIndex=0,l.source=e.element,l.sourceId=r.getId(e.element)):(l.floatingElement=l.target,l.floatingId=l.targetId,l.floatingEndpoint=l.endpoints[1],l.floatingIndex=1,l.target=e.element,l.targetId=r.getId(e.element)),u&&l.suspendedEndpoint.id!==c.id&&(l.isDetachAllowed(l)&&l.endpoints[h].isDetachAllowed(l)&&l.suspendedEndpoint.isDetachAllowed(l)&&r.checkCondition("beforeDetach",l)||(f=!1));var p=function(t){l.endpoints[h].detachFromConnection(l),l.suspendedEndpoint&&l.suspendedEndpoint.detachFromConnection(l),l.endpoints[h]=c,c.addConnection(l);var s=c.getParameters();for(var o in s)l.setParameter(o,s[o]);if(u){var a=l.suspendedEndpoint.elementId;r.fireMoveEvent({index:h,originalSourceId:0===h?a:l.sourceId,newSourceId:0===h?c.elementId:l.sourceId,originalTargetId:1===h?a:l.targetId,newTargetId:1===h?c.elementId:l.targetId,originalSourceEndpoint:0===h?l.suspendedEndpoint:l.endpoints[0],newSourceEndpoint:0===h?c:l.endpoints[0],originalTargetEndpoint:1===h?l.suspendedEndpoint:l.endpoints[1],newTargetEndpoint:1===h?c:l.endpoints[1],connection:l},i)}else s.draggable&&r.initDraggable(this.element,e.dragOptions,"internal",r);(1===h?r.router.sourceOrTargetChanged(l.floatingId,l.targetId,l,l.target,1):r.router.sourceOrTargetChanged(l.floatingId,l.sourceId,l,l.source,0),l.endpoints[0].finalEndpoint)&&(l.endpoints[0].detachFromConnection(l),l.endpoints[0]=l.endpoints[0].finalEndpoint,l.endpoints[0].addConnection(l));n.isObject(t)&&l.mergeData(t),r.finaliseConnection(l,null,i,!1),l.setHover(!1),r.revalidate(l.endpoints[0].element)}.bind(this);if(f=f&&e.isDropAllowed(l.sourceId,l.targetId,l.scope,l,c))return p(f),!0;l.suspendedEndpoint&&(l.endpoints[h]=l.suspendedEndpoint,l.setHover(!1),l._forceDetach=!0,0===h?(l.source=l.suspendedEndpoint.element,l.sourceId=l.suspendedEndpoint.elementId):(l.target=l.suspendedEndpoint.element,l.targetId=l.suspendedEndpoint.elementId),l.suspendedEndpoint.addConnection(l),1===h?r.router.sourceOrTargetChanged(l.floatingId,l.targetId,l,l.target,1):r.router.sourceOrTargetChanged(l.floatingId,l.sourceId,l,l.source,0),r.repaint(l.sourceId),l._forceDetach=!1)}e.maybeCleanup&&e.maybeCleanup(c),r.currentlyDragging=!1}}}}}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,r=function(e,r,i,s,o){if(t.Connectors[r]=t.Connectors[r]||{},null==t.Connectors[r][i]){if(null==t.Connectors[i]){if(e.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+i+"'")}t.Connectors[r][i]=function(){t.Connectors[i].apply(this,arguments),t.ConnectorRenderers[r].apply(this,arguments)},n.extend(t.Connectors[r][i],[t.Connectors[i],t.ConnectorRenderers[r]])}return new t.Connectors[r][i](s,o)},i=function(e,t,n){return e?n.makeAnchor(e,t,n):null},s=function(e,t,r,i){null!=t&&(t._jsPlumbConnections=t._jsPlumbConnections||{},i?delete t._jsPlumbConnections[e.id]:t._jsPlumbConnections[e.id]=!0,n.isEmpty(t._jsPlumbConnections)?r.removeClass(t,r.connectedClass):r.addClass(t,r.connectedClass))};t.Connection=function(e){var r=e.newEndpoint;this.id=e.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=e.previousConnection,this.source=t.getElement(e.source),this.target=t.getElement(e.target),t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),e.sourceEndpoint?(this.source=e.sourceEndpoint.getElement(),this.sourceId=e.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),e.targetEndpoint?(this.target=e.targetEndpoint.getElement(),this.targetId=e.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=e.scope,this.endpoints=[],this.endpointStyles=[];var i=this._jsPlumb.instance;i.manage(this.sourceId,this.source),i.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:e.cssClass,container:e.container,"pointer-events":e["pointer-events"],editorParams:e.editorParams,overlays:e.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(t,n,s,o,a){return s=s||this._jsPlumb.instance.getId(n),this.prepareEndpoint(i,r,this,o,t?0:1,e,n,s,a)},e.type&&(e.endpoints=e.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(e.type).endpoints);var s=this.makeEndpoint(!0,this.source,this.sourceId,e.sourceEndpoint),o=this.makeEndpoint(!1,this.target,this.targetId,e.targetEndpoint);s&&n.addToList(e.endpointsByElement,this.sourceId,s),o&&n.addToList(e.endpointsByElement,this.targetId,o),this.scope||(this.scope=this.endpoints[0].scope),null!=e.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(e.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(e.deleteEndpointsOnEmpty));var a=i.Defaults.ConnectionsDetachable;!1===e.detachable&&(a=!1),!1===this.endpoints[0].connectionsDetachable&&(a=!1),!1===this.endpoints[1].connectionsDetachable&&(a=!1);var l=e.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||i.Defaults.ReattachConnections;this.appendToDefaultType({detachable:a,reattach:l,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||e.paintStyle||i.Defaults.PaintStyle||t.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||e.hoverPaintStyle||i.Defaults.HoverPaintStyle||t.Defaults.HoverPaintStyle});var u=i.getSuspendedAt();if(!i.isSuspendDrawing()){var c=i.getCachedData(this.sourceId),h=c.o,d=c.s,f=i.getCachedData(this.targetId),p=f.o,g=f.s,m=u||jsPlumbUtil.uuid(),v=this.endpoints[0].anchor.compute({xy:[h.left,h.top],wh:d,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[p.left,p.top],twh:g,tElement:this.endpoints[1],timestamp:m,rotation:i.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:v,timestamp:m}),v=this.endpoints[1].anchor.compute({xy:[p.left,p.top],wh:g,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[h.left,h.top],twh:d,tElement:this.endpoints[0],timestamp:m,rotation:i.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:v,timestamp:m})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(e){return!1!==this._jsPlumb.detachable&&(null!=e?!0===e.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(e){this._jsPlumb.detachable=!0===e},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(e){this._jsPlumb.reattach=!0===e},this._jsPlumb.cost=e.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=e.directed,null==e.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var y=t.extend({},this.endpoints[1].getParameters());t.extend(y,this.endpoints[0].getParameters()),t.extend(y,this.getParameters()),this.setParameters(y),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||e.connector||i.Defaults.Connector||t.Defaults.Connector,!0);var b=null!=e.data&&n.isObject(e.data)?e.data:{};this.getData=function(){return b},this.setData=function(e){b=e||{}},this.mergeData=function(e){b=t.extend(b,e)};var w=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,e.type].join(" ");/[^\s]/.test(w)&&this.addType(w,e.data,!0),this.updateConnectedClass()},n.extend(t.Connection,t.OverlayCapableJsPlumbUIComponent,{applyType:function(e,n,r){var i=null;null!=e.connector&&(null==(i=this.getCachedTypeItem("connector",r.connector))&&(i=this.prepareConnector(e.connector,r.connector),this.cacheTypeItem("connector",i,r.connector)),this.setPreparedConnector(i)),null!=e.detachable&&this.setDetachable(e.detachable),null!=e.reattach&&this.setReattach(e.reattach),e.scope&&(this.scope=e.scope),null!=e.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,e.cssClass);var s=null;e.anchor?null==(s=this.getCachedTypeItem("anchors",r.anchor))&&(s=[this._jsPlumb.instance.makeAnchor(e.anchor),this._jsPlumb.instance.makeAnchor(e.anchor)],this.cacheTypeItem("anchors",s,r.anchor)):e.anchors&&null==(s=this.getCachedTypeItem("anchors",r.anchors))&&(s=[this._jsPlumb.instance.makeAnchor(e.anchors[0]),this._jsPlumb.instance.makeAnchor(e.anchors[1])],this.cacheTypeItem("anchors",s,r.anchors)),null!=s&&(this.endpoints[0].anchor=s[0],this.endpoints[1].anchor=s[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),t.OverlayCapableJsPlumbUIComponent.applyType(this,e)},addClass:function(e,t){t&&(this.endpoints[0].addClass(e),this.endpoints[1].addClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(e)),this.connector&&this.connector.addClass(e)},removeClass:function(e,t){t&&(this.endpoints[0].removeClass(e),this.endpoints[1].removeClass(e),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(e)),this.connector&&this.connector.removeClass(e)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(e){this._jsPlumb.visible=e,this.connector&&this.connector.setVisible(e),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(e){this._jsPlumb&&(s(this,this.source,this._jsPlumb.instance,e),s(this,this.target,this._jsPlumb.instance,e))},setHover:function(t){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(t),e.jsPlumb[t?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),e.jsPlumb[t?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(e){this._jsPlumb.cost=e},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(e,t){var i,s={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},o=this._jsPlumb.instance.getRenderMode();return n.isString(e)?i=r(this._jsPlumb.instance,o,e,s,this):n.isArray(e)&&(i=1===e.length?r(this._jsPlumb.instance,o,e[0],s,this):r(this._jsPlumb.instance,o,e[0],n.merge(e[1],s),this)),null!=t&&(i.typeId=t),i},setPreparedConnector:function(e,t,n,r){if(this.connector!==e){var i,s="";if(null!=this.connector&&(s=(i=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=e,r&&this.cacheTypeItem("connector",e,r),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(s),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=i)for(var o=this.getOverlays(),a=0;a<o.length;a++)o[a].transfer&&o[a].transfer(this.connector);n||this.setListenerComponent(this.connector),t||this.repaint()}},setConnector:function(e,t,n,r){var i=this.prepareConnector(e,r);this.setPreparedConnector(i,t,n,r)},paint:function(e){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var t=(e=e||{}).timestamp,n=this.targetId,r=this.sourceId;if(null==t||t!==this._jsPlumb.lastPaintedAt){var i=this._jsPlumb.instance.updateOffset({elId:r}).o,s=this._jsPlumb.instance.updateOffset({elId:n}).o,o=this.endpoints[0],a=this.endpoints[1],l=o.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:o,timestamp:t,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),u=a.anchor.getCurrentLocation({xy:[s.left,s.top],wh:[s.width,s.height],element:a,timestamp:t,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:l,targetPos:u,sourceOrientation:o.anchor.getOrientation(o),targetOrientation:a.anchor.getOrientation(a),sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:i,targetInfo:s});var c={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var h in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(h)){var d=this._jsPlumb.overlays[h];d.isVisible()&&(this._jsPlumb.overlayPlacements[h]=d.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(d)),c.minX=Math.min(c.minX,this._jsPlumb.overlayPlacements[h].minX),c.maxX=Math.max(c.maxX,this._jsPlumb.overlayPlacements[h].maxX),c.minY=Math.min(c.minY,this._jsPlumb.overlayPlacements[h].minY),c.maxY=Math.max(c.maxY,this._jsPlumb.overlayPlacements[h].maxY))}var f=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,p=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),g={xmin:Math.min(this.connector.bounds.minX-(f+p),c.minX),ymin:Math.min(this.connector.bounds.minY-(f+p),c.minY),xmax:Math.max(this.connector.bounds.maxX+(f+p),c.maxX),ymax:Math.max(this.connector.bounds.maxY+(f+p),c.maxY)};for(var m in this.connector.paintExtents=g,this.connector.paint(this._jsPlumb.paintStyleInUse,null,g),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var v=this._jsPlumb.overlays[m];v.isVisible()&&v.paint(this._jsPlumb.overlayPlacements[m],g)}}this._jsPlumb.lastPaintedAt=t}},repaint:function(e){var t=jsPlumb.extend(e||{},{});t.elId=this.sourceId,this.paint(t)},prepareEndpoint:function(e,n,r,s,o,a,l,u,c){var h;if(s)r.endpoints[o]=s,s.addConnection(r);else{a.endpoints||(a.endpoints=[null,null]);var d=c||a.endpoints[o]||a.endpoint||e.Defaults.Endpoints[o]||t.Defaults.Endpoints[o]||e.Defaults.Endpoint||t.Defaults.Endpoint;a.endpointStyles||(a.endpointStyles=[null,null]),a.endpointHoverStyles||(a.endpointHoverStyles=[null,null]);var f=a.endpointStyles[o]||a.endpointStyle||e.Defaults.EndpointStyles[o]||t.Defaults.EndpointStyles[o]||e.Defaults.EndpointStyle||t.Defaults.EndpointStyle;null==f.fill&&null!=a.paintStyle&&(f.fill=a.paintStyle.stroke),null==f.outlineStroke&&null!=a.paintStyle&&(f.outlineStroke=a.paintStyle.outlineStroke),null==f.outlineWidth&&null!=a.paintStyle&&(f.outlineWidth=a.paintStyle.outlineWidth);var p=a.endpointHoverStyles[o]||a.endpointHoverStyle||e.Defaults.EndpointHoverStyles[o]||t.Defaults.EndpointHoverStyles[o]||e.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle;null!=a.hoverPaintStyle&&(null==p&&(p={}),null==p.fill&&(p.fill=a.hoverPaintStyle.stroke));var g=a.anchors?a.anchors[o]:a.anchor?a.anchor:i(e.Defaults.Anchors[o],u,e)||i(t.Defaults.Anchors[o],u,e)||i(e.Defaults.Anchor,u,e)||i(t.Defaults.Anchor,u,e);h=n({paintStyle:f,hoverPaintStyle:p,endpoint:d,connections:[r],uuid:a.uuids?a.uuids[o]:null,anchor:g,source:l,scope:a.scope,reattach:a.reattach||e.Defaults.ReattachConnections,detachable:a.detachable||e.Defaults.ConnectionsDetachable}),null==s&&h.setDeleteOnEmpty(!0),r.endpoints[o]=h,!1===a.drawEndpoints&&h.setVisible(!1,!0,!0)}return h},replaceEndpoint:function(e,t){var n=this.endpoints[e],r=n.elementId,i=this._jsPlumb.instance.getEndpoints(r),s=i.indexOf(n),o=this.makeEndpoint(0===e,n.element,r,null,t);this.endpoints[e]=o,i.splice(s,1,o),this._jsPlumb.instance.deleteObject({endpoint:n,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:n,current:o}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumbUtil,n=e.jsPlumb;n.AnchorManager=function(e){var r={},i={},s={},o={},a=this,l={},u=e.jsPlumbInstance,c={},h=function(e,t){return t[0][0]-e[0][0]},d=function(e,t){return(e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0])-(t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0])},f={top:d,right:h,bottom:h,left:d},p=function(e,t){var n=u.getCachedData(e),r=n.s,o=n.o,a=function(t,n,r,o,a,l,c){if(o.length>0)for(var h=function(e,t,n,r,i,s,o,a){for(var l=[],u=t[i?0:1]/(r.length+1),c=0;c<r.length;c++){var h=(c+1)*u,d=s*t[i?1:0];o&&(h=t[i?0:1]-h);var f=i?h:d,p=n.left+f,g=f/t[0],m=i?d:h,v=n.top+m,y=m/t[1];if(0!==a){var b=jsPlumbUtil.rotatePoint([p,v],[n.centerx,n.centery],a);p=b[0],v=b[1]}l.push([p,v,g,y,r[c][1],r[c][2]])}return l}(0,n,r,(y=f[t],o.sort(y)),a,l,"right"===t||"top"===t,u.getRotation(e)),d=function(e,t){i[e.id]=[t[0],t[1],t[2],t[3]],s[e.id]=c},p=0;p<h.length;p++){var g=h[p][4],m=g.endpoints[0].elementId===e,v=g.endpoints[1].elementId===e;m&&d(g.endpoints[0],h[p]),v&&d(g.endpoints[1],h[p])}var y};a("bottom",r,o,t.bottom,!0,1,[0,1]),a("top",r,o,t.top,!0,0,[0,-1]),a("left",r,o,t.left,!1,0,[-1,0]),a("right",r,o,t.right,!1,1,[1,0])};this.reset=function(){r={},o={},l={}},this.addFloatingConnection=function(e,t){c[e]=t},this.newConnection=function(e){var r=e.sourceId,i=e.targetId,s=e.endpoints,a=!0,l=function(l,u,c,h,d){r===i&&c.isContinuous&&(e._jsPlumb.instance.removeElement(s[1].canvas),a=!1),t.addToList(o,h,[d,u,c.constructor===n.DynamicAnchor])};l(0,s[0],s[0].anchor,i,e),a&&l(0,s[1],s[1].anchor,r,e)};var g=function(e){!function(e,n){if(e){var r=function(e){return e[4]===n};t.removeWithFunction(e.top,r),t.removeWithFunction(e.left,r),t.removeWithFunction(e.bottom,r),t.removeWithFunction(e.right,r)}}(l[e.elementId],e.id)};this.connectionDetached=function(e,n){var r=e.connection||e,i=e.sourceId,s=e.targetId,l=r.endpoints,u=function(e,n,r,i,s){t.removeWithFunction(o[i],(function(e){return e[0].id===s.id}))};u(0,l[1],l[1].anchor,i,r),u(0,l[0],l[0].anchor,s,r),r.floatingId&&(u(r.floatingIndex,r.floatingEndpoint,r.floatingEndpoint.anchor,r.floatingId,r),g(r.floatingEndpoint)),g(r.endpoints[0]),g(r.endpoints[1]),n||(a.redraw(r.sourceId),r.targetId!==r.sourceId&&a.redraw(r.targetId))},this.addEndpoint=function(e,n){t.addToList(r,n,e)},this.changeId=function(e,t){o[t]=o[e],r[t]=r[e],delete o[e],delete r[e]},this.getConnectionsFor=function(e){return o[e]||[]},this.getEndpointsFor=function(e){return r[e]||[]},this.deleteEndpoint=function(e){t.removeWithFunction(r[e.elementId],(function(t){return t.id===e.id})),g(e)},this.elementRemoved=function(e){delete c[e],delete r[e],r[e]=[]};var m=function(n,r,i,s,o,a,l,u,c,h,d,f){var p,g,m=-1,v=s.endpoints[l],y=v.id,b=[1,0][l],w=[[r,i],s,o,a,y],_=n[c],E=v._continuousAnchorEdge?n[v._continuousAnchorEdge]:null;if(E){var S=t.findWithFunction(E,(function(e){return e[4]===y}));if(-1!==S)for(E.splice(S,1),p=0;p<E.length;p++)g=E[p][1],t.addWithFunction(d,g,(function(e){return e.id===g.id})),t.addWithFunction(f,E[p][1].endpoints[l],(function(e){return e.id===g.endpoints[l].id})),t.addWithFunction(f,E[p][1].endpoints[b],(function(e){return e.id===g.endpoints[b].id}))}for(p=0;p<_.length;p++)g=_[p][1],1===e.idx&&_[p][3]===a&&-1===m&&(m=p),t.addWithFunction(d,g,(function(e){return e.id===g.id})),t.addWithFunction(f,_[p][1].endpoints[l],(function(e){return e.id===g.endpoints[l].id})),t.addWithFunction(f,_[p][1].endpoints[b],(function(e){return e.id===g.endpoints[b].id}));var C=u?-1!==m?m:0:_.length;_.splice(C,0,w),v._continuousAnchorEdge=c};this.sourceOrTargetChanged=function(e,r,i,s,a){if(0===a){if(e!==r){i.sourceId=r,i.source=s,t.removeWithFunction(o[e],(function(e){return e[0].id===i.id}));var l=t.findWithFunction(o[i.targetId],(function(e){return e[0].id===i.id}));l>-1&&(o[i.targetId][l][0]=i,o[i.targetId][l][1]=i.endpoints[0],o[i.targetId][l][2]=i.endpoints[0].anchor.constructor===n.DynamicAnchor),t.addToList(o,r,[i,i.endpoints[1],i.endpoints[1].anchor.constructor===n.DynamicAnchor]),i.endpoints[1].anchor.isContinuous&&(i.source===i.target?i._jsPlumb.instance.removeElement(i.endpoints[1].canvas):null==i.endpoints[1].canvas.parentNode&&i._jsPlumb.instance.appendElement(i.endpoints[1].canvas)),i.updateConnectedClass()}}else if(1===a){var u=i.endpoints[0].elementId;i.target=s,i.targetId=r;var c=t.findWithFunction(o[u],(function(e){return e[0].id===i.id})),h=t.findWithFunction(o[e],(function(e){return e[0].id===i.id}));-1!==c&&(o[u][c][0]=i,o[u][c][1]=i.endpoints[1],o[u][c][2]=i.endpoints[1].anchor.constructor===n.DynamicAnchor),h>-1&&(o[e].splice(h,1),t.addToList(o,r,[i,i.endpoints[0],i.endpoints[0].anchor.constructor===n.DynamicAnchor])),i.updateConnectedClass()}},this.rehomeEndpoint=function(e,t,n){var i=r[t]||[],s=u.getId(n);if(s!==t){var o=i.indexOf(e);if(o>-1){var l=i.splice(o,1)[0];a.add(l,s)}}for(var c=0;c<e.connections.length;c++)e.connections[c].sourceId===t?a.sourceOrTargetChanged(t,e.elementId,e.connections[c],e.element,0):e.connections[c].targetId===t&&a.sourceOrTargetChanged(t,e.elementId,e.connections[c],e.element,1)},this.redraw=function(e,i,s,a,h,d){var f=[],g=[],v=[];if(!u.isSuspendDrawing()){var y=r[e]||[],b=o[e]||[];s=s||jsPlumbUtil.uuid(),a=a||{left:0,top:0},i&&(i={left:i.left+a.left,top:i.top+a.top});for(var w=u.updateOffset({elId:e,offset:i,recalc:!1,timestamp:s}),_={},E=0;E<b.length;E++){var S=b[E][0],C=S.sourceId,P=S.targetId,k=S.endpoints[0].anchor.isContinuous,I=S.endpoints[1].anchor.isContinuous;if(k||I){var T=C+"_"+P,x=_[T],D=S.sourceId===e?1:0,A=u.getRotation(P),O=u.getRotation(C);k&&!l[C]&&(l[C]={top:[],right:[],bottom:[],left:[]}),I&&!l[P]&&(l[P]={top:[],right:[],bottom:[],left:[]}),e!==P&&u.updateOffset({elId:P,timestamp:s}),e!==C&&u.updateOffset({elId:C,timestamp:s});var N=u.getCachedData(P),j=u.getCachedData(C);P===C&&(k||I)?(m(l[C],-Math.PI/2,0,S,!1,P,0,!1,"top",0,f,g),m(l[P],-Math.PI/2,0,S,!1,C,1,!1,"top",0,f,g)):(x||(x=this.calculateOrientation(C,P,j.o,N.o,S.endpoints[0].anchor,S.endpoints[1].anchor,S,O,A),_[T]=x),k&&m(l[C],x.theta,0,S,!1,P,0,!1,x.a[0],0,f,g),I&&m(l[P],x.theta2,-1,S,!0,C,1,!0,x.a[1],0,f,g)),k&&t.addWithFunction(v,C,(function(e){return e===C})),I&&t.addWithFunction(v,P,(function(e){return e===P})),t.addWithFunction(f,S,(function(e){return e.id===S.id})),(k&&0===D||I&&1===D)&&t.addWithFunction(g,S.endpoints[D],(function(e){return e.id===S.endpoints[D].id}))}}for(E=0;E<y.length;E++)0===y[E].connections.length&&y[E].anchor.isContinuous&&(l[e]||(l[e]={top:[],right:[],bottom:[],left:[]}),m(l[e],-Math.PI/2,0,{endpoints:[y[E],y[E]],paint:function(){}},!1,e,0,!1,y[E].anchor.getDefaultFace(),0,f,g),t.addWithFunction(v,e,(function(t){return t===e})));for(E=0;E<v.length;E++)p(v[E],l[v[E]]);for(E=0;E<y.length;E++)y[E].paint({timestamp:s,offset:w,dimensions:w.s,recalc:!0!==d});for(E=0;E<g.length;E++){var R=u.getCachedData(g[E].elementId);g[E].paint({timestamp:null,offset:R,dimensions:R.s})}for(E=0;E<b.length;E++){var M=b[E][1];if(M.anchor.constructor===n.DynamicAnchor){M.paint({elementWithPrecedence:e,timestamp:s}),t.addWithFunction(f,b[E][0],(function(e){return e.id===b[E][0].id}));for(var L=0;L<M.connections.length;L++)M.connections[L]!==b[E][0]&&t.addWithFunction(f,M.connections[L],(function(e){return e.id===M.connections[L].id}))}else t.addWithFunction(f,b[E][0],(function(e){return e.id===b[E][0].id}))}var F=c[e];for(F&&F.paint({timestamp:s,recalc:!1,elId:e}),E=0;E<f.length;E++)f[E].paint({elId:e,timestamp:null,recalc:!1,clearEdits:h})}return{c:f,e:g}};var v=function(e){t.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var n=e.faces||["top","right","bottom","left"],r=!(!1===e.clockwise),o={},a={top:"bottom",right:"left",left:"right",bottom:"top"},l={top:"right",right:"bottom",left:"top",bottom:"left"},u={top:"left",right:"top",left:"bottom",bottom:"right"},c=r?l:u,h=r?u:l,d=e.cssClass||"",f=null,p=null,g=["left","right"],m=["top","bottom"],v=null,y=0;y<n.length;y++)o[n[y]]=!0;this.getDefaultFace=function(){return 0===n.length?"top":n[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(e){return o[e]?e:o[a[e]]?a[e]:o[c[e]]?c[e]:o[h[e]]?h[e]:e},this.isEdgeSupported=function(e){return null==v?null==p?!0===o[e]:p===e:-1!==v.indexOf(e)},this.setCurrentFace=function(e,t){f=e,t&&null!=p&&(p=f)},this.getCurrentFace=function(){return f},this.getSupportedFaces=function(){var e=[];for(var t in o)o[t]&&e.push(t);return e},this.lock=function(){p=f},this.unlock=function(){p=null},this.isLocked=function(){return null!=p},this.lockCurrentAxis=function(){null!=f&&(v="left"===f||"right"===f?g:m)},this.unlockCurrentAxis=function(){v=null},this.compute=function(e){return i[e.element.id]||[0,0]},this.getCurrentLocation=function(e){return i[e.element.id]||[0,0]},this.getOrientation=function(e){return s[e.id]||[0,0]},this.getCssClass=function(){return d}};u.continuousAnchorFactory={get:function(e){return new v(e)},clear:function(e){delete i[e]}}},n.AnchorManager.prototype.calculateOrientation=function(e,t,n,r,i,s,o,a,l){var u=["left","top","right","bottom"];if(e===t)return{orientation:"identity",a:["top","top"]};var c=Math.atan2(r.centery-n.centery,r.centerx-n.centerx),h=Math.atan2(n.centery-r.centery,n.centerx-r.centerx),d=[],f={};!function(e,t){for(var n=0;n<e.length;n++)if(f[e[n]]={left:[t[n][0].left,t[n][0].centery],right:[t[n][0].right,t[n][0].centery],top:[t[n][0].centerx,t[n][0].top],bottom:[t[n][0].centerx,t[n][0].bottom]},0!==t[n][1])for(var r in f[e[n]])f[e[n]][r]=jsPlumbUtil.rotatePoint(f[e[n]][r],[t[n][0].centerx,t[n][0].centery],t[n][1])}(["source","target"],[[n,a],[r,l]]);for(var p=0;p<u.length;p++)for(var g=0;g<u.length;g++)d.push({source:u[p],target:u[g],dist:Biltong.lineLength(f.source[u[p]],f.target[u[g]])});d.sort((function(e,t){return e.dist<t.dist?-1:e.dist>t.dist?1:0}));for(var m=d[0].source,v=d[0].target,y=0;y<d.length&&(m=i.isContinuous&&i.locked?i.getCurrentFace():!i.isContinuous||i.isEdgeSupported(d[y].source)?d[y].source:null,v=s.isContinuous&&s.locked?s.getCurrentFace():!s.isContinuous||s.isEdgeSupported(d[y].target)?d[y].target:null,null==m||null==v);y++);return i.isContinuous&&i.setCurrentFace(m),s.isContinuous&&s.setCurrentFace(v),{a:[m,v],theta:c,theta2:h}},n.Anchor=function(e){this.x=e.x||0,this.y=e.y||0,this.elementId=e.elementId,this.cssClass=e.cssClass||"",this.orientation=e.orientation||[0,0],this.lastReturnValue=null,this.offsets=e.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=!1!==e.relocatable,this.snapOnRelocate=!1!==e.snapOnRelocate,this.locked=!1,t.EventGenerator.apply(this),this.compute=function(e){var t=e.xy,n=e.wh,r=e.timestamp;if(r&&r===this.timestamp)return this.lastReturnValue;var i=[t[0]+this.x*n[0]+this.offsets[0],t[1]+this.y*n[1]+this.offsets[1],this.x,this.y],s=e.rotation;if(null!=s&&0!==s){var o=jsPlumbUtil.rotatePoint(i,[t[0]+n[0]/2,t[1]+n[1]/2],s);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*o[2]-this._unrotatedOrientation[1]*o[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*o[2]+this._unrotatedOrientation[0]*o[3]),this.lastReturnValue=[o[0],o[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=i;return this.timestamp=r,this.lastReturnValue},this.getCurrentLocation=function(e){return e=e||{},null==this.lastReturnValue||null!=e.timestamp&&this.timestamp!==e.timestamp?this.compute(e):this.lastReturnValue},this.setPosition=function(e,t,n,r,i){this.locked&&!i||(this.x=e,this.y=t,this.orientation=[n,r],this.lastReturnValue=null)}},t.extend(n.Anchor,t.EventGenerator,{equals:function(e){if(!e)return!1;var t=e.getOrientation(),n=this.getOrientation();return this.x===e.x&&this.y===e.y&&this.offsets[0]===e.offsets[0]&&this.offsets[1]===e.offsets[1]&&n[0]===t[0]&&n[1]===t[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),n.FloatingAnchor=function(e){n.Anchor.apply(this,arguments);var t=e.reference,r=e.referenceCanvas,i=n.getSize(r),s=null,o=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(e){var t=e.xy,n=[t[0]+i[0]/2,t[1]+i[1]/2];return o=n,n},this.getOrientation=function(e){if(s)return s;var n=t.getOrientation(e);return[0*Math.abs(n[0])*-1,0*Math.abs(n[1])*-1]},this.over=function(e,t){s=e.getOrientation(t)},this.out=function(){s=null},this.getCurrentLocation=function(e){return null==o?this.compute(e):o}},t.extend(n.FloatingAnchor,n.Anchor);n.DynamicAnchor=function(e){n.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=e.elementId,this.jsPlumbInstance=e.jsPlumbInstance;for(var t=0;t<e.anchors.length;t++)this.anchors[t]=(r=e.anchors[t],i=this.jsPlumbInstance,s=this.elementId,r.constructor===n.Anchor?r:i.makeAnchor(r,s,i));var r,i,s;this.getAnchors=function(){return this.anchors};var o=this.anchors.length>0?this.anchors[0]:null,a=o,l=function(e,t,n,r,i,s,o){var a=r[0]+e.x*i[0],l=r[1]+e.y*i[1],u=r[0]+i[0]/2,c=r[1]+i[1]/2;if(null!=s&&0!==s){var h=jsPlumbUtil.rotatePoint([a,l],[u,c],s);a=h[0],l=h[1]}return Math.sqrt(Math.pow(t-a,2)+Math.pow(n-l,2))+Math.sqrt(Math.pow(u-a,2)+Math.pow(c-l,2))},u=e.selector||function(e,t,n,r,i,s,o){for(var a=n[0]+r[0]/2,u=n[1]+r[1]/2,c=-1,h=1/0,d=0;d<o.length;d++){var f=l(o[d],a,u,e,t,i);f<h&&(c=d+0,h=f)}return o[c]};this.compute=function(e){var t=e.xy,n=e.wh,r=e.txy,i=e.twh,s=e.rotation,l=e.tRotation;return this.timestamp=e.timestamp,this.locked||null==r||null==i?(this.lastReturnValue=o.compute(e),this.lastReturnValue):(e.timestamp=null,o=u(t,n,r,i,s,l,this.anchors),this.x=o.x,this.y=o.y,o!==a&&this.fire("anchorChanged",o),a=o,this.lastReturnValue=o.compute(e),this.lastReturnValue)},this.getCurrentLocation=function(e){return null!=o?o.getCurrentLocation(e):null},this.getOrientation=function(e){return null!=o?o.getOrientation(e):[0,0]},this.over=function(e,t){null!=o&&o.over(e,t)},this.out=function(){null!=o&&o.out()},this.setAnchor=function(e){o=e},this.getCssClass=function(){return o&&o.getCssClass()||""},this.setAnchorCoordinates=function(e){var t=jsPlumbUtil.findWithFunction(this.anchors,(function(t){return t.x===e[0]&&t.y===e[1]}));return-1!==t&&(this.setAnchor(this.anchors[t]),!0)}},t.extend(n.DynamicAnchor,n.Anchor);var r=function(e,t,r,i,s,o){n.Anchors[s]=function(n){var a=n.jsPlumbInstance.makeAnchor([e,t,r,i,0,0],n.elementId,n.jsPlumbInstance);return a.type=s,o&&o(a,n),a}};r(.5,0,0,-1,"TopCenter"),r(.5,1,0,1,"BottomCenter"),r(0,.5,-1,0,"LeftMiddle"),r(1,.5,1,0,"RightMiddle"),r(.5,0,0,-1,"Top"),r(.5,1,0,1,"Bottom"),r(0,.5,-1,0,"Left"),r(1,.5,1,0,"Right"),r(.5,.5,0,0,"Center"),r(1,0,0,-1,"TopRight"),r(1,1,0,1,"BottomRight"),r(0,0,0,-1,"TopLeft"),r(0,1,0,1,"BottomLeft"),n.Defaults.DynamicAnchors=function(e){return e.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],e.elementId,e.jsPlumbInstance)},n.Anchors.AutoDefault=function(e){var t=e.jsPlumbInstance.makeDynamicAnchor(n.Defaults.DynamicAnchors(e));return t.type="AutoDefault",t};var i=function(e,t){n.Anchors[e]=function(n){var r=n.jsPlumbInstance.makeAnchor(["Continuous",{faces:t}],n.elementId,n.jsPlumbInstance);return r.type=e,r}};n.Anchors.Continuous=function(e){return e.jsPlumbInstance.continuousAnchorFactory.get(e)},i("ContinuousLeft",["left"]),i("ContinuousTop",["top"]),i("ContinuousBottom",["bottom"]),i("ContinuousRight",["right"]),r(0,0,0,0,"Assign",(function(e,t){var n=t.position||"Fixed";e.positionFinder=n.constructor===String?t.jsPlumbInstance.AnchorPositionFinders[n]:n,e.constructorParams=t})),e.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(e,t,n){return[(e.left-t.left)/n[0],(e.top-t.top)/n[1]]},Grid:function(e,t,n,r){var i=e.left-t.left,s=e.top-t.top,o=n[0]/r.grid[0],a=n[1]/r.grid[1],l=Math.floor(i/o),u=Math.floor(s/a);return[(l*o+o/2)/n[0],(u*a+a/2)/n[1]]}},n.Anchors.Perimeter=function(e){var t=(e=e||{}).anchorCount||60,n=e.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");var r=function(){for(var e=.5,n=2*Math.PI/t,r=0,i=[],s=0;s<t;s++){var o=e+e*Math.sin(r),a=e+e*Math.cos(r);i.push([o,a,0,0]),r+=n}return i},i=function(e){for(var n=t/e.length,r=[],i=function(e,i,s,o,a,l,u){for(var c=(s-e)/(n=t*a),h=(o-i)/n,d=0;d<n;d++)r.push([e+c*d,i+h*d,null==l?0:l,null==u?0:u])},s=0;s<e.length;s++)i.apply(null,e[s]);return r},s=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n][0],e[n][1],e[n][2],e[n][3],1/e.length,e[n][4],e[n][5]]);return i(t)},o=function(){return s([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},a={Circle:r,Ellipse:r,Diamond:function(){return s([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:o,Square:o,Triangle:function(){return s([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(e){for(var t=e.points,n=[],r=0,s=0;s<t.length-1;s++){var o=Math.sqrt(Math.pow(t[s][2]-t[s][0])+Math.pow(t[s][3]-t[s][1]));r+=o,n.push([t[s][0],t[s][1],t[s+1][0],t[s+1][1],o])}for(var a=0;a<n.length;a++)n[a][4]=n[a][4]/r;return i(n)}};if(!a[n])throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var l=a[n](e);e.rotation&&(l=function(e,t){for(var n=[],r=t/180*Math.PI,i=0;i<e.length;i++){var s=e[i][0]-.5,o=e[i][1]-.5;n.push([s*Math.cos(r)-o*Math.sin(r)+.5,s*Math.sin(r)+o*Math.cos(r)+.5,e[i][2],e[i][3]])}return n}(l,e.rotation));var u=e.jsPlumbInstance.makeDynamicAnchor(l);return u.type="Perimeter",u}}.call("undefined"!==typeof window?window:this),function(){"use strict";this.jsPlumbUtil;var e=this.jsPlumb;e.DefaultRouter=function(t){this.jsPlumbInstance=t,this.anchorManager=new e.AnchorManager({jsPlumbInstance:t}),this.sourceOrTargetChanged=function(e,t,n,r,i){this.anchorManager.sourceOrTargetChanged(e,t,n,r,i)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(e,t){this.anchorManager.changeId(e,t)},this.elementRemoved=function(e){this.anchorManager.elementRemoved(e)},this.newConnection=function(e){this.anchorManager.newConnection(e)},this.connectionDetached=function(e,t){this.anchorManager.connectionDetached(e,t)},this.redraw=function(e,t,n,r,i,s){return this.anchorManager.redraw(e,t,n,r,i,s)},this.deleteEndpoint=function(e){this.anchorManager.deleteEndpoint(e)},this.rehomeEndpoint=function(e,t,n){this.anchorManager.rehomeEndpoint(e,t,n)},this.addEndpoint=function(e,t){this.anchorManager.addEndpoint(e,t)}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,r=e.Biltong;t.Segments={AbstractSegment:function(e){this.params=e,this.findClosestPointOnPath=function(e,t){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(e.x1,e.x2),minY:Math.min(e.y1,e.y2),maxX:Math.max(e.x1,e.x2),maxY:Math.max(e.y1,e.y2)}},this.lineIntersection=function(e,t,n,r){return[]},this.boxIntersection=function(e,t,n,r){var i=[];return i.push.apply(i,this.lineIntersection(e,t,e+n,t)),i.push.apply(i,this.lineIntersection(e+n,t,e+n,t+r)),i.push.apply(i,this.lineIntersection(e+n,t+r,e,t+r)),i.push.apply(i,this.lineIntersection(e,t+r,e,t)),i},this.boundingBoxIntersection=function(e){return this.boxIntersection(e.x,e.y,e.w,e.y)}},Straight:function(e){var n,i,s,o,a,l,u;t.Segments.AbstractSegment.apply(this,arguments);this.type="Straight",this.getLength=function(){return n},this.getGradient=function(){return i},this.getCoordinates=function(){return{x1:o,y1:l,x2:a,y2:u}},this.setCoordinates=function(e){o=e.x1,l=e.y1,a=e.x2,u=e.y2,n=Math.sqrt(Math.pow(a-o,2)+Math.pow(u-l,2)),i=r.gradient({x:o,y:l},{x:a,y:u}),s=-1/i},this.setCoordinates({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}),this.getBounds=function(){return{minX:Math.min(o,a),minY:Math.min(l,u),maxX:Math.max(o,a),maxY:Math.max(l,u)}},this.pointOnPath=function(e,t){if(0!==e||t){if(1!==e||t){var i=t?e>0?e:n+e:e*n;return r.pointOnLine({x:o,y:l},{x:a,y:u},i)}return{x:a,y:u}}return{x:o,y:l}},this.gradientAtPoint=function(e){return i},this.pointAlongPathFrom=function(e,t,n){var i=this.pointOnPath(e,n),s=t<=0?{x:o,y:l}:{x:a,y:u};return t<=0&&Math.abs(t)>1&&(t*=-1),r.pointOnLine(i,s,t)};var c=function(e,t,n){return n>=Math.min(e,t)&&n<=Math.max(e,t)},h=function(e,t,n){return Math.abs(n-e)<Math.abs(n-t)?e:t};this.findClosestPointOnPath=function(e,t){var d={d:1/0,x:null,y:null,l:null,x1:o,x2:a,y1:l,y2:u};if(0===i)d.y=l,d.x=c(o,a,e)?e:h(o,a,e);else if(i===1/0||i===-1/0)d.x=o,d.y=c(l,u,t)?t:h(l,u,t);else{var f=l-i*o,p=(t-s*e-f)/(i-s),g=i*p+f;d.x=c(o,a,p)?p:h(o,a,p),d.y=c(l,u,g)?g:h(l,u,g)}var m=r.lineLength([d.x,d.y],[o,l]);return d.d=r.lineLength([e,t],[d.x,d.y]),d.l=m/n,d};var d=function(e,t,n){return n>t?t<=e&&e<=n:t>=e&&e>=n};this.lineIntersection=function(e,t,n,s){var c=Math.abs(r.gradient({x:e,y:t},{x:n,y:s})),h=Math.abs(i),f=h===1/0?o:l-h*o,p=[],g=c===1/0?e:t-c*e;if(c!==h)if(c===1/0&&0===h)d(e,o,a)&&d(l,t,s)&&(p=[e,l]);else if(0===c&&h===1/0)d(t,l,u)&&d(o,e,n)&&(p=[o,t]);else{var m,v;c===1/0?d(m=e,o,a)&&d(v=h*e+f,t,s)&&(p=[m,v]):0===c?d(v=t,l,u)&&d(m=(t-f)/h,e,n)&&(p=[m,v]):(v=h*(m=(g-f)/(h-c))+f,d(m,o,a)&&d(v,l,u)&&(p=[m,v]))}return p},this.boxIntersection=function(e,t,n,r){var i=[];return i.push.apply(i,this.lineIntersection(e,t,e+n,t)),i.push.apply(i,this.lineIntersection(e+n,t,e+n,t+r)),i.push.apply(i,this.lineIntersection(e+n,t+r,e,t+r)),i.push.apply(i,this.lineIntersection(e,t+r,e,t)),i},this.boundingBoxIntersection=function(e){return this.boxIntersection(e.x,e.y,e.w,e.h)}},Arc:function(e){t.Segments.AbstractSegment.apply(this,arguments);var n=function(t,n){return r.theta([e.cx,e.cy],[t,n])},i=2*Math.PI;this.radius=e.r,this.anticlockwise=e.ac,this.type="Arc",e.startAngle&&e.endAngle?(this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.x1=e.cx+this.radius*Math.cos(e.startAngle),this.y1=e.cy+this.radius*Math.sin(e.startAngle),this.x2=e.cx+this.radius*Math.cos(e.endAngle),this.y2=e.cy+this.radius*Math.sin(e.endAngle)):(this.startAngle=n(e.x1,e.y1),this.endAngle=n(e.x2,e.y2),this.x1=e.x1,this.y1=e.y1,this.x2=e.x2,this.y2=e.y2),this.endAngle<0&&(this.endAngle+=i),this.startAngle<0&&(this.startAngle+=i);var s=this.endAngle<this.startAngle?this.endAngle+i:this.endAngle;this.sweep=Math.abs(s-this.startAngle),this.anticlockwise&&(this.sweep=i-this.sweep);var o=2*Math.PI*this.radius,a=this.sweep/i,l=o*a;this.getLength=function(){return l},this.getBounds=function(){return{minX:e.cx-e.r,maxX:e.cx+e.r,minY:e.cy-e.r,maxY:e.cy+e.r}};var u=function(e){var t=Math.floor(e),n=Math.ceil(e);return e-t<1e-10?t:n-e<1e-10?n:e};this.pointOnPath=function(t,n){if(0===t)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===t)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(t/=l);var r=function(e,t){if(e.anticlockwise){var n=e.startAngle<e.endAngle?e.startAngle+i:e.startAngle;return n-Math.abs(n-e.endAngle)*t}var r=e.endAngle<e.startAngle?e.endAngle+i:e.endAngle,s=Math.abs(r-e.startAngle);return e.startAngle+s*t}(this,t),s=e.cx+e.r*Math.cos(r),o=e.cy+e.r*Math.sin(r);return{x:u(s),y:u(o),theta:r}},this.gradientAtPoint=function(t,n){var i=this.pointOnPath(t,n),s=r.normal([e.cx,e.cy],[i.x,i.y]);return this.anticlockwise||s!==1/0&&s!==-1/0||(s*=-1),s},this.pointAlongPathFrom=function(t,n,r){var i=this.pointOnPath(t,r),s=n/o*2*Math.PI,a=this.anticlockwise?-1:1,l=i.theta+a*s;return{x:e.cx+this.radius*Math.cos(l),y:e.cy+this.radius*Math.sin(l)}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];var r=function(e){var t={x:0,y:0};if(0===e)return this.curve[0];var n=this.curve.length-1;if(1===e)return this.curve[n];var r=this.curve,i=1-e;if(0===n)return this.curve[0];if(1===n)return{x:i*r[0].x+e*r[1].x,y:i*r[0].y+e*r[1].y};if(n<4){var s,o,a,l=i*i,u=e*e,c=0;return 2===n?(r=[r[0],r[1],r[2],t],s=l,o=i*e*2,a=u):3===n&&(s=l*i,o=l*e*3,a=i*u*3,c=e*u),{x:s*r[0].x+o*r[1].x+a*r[2].x+c*r[3].x,y:s*r[0].y+o*r[1].y+a*r[2].y+c*r[3].y}}return t}.bind(this),i=function(){var e;(e=this.curve)[0].x===e[1].x&&e[0].y===e[1].y&&(this.length=0);var t,n,i=function(e){var t=[];e--;for(var n=0;n<=e;n++)t.push(r(n/e));return t}(16);this.length=0;for(var s=0;s<15;s++){var o=i[s],a=i[s+1];this.length+=(t=o,n=a,Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}}.bind(this);t.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier",i();var s=function(t,n,r){return r&&(n=e.jsBezier.locationAlongCurveFrom(t,n>0?0:1,n)),n};this.pointOnPath=function(t,n){return t=s(this.curve,t,n),e.jsBezier.pointOnCurve(this.curve,t)},this.gradientAtPoint=function(t,n){return t=s(this.curve,t,n),e.jsBezier.gradientAtPoint(this.curve,t)},this.pointAlongPathFrom=function(t,n,r){return t=s(this.curve,t,r),e.jsBezier.pointAlongCurveFrom(this.curve,t,n)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(t,n){var r=e.jsBezier.nearestPointOnCurve({x:t,y:n},this.curve);return{d:Math.sqrt(Math.pow(r.point.x-t,2)+Math.pow(r.point.y-n,2)),x:r.point.x,y:r.point.y,l:1-r.location,s:this}},this.lineIntersection=function(t,n,r,i){return e.jsBezier.lineIntersection(t,n,r,i,this.curve)}}},t.SegmentRenderer={getPath:function(e,t){return{Straight:function(t){var n=e.getCoordinates();return(t?"M "+n.x1+" "+n.y1+" ":"")+"L "+n.x2+" "+n.y2},Bezier:function(t){var n=e.params;return(t?"M "+n.x2+" "+n.y2+" ":"")+"C "+n.cp2x+" "+n.cp2y+" "+n.cp1x+" "+n.cp1y+" "+n.x1+" "+n.y1},Arc:function(t){var n=e.params,r=e.sweep>Math.PI?1:0,i=e.anticlockwise?0:1;return(t?"M"+e.x1+" "+e.y1+" ":"")+"A "+e.radius+" "+n.r+" 0 "+r+","+i+" "+e.x2+" "+e.y2}}[e.type](t)}};var i=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};t.Connectors.AbstractConnector=function(e){i.apply(this,arguments);var s=[],o=0,a=[],l=[],u=e.stub||0,c=n.isArray(u)?u[0]:u,h=n.isArray(u)?u[1]:u,d=e.gap||0,f=n.isArray(d)?d[0]:d,p=n.isArray(d)?d[1]:d,g=null,m=null;this.getPathData=function(){for(var e="",n=0;n<s.length;n++)e+=t.SegmentRenderer.getPath(s[n],0===n),e+=" ";return e},this.findSegmentForPoint=function(e,t){for(var n={d:1/0,s:null,x:null,y:null,l:null},r=0;r<s.length;r++){var i=s[r].findClosestPointOnPath(e,t);i.d<n.d&&(n.d=i.d,n.l=i.l,n.x=i.x,n.y=i.y,n.s=s[r],n.x1=i.x1,n.x2=i.x2,n.y1=i.y1,n.y2=i.y2,n.index=r,n.connectorLocation=a[r][0]+i.l*(a[r][1]-a[r][0]))}return n},this.lineIntersection=function(e,t,n,r){for(var i=[],o=0;o<s.length;o++)i.push.apply(i,s[o].lineIntersection(e,t,n,r));return i},this.boxIntersection=function(e,t,n,r){for(var i=[],o=0;o<s.length;o++)i.push.apply(i,s[o].boxIntersection(e,t,n,r));return i},this.boundingBoxIntersection=function(e){for(var t=[],n=0;n<s.length;n++)t.push.apply(t,s[n].boundingBoxIntersection(e));return t};var v=function(e,t){var n,r,i;if(t&&(e=e>0?e/o:(o+e)/o),1===e)n=s.length-1,i=1;else if(0===e)i=0,n=0;else if(e>=.5){for(n=0,i=0,r=a.length-1;r>-1;r--)if(a[r][1]>=e&&a[r][0]<=e){n=r,i=(e-a[r][0])/l[r];break}}else for(n=a.length-1,i=1,r=0;r<a.length;r++)if(a[r][1]>=e){n=r,i=(e-a[r][0])/l[r];break}return{segment:s[n],proportion:i,index:n}};this.setSegments=function(e){g=[],o=0;for(var t=0;t<e.length;t++)g.push(e[t]),o+=e[t].getLength()},this.getLength=function(){return o};var y=function(e){this.strokeWidth=e.strokeWidth;var t=r.quadrant(e.sourcePos,e.targetPos),n=e.targetPos[0]<e.sourcePos[0],i=e.targetPos[1]<e.sourcePos[1],s=e.strokeWidth||1,o=e.sourceEndpoint.anchor.getOrientation(e.sourceEndpoint),a=e.targetEndpoint.anchor.getOrientation(e.targetEndpoint),l=n?e.targetPos[0]:e.sourcePos[0],u=i?e.targetPos[1]:e.sourcePos[1],d=Math.abs(e.targetPos[0]-e.sourcePos[0]),g=Math.abs(e.targetPos[1]-e.sourcePos[1]);if(0===o[0]&&0===o[1]||0===a[0]&&0===a[1]){var m=d>g?0:1,v=[1,0][m];a=[],(o=[])[m]=e.sourcePos[m]>e.targetPos[m]?-1:1,a[m]=e.sourcePos[m]>e.targetPos[m]?1:-1,o[v]=0,a[v]=0}var y=n?d+f*o[0]:f*o[0],b=i?g+f*o[1]:f*o[1],w=n?p*a[0]:d+p*a[0],_=i?p*a[1]:g+p*a[1],E=o[0]*a[0]+o[1]*a[1],S={sx:y,sy:b,tx:w,ty:_,lw:s,xSpan:Math.abs(w-y),ySpan:Math.abs(_-b),mx:(y+w)/2,my:(b+_)/2,so:o,to:a,x:l,y:u,w:d,h:g,segment:t,startStubX:y+o[0]*c,startStubY:b+o[1]*c,endStubX:w+a[0]*h,endStubY:_+a[1]*h,isXGreaterThanStubTimes2:Math.abs(y-w)>c+h,isYGreaterThanStubTimes2:Math.abs(b-_)>c+h,opposite:-1===E,perpendicular:0===E,orthogonal:1===E,sourceAxis:0===o[0]?"y":"x",points:[l,u,d,g,y,b,w,_],stubs:[c,h]};return S.anchorOrientation=S.opposite?"opposite":S.orthogonal?"orthogonal":"perpendicular",S};this.getSegments=function(){return s},this.updateBounds=function(e){var t=e.getBounds();this.bounds.minX=Math.min(this.bounds.minX,t.minX),this.bounds.maxX=Math.max(this.bounds.maxX,t.maxX),this.bounds.minY=Math.min(this.bounds.minY,t.minY),this.bounds.maxY=Math.max(this.bounds.maxY,t.maxY)};return this.pointOnPath=function(e,t){var n=v(e,t);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||[0,0]},this.gradientAtPoint=function(e,t){var n=v(e,t);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0},this.pointAlongPathFrom=function(e,t,n){var r=v(e,n);return r.segment&&r.segment.pointAlongPathFrom(r.proportion,t,!1)||[0,0]},this.compute=function(e){m=y.call(this,e),o=s.length=a.length=l.length=0,this._compute(m,e),this.x=m.points[0],this.y=m.points[1],this.w=m.points[2],this.h=m.points[3],this.segment=m.segment,function(){for(var e=0,t=0;t<s.length;t++){var n=s[t].getLength();l[t]=n/o,a[t]=[e,e+=n/o]}}()},{addSegment:function(e,n,r){if(r.x1!==r.x2||r.y1!==r.y2){var i=new t.Segments[n](r);s.push(i),o+=i.getLength(),e.updateBounds(i)}},prepareCompute:y,sourceStub:c,targetStub:h,maxStub:Math.max(c,h),sourceGap:f,targetGap:p,maxGap:Math.max(f,p)}},n.extend(t.Connectors.AbstractConnector,i),t.Endpoints.AbstractEndpoint=function(e){i.apply(this,arguments);var t=this.compute=function(e,t,n,r){var i=this._compute.apply(this,arguments);return this.x=i[0],this.y=i[1],this.w=i[2],this.h=i[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,i};return{compute:t,cssClass:e.cssClass}},n.extend(t.Endpoints.AbstractEndpoint,i),t.Endpoints.Dot=function(e){this.type="Dot";t.Endpoints.AbstractEndpoint.apply(this,arguments);e=e||{},this.radius=e.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(e,t,n,r){this.radius=n.radius||this.radius;var i=e[0]-this.radius,s=e[1]-this.radius,o=2*this.radius,a=2*this.radius;if(n.stroke){var l=n.strokeWidth||1;i-=l,s-=l,o+=2*l,a+=2*l}return[i,s,o,a,this.radius]}},n.extend(t.Endpoints.Dot,t.Endpoints.AbstractEndpoint),t.Endpoints.Rectangle=function(e){this.type="Rectangle";t.Endpoints.AbstractEndpoint.apply(this,arguments);e=e||{},this.width=e.width||20,this.height=e.height||20,this._compute=function(e,t,n,r){var i=n.width||this.width,s=n.height||this.height;return[e[0]-i/2,e[1]-s/2,i,s]}},n.extend(t.Endpoints.Rectangle,t.Endpoints.AbstractEndpoint);var s=function(e){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};n.extend(s,t.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(e){this._jsPlumb.displayElements.push(e)}}),t.Endpoints.Image=function(r){this.type="Image",s.apply(this,arguments),t.Endpoints.AbstractEndpoint.apply(this,arguments);var i=r.onload,o=r.src||r.url,a=r.cssClass?" "+r.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=r.width,this._jsPlumb.heightToUse=r.height,this._jsPlumb.endpoint=r.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,i&&i(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(e,t){var n=e.constructor===String?e:e.src;i=t,this._jsPlumb.img.src=n,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(o,i),this._compute=function(e,t,n,r){return this.anchorPoint=e,this._jsPlumb.ready?[e[0]-this._jsPlumb.widthToUse/2,e[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=t.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(e,t,r){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var i=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,s=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,i,s,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(t,n){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(t,n):e.setTimeout(function(){this.paint(t,n)}.bind(this),200))}},n.extend(t.Endpoints.Image,[s,t.Endpoints.AbstractEndpoint],{cleanup:function(e){e&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),t.Endpoints.Blank=function(e){t.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",s.apply(this,arguments),this._compute=function(e,t,n,r){return[e[0],e[1],10,0]};var r=e.cssClass?" "+e.cssClass:"";this.canvas=t.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+r),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(e,t){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},n.extend(t.Endpoints.Blank,[t.Endpoints.AbstractEndpoint,s],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),t.Endpoints.Triangle=function(e){this.type="Triangle",t.Endpoints.AbstractEndpoint.apply(this,arguments);var n=this;(e=e||{}).width=e.width||55,e.height=e.height||55,this.width=e.width,this.height=e.height,this._compute=function(e,t,r,i){var s=r.width||n.width,o=r.height||n.height;return[e[0]-s/2,e[1]-o/2,s,o]}};var o=t.Overlays.AbstractOverlay=function(e){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=e.component,this.loc=null==e.location?.5:e.location,this.endpointLoc=null==e.endpointLocation?[.5,.5]:e.endpointLocation,this.visible=!1!==e.visible};o.prototype={cleanup:function(e){e&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(e,t){},setVisible:function(e){this.visible=e,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(e){this.loc+=e,this.component.repaint()},setLocation:function(e){this.loc=e,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},t.Overlays.Arrow=function(e){this.type="Arrow",o.apply(this,arguments),this.isAppendedAtTopLevel=!1,e=e||{};var i=this;this.length=e.length||20,this.width=e.width||20,this.id=e.id,this.direction=(e.direction||1)<0?-1:1;var s=e.paintStyle||{"stroke-width":1},a=e.foldback||.623;this.computeMaxSize=function(){return 1.5*i.width},this.elementCreated=function(n,r){if(this.path=n,e.events)for(var i in e.events)t.on(n,i,e.events[i])},this.draw=function(e,t){var i,o,l,u;if(e.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var c=parseInt(this.loc,10),h=this.loc<0?1:0;i=e.pointAlongPathFrom(h,c,!1),o=e.pointAlongPathFrom(h,c-this.direction*this.length/2,!1),l=r.pointOnLine(i,o,this.length)}else if(1===this.loc){if(i=e.pointOnPath(this.loc),o=e.pointAlongPathFrom(this.loc,-this.length),l=r.pointOnLine(i,o,this.length),-1===this.direction){var d=l;l=i,i=d}}else if(0===this.loc){if(l=e.pointOnPath(this.loc),o=e.pointAlongPathFrom(this.loc,this.length),i=r.pointOnLine(l,o,this.length),-1===this.direction){var f=l;l=i,i=f}}else i=e.pointAlongPathFrom(this.loc,this.direction*this.length/2),o=e.pointOnPath(this.loc),l=r.pointOnLine(i,o,this.length);var p={hxy:i,tail:u=r.perpendicularLineTo(i,l,this.width),cxy:r.pointOnLine(i,l,a*this.length)},g=s.stroke||t.stroke,m=s.fill||t.stroke;return{component:e,d:p,"stroke-width":s.strokeWidth||t.strokeWidth,stroke:g,fill:m,minX:Math.min(i.x,u[0].x,u[1].x),maxX:Math.max(i.x,u[0].x,u[1].x),minY:Math.min(i.y,u[0].y,u[1].y),maxY:Math.max(i.y,u[0].y,u[1].y)}}return{component:e,minX:0,maxX:0,minY:0,maxY:0}}},n.extend(t.Overlays.Arrow,o,{updateFrom:function(e){this.length=e.length||this.length,this.width=e.width||this.width,this.direction=null!=e.direction?e.direction:this.direction,this.foldback=e.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),t.Overlays.PlainArrow=function(e){e=e||{};var n=t.extend(e,{foldback:1});t.Overlays.Arrow.call(this,n),this.type="PlainArrow"},n.extend(t.Overlays.PlainArrow,t.Overlays.Arrow),t.Overlays.Diamond=function(e){var n=(e=e||{}).length||40,r=t.extend(e,{length:n/2,foldback:2});t.Overlays.Arrow.call(this,r),this.type="Diamond"},n.extend(t.Overlays.Diamond,t.Overlays.Arrow);var a=function(e,t){return(null==e._jsPlumb.cachedDimensions||t)&&(e._jsPlumb.cachedDimensions=e.getDimensions()),e._jsPlumb.cachedDimensions},l=function(e){t.jsPlumbUIComponent.apply(this,arguments),o.apply(this,arguments);var r=this.fire;this.fire=function(){r.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=e.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=e.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=e.create,this._jsPlumb.initiallyInvisible=!1===e.visible,this.getElement=function(){if(null==this._jsPlumb.div){var n=this._jsPlumb.div=t.getElement(this._jsPlumb.create(this._jsPlumb.component));n.style.position="absolute",jsPlumb.addClass(n,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:e.cssClass?e.cssClass:"")),this._jsPlumb.instance.appendElement(n),this._jsPlumb.instance.getId(n),this.canvas=n;var r="translate(-50%, -50%)";n.style.webkitTransform=r,n.style.mozTransform=r,n.style.msTransform=r,n.style.oTransform=r,n.style.transform=r,n._jsPlumb=this,!1===e.visible&&(n.style.display="none")}return this._jsPlumb.div},this.draw=function(e,t,r){var i=a(this);if(null!=i&&2===i.length){var s={x:0,y:0};if(r)s={x:r[0],y:r[1]};else if(e.pointOnPath){var o=this.loc,l=!1;(n.isString(this.loc)||this.loc<0||this.loc>1)&&(o=parseInt(this.loc,10),l=!0),s=e.pointOnPath(o,l)}else{var u=this.loc.constructor===Array?this.loc:this.endpointLoc;s={x:u[0]*e.w,y:u[1]*e.h}}var c=s.x-i[0]/2,h=s.y-i[1]/2;return{component:e,d:{minx:c,miny:h,td:i,cxy:s},minX:c,maxX:c+i[0],minY:h,maxY:h+i[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};n.extend(l,[t.jsPlumbUIComponent,o],{getDimensions:function(){return[1,1]},setVisible:function(e){this._jsPlumb.div&&(this._jsPlumb.div.style.display=e?"block":"none",e&&this._jsPlumb.initiallyInvisible&&(a(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(e){e?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(e,t){null!=this._jsPlumb.div&&e.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var e=a(this);return Math.max(e[0],e[1])},paint:function(e,t){this._jsPlumb.initialised||(this.getElement(),e.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=e.component.x+e.d.minx+"px",this._jsPlumb.div.style.top=e.component.y+e.d.miny+"px"}}),t.Overlays.Custom=function(e){this.type="Custom",l.apply(this,arguments)},n.extend(t.Overlays.Custom,l),t.Overlays.GuideLines=function(){var e=this;e.length=50,e.strokeWidth=5,this.type="GuideLines",o.apply(this,arguments),t.jsPlumbUIComponent.apply(this,arguments),this.draw=function(t,n){var i=t.pointAlongPathFrom(e.loc,e.length/2),s=t.pointOnPath(e.loc),o=r.pointOnLine(i,s,e.length),a=r.perpendicularLineTo(i,o,40),l=r.perpendicularLineTo(o,i,20);return{connector:t,head:i,tail:o,headLine:l,tailLine:a,minX:Math.min(i.x,o.x,l[0].x,l[1].x),minY:Math.min(i.y,o.y,l[0].y,l[1].y),maxX:Math.max(i.x,o.x,l[0].x,l[1].x),maxY:Math.max(i.y,o.y,l[0].y,l[1].y)}}},t.Overlays.Label=function(e){this.labelStyle=e.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var n=t.extend({create:function(){return t.createElement("div")}},e);if(t.Overlays.Custom.call(this,n),this.type="Label",this.label=e.label||"",this.labelText=null,this.labelStyle){var r=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",r.style.font=this.labelStyle.font,r.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(r.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var i=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";r.style.border=this.labelStyle.borderWidth+"px solid "+i}this.labelStyle.padding&&(r.style.padding=this.labelStyle.padding)}},n.extend(t.Overlays.Label,t.Overlays.Custom,{cleanup:function(e){e&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(e){this.label=e,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"===typeof this.label){var e=this.label(this);this.getElement().innerHTML=e.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(e){null!=e.label&&this.setLabel(e.label)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumbUtil,n=e.jsPlumbInstance,r="jtk-group-collapsed",i="jtk-group-expanded",s="stop",o="revert",a="_groupManager",l="_jsPlumbGroup",u=function(e){var n={},s={},o={},a=this;function u(t,n){for(var r=e.getContainer();;){if(null==t||t===r)return!1;if(t===n)return!0;t=t.parentNode}}function c(t,n){for(var r=t.getEl().querySelectorAll(".jtk-managed"),i=0;i<r.length;i++)e[n?"show":"hide"](r[i],!0)}e.bind("connection",(function(n){var r=e.getGroupFor(n.source),i=e.getGroupFor(n.target);null!=r&&null!=i&&r===i?(s[n.connection.id]=r,o[n.connection.id]=r):(null!=r&&(t.suggest(r.connections.source,n.connection),s[n.connection.id]=r),null!=i&&(t.suggest(i.connections.target,n.connection),o[n.connection.id]=i))})),e.bind("internal.connectionDetached",(function(e){!function(e){delete e.proxies;var n,r=s[e.id];null!=r&&(n=function(t){return t.id===e.id},t.removeWithFunction(r.connections.source,n),t.removeWithFunction(r.connections.target,n),delete s[e.id]),null!=(r=o[e.id])&&(n=function(t){return t.id===e.id},t.removeWithFunction(r.connections.source,n),t.removeWithFunction(r.connections.target,n),delete o[e.id])}(e.connection)})),e.bind("connectionMoved",(function(e){var t=(0===e.index?s:o)[e.connection.id];if(t){var n=t.connections[0===e.index?"source":"target"],r=n.indexOf(e.connection);-1!==r&&n.splice(r,1)}})),this.addGroup=function(t){e.addClass(t.getEl(),i),n[t.id]=t,t.manager=this,f(t),e.fire("group:add",{group:t})},this.addToGroup=function(t,n,r){if(t=this.getGroup(t)){var i=t.getEl();if(n._isJsPlumbGroup)return;var s=n._jsPlumbGroup;if(s!==t){e.removeFromDragSelection(n);var o=e.getOffset(n,!0),l=t.collapsed?e.getOffset(i,!0):e.getOffset(t.getDragArea(),!0);null!=s&&(s.remove(n,!1,r,!1,t),a.updateConnectionsForGroup(s)),t.add(n,r);var u=function(e,n){var r=0===n?1:0;e.each((function(e){e.setVisible(!1),e.endpoints[r].element._jsPlumbGroup===t?(e.endpoints[r].setVisible(!1),d(e,r,t)):(e.endpoints[n].setVisible(!1),h(e,n,t))}))};t.collapsed&&(u(e.select({source:n}),0),u(e.select({target:n}),1));var c=e.getId(n);e.dragManager.setParent(n,c,i,e.getId(i),o);var f={left:o.left-l.left,top:o.top-l.top};if(e.setPosition(n,f),e.dragManager.revalidateParent(n,c,o),a.updateConnectionsForGroup(t),e.revalidate(c),!r){var p={group:t,el:n,pos:f};s&&(p.sourceGroup=s),e.fire("group:addMember",p)}}}},this.removeFromGroup=function(e,t,n){if(e=this.getGroup(e)){if(e.collapsed){var r=function(n,r){for(var i=0;i<n.length;i++){var s=n[i];if(s.proxies)for(var o=0;o<s.proxies.length;o++)if(null!=s.proxies[o]){var a=s.proxies[o].originalEp.element;(a===t||u(a,t))&&d(s,r,e)}}};r(e.connections.source.slice(),0),r(e.connections.target.slice(),1)}e.remove(t,null,n)}},this.getGroup=function(e){var r=e;if(t.isString(e)&&null==(r=n[e]))throw new TypeError("No such group ["+e+"]");return r},this.getGroups=function(){var e=[];for(var t in n)e.push(n[t]);return e},this.removeGroup=function(t,r,i,s){t=this.getGroup(t),this.expandGroup(t,!0);var o=t[r?"removeAll":"orphanAll"](i,s);return e.remove(t.getEl()),delete n[t.id],delete e._groups[t.id],e.fire("group:remove",{group:t}),o},this.removeAllGroups=function(e,t,r){for(var i in n)this.removeGroup(n[i],e,t,r)};var h=function(t,n,r){var i=t.endpoints[0===n?1:0].element;if(!i[l]||i[l].shouldProxy()||!i[l].collapsed){var s=r.getEl(),o=e.getId(s);e.proxyConnection(t,n,s,o,(function(e,t){return r.getEndpoint(e,t)}),(function(e,t){return r.getAnchor(e,t)}))}};this.collapseGroup=function(t){if(null!=(t=this.getGroup(t))&&!t.collapsed){var n=t.getEl();if(c(t,!1),t.shouldProxy()){var s=function(e,n){for(var r=0;r<e.length;r++){var i=e[r];h(i,n,t)}};s(t.connections.source,0),s(t.connections.target,1)}t.collapsed=!0,e.removeClass(n,i),e.addClass(n,r),e.revalidate(n),e.fire("group:collapse",{group:t})}};var d=function(t,n,r){e.unproxyConnection(t,n,e.getId(r.getEl()))};function f(t){for(var n=t.getMembers().slice(),r=[],i=0;i<n.length;i++)Array.prototype.push.apply(r,n[i].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(n,r);var a=e.getConnections({source:n,scope:"*"},!0),l=e.getConnections({target:n,scope:"*"},!0),u={};t.connections.source.length=0,t.connections.target.length=0;var c=function(n){for(var r=0;r<n.length;r++)if(!u[n[r].id]){u[n[r].id]=!0;var i=e.getGroupFor(n[r].source),a=e.getGroupFor(n[r].target);i===t?(a!==t&&t.connections.source.push(n[r]),s[n[r].id]=t):a===t&&(t.connections.target.push(n[r]),o[n[r].id]=t)}};c(a),c(l)}this.expandGroup=function(t,n){if(null!=(t=this.getGroup(t))&&t.collapsed){var s=t.getEl();if(c(t,!0),t.shouldProxy()){var o=function(e,n){for(var r=0;r<e.length;r++){var i=e[r];d(i,n,t)}};o(t.connections.source,0),o(t.connections.target,1)}t.collapsed=!1,e.addClass(s,i),e.removeClass(s,r),e.revalidate(s),this.repaintGroup(t),n||e.fire("group:expand",{group:t})}},this.repaintGroup=function(t){for(var n=(t=this.getGroup(t)).getMembers(),r=0;r<n.length;r++)e.revalidate(n[r])},this.updateConnectionsForGroup=f,this.refreshAllGroups=function(){for(var t in n)f(n[t]),e.dragManager.updateOffsets(e.getId(n[t].getEl()))}},c=function(n,r){var i=this,a=r.el;this.getEl=function(){return a},this.id=r.id||t.uuid(),a._isJsPlumbGroup=!0;var u=this.getDragArea=function(){var e=n.getSelector(a,"[jtk-group-content]");return e&&e.length>0?e[0]:a},c=!0===r.ghost,h=c||!0===r.constrain,d=!1!==r.revert,f=!0===r.orphan,p=!0===r.prune,g=!0===r.dropOverride,m=!1!==r.proxied,v=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(e,t){return r.anchor||"Continuous"},this.getEndpoint=function(e,t){return r.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==r.draggable){var y={drag:function(){for(var e=0;e<v.length;e++)n.draw(v[e])},stop:function(e){n.fire("groupDragStop",jsPlumb.extend(e,{group:i}))},scope:"_jsPlumbGroupDrag"};r.dragOptions&&e.jsPlumb.extend(y,r.dragOptions),n.draggable(r.el,y)}!1!==r.droppable&&n.droppable(r.el,{drop:function(e){var t=e.drag.el;if(!t._isJsPlumbGroup){var r=t._jsPlumbGroup;if(r!==i){if(null!=r&&r.overrideDrop(t,i))return;n.getGroupManager().addToGroup(i,t,!1)}}}});var b=function(e,t){for(var n=null==e.nodeType?e:[e],r=0;r<n.length;r++)t(n[r])};function w(e,t){var r=function(e){return e.offsetParent}(e),i=n.getSize(r),s=n.getSize(e),o=t[0],a=o+s[0],l=t[1],u=l+s[1];return a>0&&o<i[0]&&u>0&&l<i[1]}function _(e){var t=n.getId(e),r=n.getOffset(e);return e.parentNode.removeChild(e),n.getContainer().appendChild(e),n.setPosition(e,r),C(e),n.dragManager.clearParent(e,t),[t,r]}function E(e){var t=[];function r(e,t,r){var i=null;if(!w(e,[t,r])){var s=e._jsPlumbGroup;p?n.remove(e):i=_(e),s.remove(e)}return i}for(var i=0;i<e.selection.length;i++)t.push(r(e.selection[i][0],e.selection[i][1].left,e.selection[i][1].top));return 1===t.length?t[0]:t}function S(e){var t=n.getId(e);n.revalidate(e),n.dragManager.revalidateParent(e,t)}function C(e){e._katavorioDrag&&((p||f)&&e._katavorioDrag.off(s,E),p||f||!d||(e._katavorioDrag.off(o,S),e._katavorioDrag.setRevert(null)))}function P(e){e._katavorioDrag&&((p||f)&&e._katavorioDrag.on(s,E),h&&e._katavorioDrag.setConstrain(!0),c&&e._katavorioDrag.setUseGhostProxy(!0),p||f||!d||(e._katavorioDrag.on(o,S),e._katavorioDrag.setRevert((function(e,t){return!w(e,t)}))))}this.overrideDrop=function(e,t){return g&&(d||p||f)},this.add=function(e,t){var r=u();b(e,(function(e){if(null!=e._jsPlumbGroup){if(e._jsPlumbGroup===i)return;e._jsPlumbGroup.remove(e,!0,t,!1)}e._jsPlumbGroup=i,v.push(e),n.isAlreadyDraggable(e)&&P(e),e.parentNode!==r&&r.appendChild(e)})),n.getGroupManager().updateConnectionsForGroup(i)},this.remove=function(e,r,s,o,a){b(e,(function(e){if(e._jsPlumbGroup===i){if(delete e._jsPlumbGroup,t.removeWithFunction(v,(function(t){return t===e})),r)try{i.getDragArea().removeChild(e)}catch(l){jsPlumbUtil.log("Could not remove element from Group "+l)}if(C(e),!s){var o={group:i,el:e};a&&(o.targetGroup=a),n.fire("group:removeMember",o)}}})),o||n.getGroupManager().updateConnectionsForGroup(i)},this.removeAll=function(e,t){for(var r=0,s=v.length;r<s;r++){var o=v[0];i.remove(o,e,t,!0),n.remove(o,!0)}v.length=0,n.getGroupManager().updateConnectionsForGroup(i)},this.orphanAll=function(){for(var e={},t=0;t<v.length;t++){var n=_(v[t]);e[n[0]]=n[1]}return v.length=0,e},this.getMembers=function(){return v},a[l]=this,n.bind("elementDraggable",function(e){e.el._jsPlumbGroup===this&&P(e.el)}.bind(this)),this.shouldProxy=function(){return m},n.getGroupManager().addGroup(this)};n.prototype.addGroup=function(e){var t=this;if(t._groups=t._groups||{},null!=t._groups[e.id])throw new TypeError("cannot create Group ["+e.id+"]; a Group with that ID exists");if(null!=e.el[l])throw new TypeError("cannot create Group ["+e.id+"]; the given element is already a Group");var n=new c(t,e);return t._groups[n.id]=n,e.collapsed&&this.collapseGroup(n),n},n.prototype.addToGroup=function(e,t,n){var r=function(t){var r=this.getId(t);this.manage(r,t),this.getGroupManager().addToGroup(e,t,n)}.bind(this);if(Array.isArray(t))for(var i=0;i<t.length;i++)r(t[i]);else r(t)},n.prototype.removeFromGroup=function(e,t,n){this.getGroupManager().removeFromGroup(e,t,n),this.getContainer().appendChild(t)},n.prototype.removeGroup=function(e,t,n,r){return this.getGroupManager().removeGroup(e,t,n,r)},n.prototype.removeAllGroups=function(e,t,n){this.getGroupManager().removeAllGroups(e,t,n)},n.prototype.getGroup=function(e){return this.getGroupManager().getGroup(e)},n.prototype.getGroups=function(){return this.getGroupManager().getGroups()},n.prototype.expandGroup=function(e){this.getGroupManager().expandGroup(e)},n.prototype.collapseGroup=function(e){this.getGroupManager().collapseGroup(e)},n.prototype.repaintGroup=function(e){this.getGroupManager().repaintGroup(e)},n.prototype.toggleGroup=function(e){null!=(e=this.getGroupManager().getGroup(e))&&this.getGroupManager()[e.collapsed?"expandGroup":"collapseGroup"](e)},n.prototype.getGroupManager=function(){var e=this[a];return null==e&&(e=this[a]=new u(this)),e},n.prototype.removeGroupManager=function(){delete this[a]},n.prototype.getGroupFor=function(e){if(e=this.getElement(e)){for(var t=this.getContainer(),n=!1,r=null;!n;)null==e||e===t?n=!0:e[l]?(r=e[l],n=!0):e=e.parentNode;return r}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.jsPlumb,t=this.jsPlumbUtil,n="Straight";e.Connectors.Flowchart=function(t){this.type="Flowchart",(t=t||{}).stub=null==t.stub?30:t.stub;var r,i=e.Connectors.AbstractConnector.apply(this,arguments),s=null==t.midpoint||isNaN(t.midpoint)?.5:t.midpoint,o=!0===t.alwaysRespectStubs,a=null,l=null,u=null!=t.cornerRadius?t.cornerRadius:0,c=(t.loopbackRadius,function(e){return e<0?-1:0===e?0:1}),h=function(e){return[c(e[2]-e[0]),c(e[3]-e[1])]},d=function(e,t,n,r){if(a!==t||l!==n){var i=null==a?r.sx:a,s=null==l?r.sy:l,o=i===t?"v":"h";a=t,l=n,e.push([i,s,t,n,o])}},f=function(e){return Math.sqrt(Math.pow(e[0]-e[2],2)+Math.pow(e[1]-e[3],2))},p=function(e){var t=[];return t.push.apply(t,e),t};this.midpoint=s,this._compute=function(e,t){r=[],a=null,l=null,null;var c=function(){return[e.startStubX,e.startStubY,e.endStubX,e.endStubY]},g={perpendicular:c,orthogonal:c,opposite:function(t){var n=e,r="x"===t?0:1;return!o&&{x:function(){return 1===n.so[r]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1===n.so[r]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1===n.so[r]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1===n.so[r]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}}[t]()?{x:[(e.sx+e.tx)/2,e.startStubY,(e.sx+e.tx)/2,e.endStubY],y:[e.startStubX,(e.sy+e.ty)/2,e.endStubX,(e.sy+e.ty)/2]}[t]:[e.startStubX,e.startStubY,e.endStubX,e.endStubY]}},m=g[e.anchorOrientation](e.sourceAxis),v="x"===e.sourceAxis?0:1,y="x"===e.sourceAxis?1:0,b=m[v],w=m[y],_=m[v+2],E=m[y+2];d(r,m[0],m[1],e);var S=e.startStubX+(e.endStubX-e.startStubX)*s,C=e.startStubY+(e.endStubY-e.startStubY)*s,P={x:[0,1],y:[1,0]},k={perpendicular:function(t){var n=e,r={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},i={x:[[S,n.startStubY],[S,n.endStubY]],y:[[n.startStubX,C],[n.endStubX,C]]},s={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},o={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},a={x:[[n.startStubX,C],[n.endStubX,C],[n.endStubX,n.endStubY]],y:[[S,n.startStubY],[S,n.endStubY],[n.endStubX,n.endStubY]]},l={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},u=P[t][0],c=P[t][1],h=n.so[u]+1,d=n.to[c]+1,f=-1===n.to[c]&&l[t][1]<l[t][0]||1===n.to[c]&&l[t][1]>l[t][0],p=r[t][h][0],g=r[t][h][1],m={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[t][h][d];return n.segment===m[3]||n.segment===m[2]&&f?i[t]:n.segment===m[2]&&g<p?s[t]:n.segment===m[2]&&g>=p||n.segment===m[1]&&!f?a[t]:n.segment===m[0]||n.segment===m[1]&&f?o[t]:void 0},orthogonal:function(t,n,r,i,s){var o=e,a={x:-1===o.so[0]?Math.min(n,i):Math.max(n,i),y:-1===o.so[1]?Math.min(n,i):Math.max(n,i)}[t];return{x:[[a,r],[a,s],[i,s]],y:[[r,a],[s,a],[s,i]]}[t]},opposite:function(n,r,s,o){var a=e,l={x:"y",y:"x"}[n],u={x:"height",y:"width"}[n],c=a["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(t.sourceEndpoint.elementId===t.targetEndpoint.elementId){var h=s+(1-t.sourceEndpoint.anchor[l])*t.sourceInfo[u]+i.maxStub;return{x:[[r,h],[o,h]],y:[[h,r],[h,o]]}[n]}return!c||1===a.so[v]&&r>o||-1===a.so[v]&&r<o?{x:[[r,C],[o,C]],y:[[S,r],[S,o]]}[n]:1===a.so[v]&&r<o||-1===a.so[v]&&r>o?{x:[[S,a.sy],[S,a.ty]],y:[[a.sx,C],[a.tx,C]]}[n]:void 0}},I=k[e.anchorOrientation](e.sourceAxis,b,w,_,E);if(I)for(var T=0;T<I.length;T++)d(r,I[T][0],I[T][1],e);d(r,m[2],m[3],e),d(r,e.tx,e.ty,e),function(e,t,r){for(var s,o,a,l=null,c=0;c<t.length-1;c++){if(l=l||p(t[c]),s=p(t[c+1]),o=h(l),a=h(s),u>0&&l[4]!==s[4]){var d=Math.min(f(l),f(s)),g=Math.min(u,d/2);l[2]-=o[0]*g,l[3]-=o[1]*g,s[0]+=a[0]*g,s[1]+=a[1]*g;var m=o[1]===a[0]&&1===a[0]||o[1]===a[0]&&0===a[0]&&o[0]!==a[1]||o[1]===a[0]&&-1===a[0],v=(s[1]>l[3]?1:-1)===(s[0]>l[2]?1:-1),y=v&&m||!v&&!m?s[0]:l[2],b=v&&m||!v&&!m?l[3]:s[1];i.addSegment(e,n,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),i.addSegment(e,"Arc",{r:g,x1:l[2],y1:l[3],x2:s[0],y2:s[1],cx:y,cy:b,ac:m})}else{var w=l[2]===l[0]?0:l[2]>l[0]?r.lw/2:-r.lw/2,_=l[3]===l[1]?0:l[3]>l[1]?r.lw/2:-r.lw/2;i.addSegment(e,n,{x1:l[0]-w,y1:l[1]-_,x2:l[2]+w,y2:l[3]+_})}l=s}null!=s&&i.addSegment(e,n,{x1:s[0],y1:s[1],x2:s[2],y2:s[3]})}(this,r,e)}},t.extend(e.Connectors.Flowchart,e.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.jsPlumb,t=this.jsPlumbUtil;e.Connectors.AbstractBezierConnector=function(t){var n,r=!1!==(t=t||{}).showLoopback,i=(t.curviness,t.margin||5),s=(t.proximityLimit,t.orientation&&"clockwise"===t.orientation),o=t.loopbackRadius||25;return this._compute=function(e,t){var a=t.sourcePos,l=t.targetPos,u=Math.abs(a[0]-l[0]),c=Math.abs(a[1]-l[1]);if(r&&t.sourceEndpoint.elementId===t.targetEndpoint.elementId){!0;var h=t.sourcePos[0],d=t.sourcePos[1]-i,f=h,p=d-o,g=f-o,m=p-o;u=2*o,c=2*o,e.points[0]=g,e.points[1]=m,e.points[2]=u,e.points[3]=c,n.addSegment(this,"Arc",{loopback:!0,x1:h-g+4,y1:d-m,startAngle:0,endAngle:2*Math.PI,r:o,ac:!s,x2:h-g-4,y2:d-m,cx:f-g,cy:p-m})}else this._computeBezier(e,t,a,l,u,c)},n=e.Connectors.AbstractConnector.apply(this,arguments)},t.extend(e.Connectors.AbstractBezierConnector,e.Connectors.AbstractConnector);var n=function(t){t=t||{},this.type="Bezier";var n=e.Connectors.AbstractBezierConnector.apply(this,arguments),r=t.curviness||150,i=10;this.getCurviness=function(){return r},this._findControlPoint=function(e,t,n,s,o,a,l){var u=[];return a[0]!==l[0]||a[1]===l[1]?(0===l[0]?u.push(n[0]<t[0]?e[0]+i:e[0]-i):u.push(e[0]+r*l[0]),0===l[1]?u.push(n[1]<t[1]?e[1]+i:e[1]-i):u.push(e[1]+r*a[1])):(0===a[0]?u.push(t[0]<n[0]?e[0]+i:e[0]-i):u.push(e[0]-r*a[0]),0===a[1]?u.push(t[1]<n[1]?e[1]+i:e[1]-i):u.push(e[1]+r*l[1])),u},this._computeBezier=function(e,t,r,i,s,o){var a,l,u=r[0]<i[0]?s:0,c=r[1]<i[1]?o:0,h=r[0]<i[0]?0:s,d=r[1]<i[1]?0:o;a=this._findControlPoint([u,c],r,i,t.sourceEndpoint,t.targetEndpoint,e.so,e.to),l=this._findControlPoint([h,d],i,r,t.targetEndpoint,t.sourceEndpoint,e.to,e.so),n.addSegment(this,"Bezier",{x1:u,y1:c,x2:h,y2:d,cp1x:a[0],cp1y:a[1],cp2x:l[0],cp2y:l[1]})}};e.Connectors.Bezier=n,t.extend(n,e.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.jsPlumb,t=this.jsPlumbUtil,n=function(t){t=t||{},this.type="StateMachine";var n,r=e.Connectors.AbstractBezierConnector.apply(this,arguments),i=t.curviness||10,s=t.margin||5,o=t.proximityLimit||80;t.orientation&&t.orientation;this._computeBezier=function(e,t,a,l,u,c){var h=t.sourcePos[0]<t.targetPos[0]?0:u,d=t.sourcePos[1]<t.targetPos[1]?0:c,f=t.sourcePos[0]<t.targetPos[0]?u:0,p=t.sourcePos[1]<t.targetPos[1]?c:0;0===t.sourcePos[2]&&(h-=s),1===t.sourcePos[2]&&(h+=s),0===t.sourcePos[3]&&(d-=s),1===t.sourcePos[3]&&(d+=s),0===t.targetPos[2]&&(f-=s),1===t.targetPos[2]&&(f+=s),0===t.targetPos[3]&&(p-=s),1===t.targetPos[3]&&(p+=s);var g,m,v,y,b,w,_,E,S=(h+f)/2,C=(d+p)/2,P=(w=d,E=p,(b=h)<=(_=f)&&E<=w?1:b<=_&&w<=E?2:_<=b&&E>=w?3:4),k=Math.sqrt(Math.pow(f-h,2)+Math.pow(p-d,2));n=function(e,t,n,r,i,s,o,a,l){return a<=l?[e,t]:1===n?r[3]<=0&&i[3]>=1?[e+(r[2]<.5?-1*s:s),t]:r[2]>=1&&i[2]<=0?[e,t+(r[3]<.5?-1*o:o)]:[e+-1*s,t+-1*o]:2===n?r[3]>=1&&i[3]<=0?[e+(r[2]<.5?-1*s:s),t]:r[2]>=1&&i[2]<=0?[e,t+(r[3]<.5?-1*o:o)]:[e+s,t+-1*o]:3===n?r[3]>=1&&i[3]<=0?[e+(r[2]<.5?-1*s:s),t]:r[2]<=0&&i[2]>=1?[e,t+(r[3]<.5?-1*o:o)]:[e+-1*s,t+-1*o]:4===n?r[3]<=0&&i[3]>=1?[e+(r[2]<.5?-1*s:s),t]:r[2]<=0&&i[2]>=1?[e,t+(r[3]<.5?-1*o:o)]:[e+s,t+-1*o]:void 0}(S,C,P,t.sourcePos,t.targetPos,i,i,k,o),g=n[0],m=n[0],v=n[1],y=n[1],r.addSegment(this,"Bezier",{x1:f,y1:p,x2:h,y2:d,cp1x:g,cp1y:v,cp2x:m,cp2y:y})}};e.Connectors.StateMachine=n,t.extend(n,e.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.jsPlumb,t=this.jsPlumbUtil,n="Straight",r=function(t){this.type=n;var r=e.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(e,t){r.addSegment(this,n,{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),r.addSegment(this,n,{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),r.addSegment(this,n,{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty})}};e.Connectors.Straight=r,t.extend(r,e.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this.jsPlumb,t=this.jsPlumbUtil,n={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},r="stroke-dasharray",i="dashstyle",s="fill",o="stroke",a="none",l="http://www.w3.org/2000/svg",u=function(e,t){for(var n in t)e.setAttribute(n,""+t[n])},c=function(t,n){return(n=n||{}).version="1.1",n.xmlns=l,e.createElementNS(l,t,null,null,n)},h=function(e){return"position:absolute;left:"+e[0]+"px;top:"+e[1]+"px"},d=function(e){for(var t=e.querySelectorAll(" defs,linearGradient,radialGradient"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])},f=function(e,t,l,u,h){if(t.setAttribute(s,l.fill?l.fill:a),t.setAttribute(o,l.stroke?l.stroke:a),l.gradient?function(e,t,n,r,i){var a,l="jsplumb_gradient_"+i._jsPlumb.instance.idstamp();d(e),a=n.gradient.offset?c("radialGradient",{id:l}):c("linearGradient",{id:l,gradientUnits:"userSpaceOnUse"});var u=c("defs");e.appendChild(u),u.appendChild(a);for(var h=0;h<n.gradient.stops.length;h++){var f=1===i.segment||2===i.segment?h:n.gradient.stops.length-1-h,p=n.gradient.stops[f][1],g=c("stop",{offset:Math.floor(100*n.gradient.stops[h][0])+"%","stop-color":p});a.appendChild(g)}var m=n.stroke?o:s;t.setAttribute(m,"url(#"+l+")")}(e,t,l,0,h):(d(e),t.setAttribute("style","")),l.strokeWidth&&t.setAttribute("stroke-width",l.strokeWidth),l[i]&&l.strokeWidth&&!l[r]){var f=-1===l[i].indexOf(",")?" ":",",p=l[i].split(f),g="";p.forEach((function(e){g+=Math.floor(e*l.strokeWidth)+f})),t.setAttribute(r,g)}else l[r]&&t.setAttribute(r,l[r]);for(var m in n)l[m]&&t.setAttribute(n[m],l[m])},p=function(e,t,n){e.childNodes.length>n?e.insertBefore(t,e.childNodes[n]):e.appendChild(t)};t.svg={node:c,attr:u,pos:h};var g=function(n){var r=n.pointerEventsSpec||"all",i={};e.jsPlumbUIComponent.apply(this,n.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var s=n.cssClass+" "+(n.originalArgs[0].cssClass||""),o={style:"",width:0,height:0,"pointer-events":r,position:"absolute"};this.svg=c("svg",o),n.useDivWrapper?(this.canvas=e.createElement("div",{position:"absolute"}),t.sizeElement(this.canvas,0,0,1,1),this.canvas.className=s):(u(this.svg,{class:s}),this.canvas=this.svg),n._jsPlumb.appendElement(this.canvas,n.originalArgs[0].parent),n.useDivWrapper&&this.canvas.appendChild(this.svg);var a=[this.canvas];return this.getDisplayElements=function(){return a},this.appendDisplayElement=function(e){a.push(e)},this.paint=function(e,r,s){if(null!=e){var o,a=[this.x,this.y],l=[this.w,this.h];null!=s&&(s.xmin<0&&(a[0]+=s.xmin),s.ymin<0&&(a[1]+=s.ymin),l[0]=s.xmax+(s.xmin<0?-s.xmin:0),l[1]=s.ymax+(s.ymin<0?-s.ymin:0)),n.useDivWrapper?(t.sizeElement(this.canvas,a[0],a[1],l[0]>0?l[0]:1,l[1]>0?l[1]:1),a[0]=0,a[1]=0,o=h([0,0])):o=h([a[0],a[1]]),i.paint.apply(this,arguments),u(this.svg,{style:o,width:l[0]||1,height:l[1]||1})}},{renderer:i}};t.extend(g,e.jsPlumbUIComponent,{cleanup:function(e){e||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(e){var t=e.getContainer();this.canvas&&null==this.canvas.parentNode&&t.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&t.appendChild(this.bgCanvas)},setVisible:function(e){this.canvas&&(this.canvas.style.display=e?"block":"none")}}),e.ConnectorRenderers.svg=function(t){var n=this;g.apply(this,[{cssClass:t._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]).renderer.paint=function(r,i,s){var o=n.getSegments(),a=[0,0];if(s.xmin<0&&(a[0]=-s.xmin),s.ymin<0&&(a[1]=-s.ymin),o.length>0){var l={d:n.getPathData(),transform:"translate("+a[0]+","+a[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},h=null;n.x,n.y,n.w,n.h;if(r.outlineStroke){var d=r.outlineWidth||1,g=r.strokeWidth+2*d;delete(h=e.extend({},r)).gradient,h.stroke=r.outlineStroke,h.strokeWidth=g,null==n.bgPath?(n.bgPath=c("path",l),e.addClass(n.bgPath,e.connectorOutlineClass),p(n.svg,n.bgPath,0)):u(n.bgPath,l),f(n.svg,n.bgPath,h,0,n)}null==n.path?(n.path=c("path",l),p(n.svg,n.path,r.outlineStroke?1:0)):u(n.path,l),f(n.svg,n.path,r,0,n)}}},t.extend(e.ConnectorRenderers.svg,g);var m=e.SvgEndpoint=function(t){g.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:t._jsPlumb}]).renderer.paint=function(t){var n=e.extend({},t);n.outlineStroke&&(n.stroke=n.outlineStroke),null==this.node?(this.node=this.makeNode(n),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),f(this.svg,this.node,n,(this.x,this.y,this.w,this.h),this),h(this.node,(this.x,this.y))}.bind(this)};t.extend(m,g),e.Endpoints.svg.Dot=function(){e.Endpoints.Dot.apply(this,arguments),m.apply(this,arguments),this.makeNode=function(e){return c("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(e){u(e,{cx:this.w/2,cy:this.h/2,r:this.radius})}},t.extend(e.Endpoints.svg.Dot,[e.Endpoints.Dot,m]),e.Endpoints.svg.Rectangle=function(){e.Endpoints.Rectangle.apply(this,arguments),m.apply(this,arguments),this.makeNode=function(e){return c("rect",{width:this.w,height:this.h})},this.updateNode=function(e){u(e,{width:this.w,height:this.h})}},t.extend(e.Endpoints.svg.Rectangle,[e.Endpoints.Rectangle,m]),e.Endpoints.svg.Image=e.Endpoints.Image,e.Endpoints.svg.Blank=e.Endpoints.Blank,e.Overlays.svg.Label=e.Overlays.Label,e.Overlays.svg.Custom=e.Overlays.Custom;var v=function(t,n){t.apply(this,n),e.jsPlumbUIComponent.apply(this,n),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(e,t){if(e.component.svg&&t){null==this.path&&(this.path=c("path",{"pointer-events":"all"}),e.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,e.component),this.canvas=e.component.svg);var i=n&&1===n.length&&n[0].cssClass||"",s=[0,0];t.xmin<0&&(s[0]=-t.xmin),t.ymin<0&&(s[1]=-t.ymin),u(this.path,{d:r(e.d),class:i,stroke:e.stroke?e.stroke:null,fill:e.fill?e.fill:null,transform:"translate("+s[0]+","+s[1]+")"})}};var r=function(e){return isNaN(e.cxy.x)||isNaN(e.cxy.y)?"":"M"+e.hxy.x+","+e.hxy.y+" L"+e.tail[0].x+","+e.tail[0].y+" L"+e.cxy.x+","+e.cxy.y+" L"+e.tail[1].x+","+e.tail[1].y+" L"+e.hxy.x+","+e.hxy.y};this.transfer=function(e){e.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),e.canvas.appendChild(this.path))}},y={cleanup:function(e){null!=this.path&&(e?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(e,t){this.path&&t.canvas&&t.canvas.appendChild(this.path)},setVisible:function(e){null!=this.path&&(this.path.style.display=e?"block":"none")}};t.extend(v,[e.jsPlumbUIComponent,e.Overlays.AbstractOverlay]),e.Overlays.svg.Arrow=function(){v.apply(this,[e.Overlays.Arrow,arguments])},t.extend(e.Overlays.svg.Arrow,[e.Overlays.Arrow,v],y),e.Overlays.svg.PlainArrow=function(){v.apply(this,[e.Overlays.PlainArrow,arguments])},t.extend(e.Overlays.svg.PlainArrow,[e.Overlays.PlainArrow,v],y),e.Overlays.svg.Diamond=function(){v.apply(this,[e.Overlays.Diamond,arguments])},t.extend(e.Overlays.svg.Diamond,[e.Overlays.Diamond,v],y),e.Overlays.svg.GuideLines=function(){var t,n,r=null,i=this;e.Overlays.GuideLines.apply(this,arguments),this.paint=function(e,o){null==r&&(r=c("path"),e.connector.svg.appendChild(r),i.attachListeners(r,e.connector),i.attachListeners(r,i),t=c("path"),e.connector.svg.appendChild(t),i.attachListeners(t,e.connector),i.attachListeners(t,i),n=c("path"),e.connector.svg.appendChild(n),i.attachListeners(n,e.connector),i.attachListeners(n,i));var a=[0,0];o.xmin<0&&(a[0]=-o.xmin),o.ymin<0&&(a[1]=-o.ymin),u(r,{d:s(e.head,e.tail),stroke:"red",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),u(t,{d:s(e.tailLine[0],e.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),u(n,{d:s(e.headLine[0],e.headLine[1]),stroke:"green",fill:null,transform:"translate("+a[0]+","+a[1]+")"})};var s=function(e,t){return"M "+e.x+","+e.y+" L"+t.x+","+t.y}},t.extend(e.Overlays.svg.GuideLines,e.Overlays.GuideLines)}.call("undefined"!==typeof window?window:this),function(){"use strict";var e=this,t=e.jsPlumb,n=e.jsPlumbUtil,r=e.Katavorio,i=e.Biltong,s=function(e,n){var s="_katavorio_"+(n=n||"main"),o=e[s],a=e.getEventManager();return o||((o=new r({bind:a.on,unbind:a.off,getSize:t.getSize,getConstrainingRectangle:function(e){return[e.parentNode.scrollWidth,e.parentNode.scrollHeight]},getPosition:function(t,n){var r=e.getOffset(t,n,t._katavorioDrag?t.offsetParent:null);return[r.left,r.top]},setPosition:function(e,t){e.style.left=t[0]+"px",e.style.top=t[1]+"px"},addClass:t.addClass,removeClass:t.removeClass,intersects:i.intersects,indexOf:function(e,t){return e.indexOf(t)},scope:e.getDefaultScope(),css:{noSelect:e.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(e.getZoom()),e[s]=o,e.bind("zoom",o.setZoom)),o},o=function(e){var t=e.el._jsPlumbDragOptions,n=!0;return t.canDrag&&(n=t.canDrag()),n&&(this.setHoverSuspended(!0),this.select({source:e.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:e.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),n},a=function(e){var t=this.getUIPosition(arguments,this.getZoom());if(null!=t){var n=e.el._jsPlumbDragOptions;this.draw(e.el,t,null,!0),n._dragging&&this.addClass(e.el,"jtk-dragged"),n._dragging=!0}},l=function(e){for(var t,n=e.selection,r=function(n){var r;null!=n[1]&&(t=this.getUIPosition([{el:n[2].el,pos:[n[1].left,n[1].top]}]),r=this.draw(n[2].el,t)),null!=n[0]._jsPlumbDragOptions&&delete n[0]._jsPlumbDragOptions._dragging,this.removeClass(n[0],"jtk-dragged"),this.select({source:n[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:n[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),e.e._drawResult=e.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(e.e._drawResult.c,r.c),Array.prototype.push.apply(e.e._drawResult.e,r.e),Array.prototype.push.apply(e.e._drawResult.a,r.a),this.getDragManager().dragEnded(n[2].el)}.bind(this),i=0;i<n.length;i++)r(n[i]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},u=function(e,t){if(null==t)return[0,0];var n=p(t),r=f(n,0);return[r[e+"X"],r[e+"Y"]]},c=u.bind(this,"page"),h=u.bind(this,"screen"),d=u.bind(this,"client"),f=function(e,t){return e.item?e.item(t):e[t]},p=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e]},g=function(e){var t={},n=[],r={},i={},s={};this.register=function(o){var a,l=e.getId(o);t[l]||(t[l]=o,n.push(o),r[l]={});var u=function(t){if(t)for(var n=0;n<t.childNodes.length;n++)if(3!==t.childNodes[n].nodeType&&8!==t.childNodes[n].nodeType){var c=jsPlumb.getElement(t.childNodes[n]),h=e.getId(t.childNodes[n],null,!0);if(h&&i[h]&&i[h]>0){a||(a=e.getOffset(o));var d=e.getOffset(c);r[l][h]={id:h,offset:{left:d.left-a.left,top:d.top-a.top}},s[h]=l}u(t.childNodes[n])}};u(o)},this.updateOffsets=function(t,n){if(null!=t){n=n||{};var i,o=jsPlumb.getElement(t),a=e.getId(o),l=r[a];if(l)for(var u in l)if(l.hasOwnProperty(u)){var c=jsPlumb.getElement(u),h=n[u]||e.getOffset(c);if(null==c.offsetParent&&null!=r[a][u])continue;i||(i=e.getOffset(o)),r[a][u]={id:u,offset:{left:h.left-i.left,top:h.top-i.top}},s[u]=a}}},this.endpointAdded=function(n,o){o=o||e.getId(n);var a=document.body,l=n.parentNode;for(i[o]=i[o]?i[o]+1:1;null!=l&&l!==a;){var u=e.getId(l,null,!0);if(u&&t[u]){var c=e.getOffset(l);if(null==r[u][o]){var h=e.getOffset(n);r[u][o]={id:o,offset:{left:h.left-c.left,top:h.top-c.top}},s[o]=u}break}l=l.parentNode}},this.endpointDeleted=function(e){if(i[e.elementId]&&(i[e.elementId]--,i[e.elementId]<=0))for(var t in r)r.hasOwnProperty(t)&&r[t]&&(delete r[t][e.elementId],delete s[e.elementId])},this.changeId=function(e,t){r[t]=r[e],r[e]={},s[t]=s[e],s[e]=null},this.getElementsForDraggable=function(e){return r[e]},this.elementRemoved=function(e){var t=s[e];t&&(r[t]&&delete r[t][e],delete s[e])},this.reset=function(){t={},n=[],r={},i={}},this.dragEnded=function(t){if(null!=t.offsetParent){var n=e.getId(t),r=s[n];r&&this.updateOffsets(r)}},this.setParent=function(t,n,i,o,a){var l=s[n];r[o]||(r[o]={});var u=e.getOffset(i),c=a||e.getOffset(t);l&&r[l]&&delete r[l][n],r[o][n]={id:n,offset:{left:c.left-u.left,top:c.top-u.top}},s[n]=o},this.clearParent=function(e,t){var n=s[t];n&&(delete r[n][t],delete s[t])},this.revalidateParent=function(t,n,r){var i=s[n];if(i){var o={};o[n]=r,this.updateOffsets(i,o),e.revalidate(i)}},this.getDragAncestor=function(t){var n=jsPlumb.getElement(t),r=e.getId(n),i=s[r];return i?jsPlumb.getElement(i):null}},m=function(e,t,r){t=n.fastTrim(t),"undefined"!==typeof e.className.baseVal?e.className.baseVal=t:e.className=t;try{var i=e.classList;if(null!=i){for(;i.length>0;)i.remove(i.item(0));for(var s=0;s<r.length;s++)r[s]&&i.add(r[s])}}catch(o){n.log("JSPLUMB: cannot set class list",o)}},v=function(e){return"undefined"===typeof e.className.baseVal?e.className:e.className.baseVal},y=function(e,t,r){t=null==t?[]:n.isArray(t)?t:t.split(/\s+/),r=null==r?[]:n.isArray(r)?r:r.split(/\s+/);var i=v(e).split(/\s+/),s=function(e,t){for(var n=0;n<t.length;n++)if(e)-1===i.indexOf(t[n])&&i.push(t[n]);else{var r=i.indexOf(t[n]);-1!==r&&i.splice(r,1)}};s(!0,t),s(!1,r),m(e,i.join(" "),i)};e.jsPlumb.extend(e.jsPlumbInstance.prototype,{headless:!1,pageLocation:c,screenLocation:h,clientLocation:d,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new g(this)),this.dragManager},recalculateOffsets:function(e){this.getDragManager().updateOffsets(e)},createElement:function(e,t,n,r){return this.createElementNS(null,e,t,n,r)},createElementNS:function(e,t,n,r,i){var s,o=null==e?document.createElement(t):document.createElementNS(e,t);for(s in n=n||{})o.style[s]=n[s];for(s in r&&(o.className=r),i=i||{})o.setAttribute(s,""+i[s]);return o},getAttribute:function(e,t){return null!=e.getAttribute?e.getAttribute(t):null},setAttribute:function(e,t,n){null!=e.setAttribute&&e.setAttribute(t,n)},setAttributes:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])},appendToRoot:function(e){document.body.appendChild(e)},getRenderModes:function(){return["svg"]},getClass:v,addClass:function(e,t){jsPlumb.each(e,(function(e){y(e,t)}))},hasClass:function(e,t){return(e=jsPlumb.getElement(e)).classList?e.classList.contains(t):-1!==v(e).indexOf(t)},removeClass:function(e,t){jsPlumb.each(e,(function(e){y(e,null,t)}))},toggleClass:function(e,t){jsPlumb.hasClass(e,t)?jsPlumb.removeClass(e,t):jsPlumb.addClass(e,t)},updateClasses:function(e,t,n){jsPlumb.each(e,(function(e){y(e,t,n)}))},setClass:function(e,t){null!=t&&jsPlumb.each(e,(function(e){m(e,t,t.split(/\s+/))}))},setPosition:function(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px"},getPosition:function(e){var t=function(t){var n=e.style[t];return n?n.substring(0,n.length-2):0};return{left:t("left"),top:t("top")}},getStyle:function(e,t){return"undefined"!==typeof window.getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.currentStyle[t]},getSelector:function(e,t){return 1===arguments.length?null!=e.nodeType?e:document.querySelectorAll(e):e.querySelectorAll(t)},getOffset:function(e,t,n){e=jsPlumb.getElement(e),n=n||this.getContainer();for(var r={left:e.offsetLeft,top:e.offsetTop},i=t||null!=n&&e!==n&&e.offsetParent!==n?e.offsetParent:null,s=function(e){null!=e&&e!==document.body&&(e.scrollTop>0||e.scrollLeft>0)&&(r.left-=e.scrollLeft,r.top-=e.scrollTop)}.bind(this);null!=i;)r.left+=i.offsetLeft,r.top+=i.offsetTop,s(i),i=t?i.offsetParent:i.offsetParent===n?null:i.offsetParent;if(null!=n&&!t&&(n.scrollTop>0||n.scrollLeft>0)){var o=null!=e.offsetParent?this.getStyle(e.offsetParent,"position"):"static",a=this.getStyle(e,"position");"absolute"!==a&&"fixed"!==a&&"absolute"!==o&&"fixed"!==o&&(r.left-=n.scrollLeft,r.top-=n.scrollTop)}return r},getPositionOnElement:function(e,t,n){var r="undefined"!==typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0,width:0,height:0},i=document.body,s=document.documentElement,o=window.pageYOffset||s.scrollTop||i.scrollTop,a=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,u=s.clientLeft||i.clientLeft||0,c=r.top+o-l+0*n,h=r.left+a-u+0*n,d=jsPlumb.pageLocation(e),f=r.width||t.offsetWidth*n,p=r.height||t.offsetHeight*n;return[(d[0]-h)/f,(d[1]-c)/p]},getAbsolutePosition:function(e){var t=function(t){var n=e.style[t];if(n)return parseFloat(n.substring(0,n.length-2))};return[t("left"),t("top")]},setAbsolutePosition:function(e,t,n,r){n?this.animate(e,{left:"+="+(t[0]-n[0]),top:"+="+(t[1]-n[1])},r):(e.style.left=t[0]+"px",e.style.top=t[1]+"px")},getSize:function(e){return[e.offsetWidth,e.offsetHeight]},getWidth:function(e){return e.offsetWidth},getHeight:function(e){return e.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(e,t){var r;return e=n.isArray(e)||null!=e.length&&!n.isString(e)?e:[e],Array.prototype.slice.call(e).forEach(function(e){(r=this.info(e)).el&&this._initDraggableIfNecessary(r.el,!0,t,r.id,!0)}.bind(this)),this},snapToGrid:function(e,t,n){var r=[],i=function(e){var i=this.info(e);if(null!=i.el&&i.el._katavorioDrag){var s=i.el._katavorioDrag.snap(t,n);this.revalidate(i.el),r.push([i.el,s])}}.bind(this);if(1===arguments.length||3===arguments.length)i(e,t,n);else{var s=this.getManagedElements();for(var o in s)i(o,arguments[0],arguments[1])}return r},initDraggable:function(e,t,n){s(this,n).draggable(e,t),e._jsPlumbDragOptions=t},destroyDraggable:function(e,t){s(this,t).destroyDraggable(e),e._jsPlumbDragOptions=null,e._jsPlumbRelatedElement=null},unbindDraggable:function(e,t,n,r){s(this,r).destroyDraggable(e,t,n)},setDraggable:function(e,t){return jsPlumb.each(e,function(e){this.isDragSupported(e)&&(this._draggableStates[this.getAttribute(e,"id")]=t,this.setElementDraggable(e,t))}.bind(this))},_draggableStates:{},toggleDraggable:function(e){var t;return jsPlumb.each(e,function(e){var n=this.getAttribute(e,"id");return t=!(t=null!=this._draggableStates[n]&&this._draggableStates[n]),this._draggableStates[n]=t,this.setDraggable(e,t),t}.bind(this)),t},_initDraggableIfNecessary:function(e,t,r,i,s){if(!jsPlumb.headless&&(null!=t&&t&&jsPlumb.isDragSupported(e,this))){var u=r||this.Defaults.DragOptions;if(u=jsPlumb.extend({},u),jsPlumb.isAlreadyDraggable(e,this))r.force&&this.initDraggable(e,u);else{var c=jsPlumb.dragEvents.drag,h=jsPlumb.dragEvents.stop,d=jsPlumb.dragEvents.start;this.manage(i,e),u[d]=n.wrap(u[d],o.bind(this)),u[c]=n.wrap(u[c],a.bind(this)),u[h]=n.wrap(u[h],l.bind(this));var f=this.getId(e);this._draggableStates[f]=!0;var p=this._draggableStates[f];u.disabled=null!=p&&!p,this.initDraggable(e,u),this.getDragManager().register(e),s&&this.fire("elementDraggable",{el:e,options:u})}}},animationSupported:!0,getElement:function(e){return null==e?null:"string"===typeof(e="string"===typeof e?e:null==e.tagName&&null!=e.length&&null==e.enctype?e[0]:e)?document.getElementById(e):e},removeElement:function(e){s(this).elementRemoved(e),this.getEventManager().remove(e)},doAnimate:function(e,r,i){i=i||{};var s=this.getOffset(e),o=function(e,t){var r=function(r){if(null!=t[r]){if(n.isString(t[r])){var i=t[r].match(/-=/)?-1:1,s=t[r].substring(2);return e[r]+i*s}return t[r]}return e[r]};return[r("left"),r("top")]}(s,r),a=o[0]-s.left,l=o[1]-s.top,u=i.duration||250,c=u/15,h=15/u*a,d=15/u*l,f=0,p=setInterval((function(){t.setPosition(e,{left:s.left+h*(f+1),top:s.top+d*(f+1)}),null!=i.step&&i.step(f,Math.ceil(c)),++f>=c&&(window.clearInterval(p),null!=i.complete&&i.complete())}),15)},destroyDroppable:function(e,t){s(this,t).destroyDroppable(e)},unbindDroppable:function(e,t,n,r){s(this,r).destroyDroppable(e,t,n)},droppable:function(e,t){var r;return e=n.isArray(e)||null!=e.length&&!n.isString(e)?e:[e],(t=t||{}).allowLoopback=!1,Array.prototype.slice.call(e).forEach(function(e){(r=this.info(e)).el&&this.initDroppable(r.el,t)}.bind(this)),this},initDroppable:function(e,t,n){s(this,n).droppable(e,t)},isAlreadyDraggable:function(e){return null!=e._katavorioDrag},isDragSupported:function(e,t){return!0},isDropSupported:function(e,t){return!0},isElementDraggable:function(e){return(e=t.getElement(e))._katavorioDrag&&e._katavorioDrag.isEnabled()},getDragObject:function(e){return e[0].drag.getDragElement()},getDragScope:function(e){return e._katavorioDrag&&e._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(e){return e[0].e},getUIPosition:function(e,t){var n=e[0].el;if(null==n.offsetParent)return null;var r=e[0].finalPos||e[0].pos,i={left:r[0],top:r[1]};if(n._katavorioDrag&&n.offsetParent!==this.getContainer()){var s=this.getOffset(n.offsetParent);i.left+=s.left,i.top+=s.top}return i},setDragFilter:function(e,t,n){e._katavorioDrag&&e._katavorioDrag.setFilter(t,n)},setElementDraggable:function(e,n){(e=t.getElement(e))._katavorioDrag&&e._katavorioDrag.setEnabled(n)},setDragScope:function(e,t){e._katavorioDrag&&e._katavorioDrag.k.setDragScope(e,t)},setDropScope:function(e,t){e._katavorioDrop&&e._katavorioDrop.length>0&&e._katavorioDrop[0].k.setDropScope(e,t)},addToPosse:function(e,n){var r=Array.prototype.slice.call(arguments,1),i=s(this);t.each(e,(function(e){(e=[t.getElement(e)]).push.apply(e,r),i.addToPosse.apply(i,e)}))},setPosse:function(e,n){var r=Array.prototype.slice.call(arguments,1),i=s(this);t.each(e,(function(e){(e=[t.getElement(e)]).push.apply(e,r),i.setPosse.apply(i,e)}))},removeFromPosse:function(e,n){var r=Array.prototype.slice.call(arguments,1),i=s(this);t.each(e,(function(e){(e=[t.getElement(e)]).push.apply(e,r),i.removeFromPosse.apply(i,e)}))},removeFromAllPosses:function(e){var n=s(this);t.each(e,(function(e){n.removeFromAllPosses(t.getElement(e))}))},setPosseState:function(e,n,r){var i=s(this);t.each(e,(function(e){i.setPosseState(t.getElement(e),n,r)}))},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(e){e._katavorioDrag&&e._katavorioDrag.abort()},addToDragSelection:function(e){var t=this.getElement(e);null==t||!t._isJsPlumbGroup&&null!=t._jsPlumbGroup||s(this).select(e)},removeFromDragSelection:function(e){s(this).deselect(e)},getDragSelection:function(){return s(this).getSelection()},clearDragSelection:function(){s(this).deselectAll()},trigger:function(e,t,n,r){this.getEventManager().trigger(e,t,n,r)},doReset:function(){for(var e in this)0===e.indexOf("_katavorio_")&&this[e].reset()},getEventManager:function(){return function(t){var n=t._mottle;return n||(n=t._mottle=new e.Mottle),n}(this)},on:function(e,t,n){return this.getEventManager().on.apply(this,arguments),this},off:function(e,t,n){return this.getEventManager().off.apply(this,arguments),this}});!function(e){var t=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!==typeof document.body&&null!=document.body?e():setTimeout(t,9)};t()}(t.init)}.call("undefined"!==typeof window?window:this)},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var M,L=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case P:return"Profiler";case C:return"StrictMode";case x:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ce=null;function Pe(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Ie(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Te(e,t){return e(t)}function xe(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Te(e,t,n)}finally{De=!1,(null!==Se||null!==Ce)&&(xe(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Ne=!1;if(c)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ce){Ne=!1}function Re(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Le=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,Le=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Le=null,Re.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,Ct,Pt,kt=!1,It=[],Tt=null,xt=null,Dt=null,At=new Map,Ot=new Map,Nt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Pt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){kt=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==xt&&Ft(xt)&&(xt=null),null!==Dt&&Ft(Dt)&&(Dt=null),At.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==xt&&zt(xt,e),null!==Dt&&zt(Dt,e),At.forEach(t),Ot.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var Ht=w.ReactCurrentBatchConfig,qt=!0;function Gt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Wt(e,t,n,r){var i=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,Ht.transition=s}}function Kt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Xt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return xt=Mt(xt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&qr(e,t,r,Xt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=L({},un,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(L({},fn,{dataTransfer:0})),mn=sn(L({},hn,{relatedTarget:0})),vn=sn(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(L({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Pn(){return Cn}var kn=L({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(kn),Tn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),Dn=sn(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(An),Nn=[9,13,27,32],jn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Rn,Ln=c&&(!jn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Xn(e){Fr(e,0)}function Yn(e){if(K(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(c){var $n;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,_e(e)),Ae(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Cr={};function Pr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Pr("animationend"),Ir=Pr("animationiteration"),Tr=Pr("animationstart"),xr=Pr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Ar.length;Nr++){var jr=Ar[Nr];Or(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(xr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Le;Me=!1,Le=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,a,u),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=_e(n),o=[];e:{var a=Dr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xn;break;case kr:case Ir:case Tr:l=vn;break;case xr:l=Dn;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Oe(p,d))&&c.push(Gr(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==u?a:wi(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Kr(f))p++;for(f=0,g=d;g;g=Kr(g))f++;for(;0<p-f;)c=Kr(c),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==l&&Xr(o,a,l,c,!1),null!==u&&null!==h&&Xr(o,h,u,c,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(qn(a))if(Jn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!jn&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Oe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Oe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ci(e){return{current:e}}function Pi(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function ki(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ii={},Ti=Ci(Ii),xi=Ci(!1),Di=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Pi(xi),Pi(Ti)}function ji(e,t,n){if(Ti.current!==Ii)throw Error(s(168));ki(Ti,t),ki(xi,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,H(e)||"Unknown",i));return L({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ti.current,ki(Ti,e),ki(xi,xi.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ri(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Pi(xi),Pi(Ti),ki(Ti,e)):Pi(xi),ki(xi,n)}var Fi=null,Ui=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Bi),i}finally{bt=t,Vi=!1}}return null}var Hi=[],qi=0,Gi=null,Wi=0,Ki=[],Xi=0,Yi=null,Qi=1,Ji="";function $i(e,t){Hi[qi++]=Wi,Hi[qi++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Ki[Xi++]=Qi,Ki[Xi++]=Ji,Ki[Xi++]=Yi,Yi=e;var r=Qi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Qi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=Hi[--qi],Hi[qi]=null,Wi=Hi[--qi],Hi[qi]=null;for(;e===Yi;)Yi=Ki[--Xi],Ki[Xi]=null,Ji=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Au(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Au(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&ys(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=ju(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=ju(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case E:return(t=Fu(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ru(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),is&&$i(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&$i(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}function m(i,a,l,u){var c=R(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,u);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,m),null===h?c=b:h.sibling=b,h=b,g=v}if(y.done)return n(i,g),is&&$i(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return is&&$i(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===O&&ys(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ms(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((s=Ru(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=ju(o.type,o.key,o.props,null,r.mode,l)).ref=ms(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fu(o,r.mode,l)).return=r,r=s}return a(r);case O:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(R(o))return m(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Lu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=bs(!0),_s=bs(!1),Es=Ci(null),Ss=null,Cs=null,Ps=null;function ks(){Ps=Cs=Ss=null}function Is(e){var t=Es.current;Pi(Es),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xs(e,t){Ss=e,Ps=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Ps!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Ss)throw Error(s(308));Cs=e,Ss.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var As=null;function Os(e){null===As?As=[e]:As.push(e)}function Ns(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Rs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:Rs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Gs=Ci(qs),Ws=Ci(qs),Ks=Ci(qs);function Xs(e){if(e===qs)throw Error(s(174));return e}function Ys(e,t){switch(ki(Ks,t),ki(Ws,e),ki(Gs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Pi(Gs),ki(Gs,t)}function Qs(){Pi(Gs),Pi(Ws),Pi(Ks)}function Js(e){Xs(Ks.current);var t=Xs(Gs.current),n=le(t,e.type);t!==n&&(ki(Ws,e),ki(Gs,n))}function $s(e){Ws.current===e&&(Pi(Gs),Pi(Ws))}var Zs=Ci(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,uo=!1,co=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(co)}if(ro.current=$o,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((so&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,oo.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Co(e,t){var n=oo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Mo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ao(9,ko.bind(null,n,r,i,t),void 0,null),null===xl)throw Error(s(349));0!==(30&so)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,To(t)&&xo(e)}function Io(e,t,n){return n((function(){To(t)&&xo(e)}))}function To(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function xo(e){var t=js(e,1);null!==t&&nu(t,e,1,-1)}function Do(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,oo,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function No(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}oo.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Ro(e,t){return No(8390656,8,e,t)}function Mo(e,t){return jo(2048,8,e,t)}function Lo(e,t){return jo(4,2,e,t)}function Fo(e,t){return jo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Go(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{bt=n,io.transition=r}}function Wo(){return bo().memoizedState}function Ko(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Qo(t,n);else if(null!==(n=Ns(e,t,n,r))){nu(n,e,r,eu()),Jo(n,t,r)}}function Xo(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Qo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ns(e,t,i,r))&&(nu(n,e,r,i=eu()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Qo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $o={readContext:Ds,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ds,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Ro,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,No(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return No(4194308,4,e,t)},useInsertionEffect:function(e,t){return No(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Do,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Go.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===xl)throw Error(s(349));0!==(30&so)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ro(Io.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=xl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ds,useCallback:Bo,useContext:Ds,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Ho,useReducer:_o,useRef:Oo,useState:function(){return _o(wo)},useDebugValue:zo,useDeferredValue:function(e){return qo(bo(),ao.memoizedState,e)},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Ds,useCallback:Bo,useContext:Ds,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Ho,useReducer:Eo,useRef:Oo,useState:function(){return Eo(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Co,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nu(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nu(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Oi(t)?Di:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Oi(t)?Di:Ti.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Gl=r),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Pu.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?_s(t,null,n,r):ws(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return xs(t,i),r=mo(e,t,n,r,s,i),n=vo(),null===e||ba?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ju(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,i)}return t.flags|=1,(e=Nu(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Nl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Nl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Nl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Nl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function Pa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Oi(n)?Di:Ti.current;return s=Ai(t,s),xs(t,i),n=mo(e,t,n,r,s,i),r=vo(),null===e||ba?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qa(e,t,i))}function Ia(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(xs(t,i),null===t.stateNode)Ha(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ds(u):u=Ai(t,u=Oi(n)?Di:Ti.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&aa(t,o,r,u),Rs=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||xi.current||Rs?("function"===typeof c&&(ra(t,n,c,r),l=t.memoizedState),(a=Rs||sa(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ls(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:na(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Ai(t,l=Oi(n)?Di:Ti.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Rs=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||xi.current||Rs?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(u=Rs||sa(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ta(e,t,n,r,s,i)}function Ta(e,t,n,r,i,s){Pa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),qa(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function xa(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Ys(e,t.containerInfo)}function Da(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Aa,Oa,Na,ja,Ra={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mu(l,i,0,null),e=Ru(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Ra,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ca(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(o=Ru(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Ra,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ca(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=xl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,js(e,i),nu(r,e,i,-1))}return gu(),Ua(e,t,a,r=ca(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Xi++]=Qi,Ki[Xi++]=Ji,Ki[Xi++]=Yi,Qi=e.id,Ji=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Nu(r,a):(a=Ru(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Oi(t.type)&&Ni(),Wa(t),null;case 3:return r=t.stateNode,Qs(),Pi(xi),Pi(Ti),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ou(ss),ss=null))),Oa(e,t),Wa(t),null;case 5:$s(t);var i=Xs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Xs(Gs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Ur(Rr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ks.current),Xs(Gs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wa(t),null;case 13:if(Pi(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(ou(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===jl&&(jl=3):gu())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Qs(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return Is(t.type._context),Wa(t),null;case 19:if(Pi(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*Je()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Pi(xi),Pi(Ti),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Pi(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Pi(Zs),null;case 4:return Qs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Gs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Qa||Za(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Qa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cu(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,dl(e,t,n),Qa=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(s(160));fl(o,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Cu(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Cu(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Cu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),be(l,a);var c=be(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Cu(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Cu(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Cu(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(c=Qa)||h,gl(t,e),Qa=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cu(r,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,$a=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",a))}catch(m){Cu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Cu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){$a=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var u=Qa;if(Ya=o,(Qa=l)&&!u)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,$a=l):El(i);for(;null!==s;)$a=s,bl(s,t,n),s=s.sibling;$a=i,Ya=a,Qa=u}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):wl(e)}}function wl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Hs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&il(t)}catch(f){Cu(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function _l(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cu(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Cu(t,o,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Cl=Math.ceil,Pl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Tl=0,xl=null,Dl=null,Al=0,Ol=0,Nl=Ci(0),jl=0,Rl=null,Ml=0,Ll=0,Fl=0,Ul=null,Vl=null,zl=0,Bl=1/0,Hl=null,ql=!1,Gl=null,Wl=null,Kl=!1,Xl=null,Yl=0,Ql=0,Jl=null,$l=-1,Zl=0;function eu(){return 0!==(6&Tl)?Je():-1!==$l?$l:$l=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Al?Al&-Al:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nu(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===xl||(e===xl&&(0===(2&Tl)&&(Ll|=n),4===jl&&au(e,Al)),ru(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Je()+500,Ui&&Bi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===xl?Al:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lu.bind(null,e)):zi(lu.bind(null,e)),oi((function(){0===(6&Tl)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=xu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if($l=-1,Zl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===xl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Tl;Tl|=2;var o=pu();for(xl===e&&Al===t||(Hl=null,Bl=Je()+500,du(e,t));;)try{yu();break}catch(l){fu(e,l)}ks(),Pl.current=o,Tl=i,null!==Dl?t=0:(xl=null,Al=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=su(e,i))),1===t)throw n=Rl,du(e,0),au(e,r),ru(e,Je()),n;if(6===t)au(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=pt(e))&&(r=o,t=su(e,o))),1===t))throw n=Rl,du(e,0),au(e,r),ru(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_u(e,Vl,Hl);break;case 3:if(au(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_u.bind(null,e,Vl,Hl),t);break}_u(e,Vl,Hl);break;case 4:if(au(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(_u.bind(null,e,Vl,Hl),r);break}_u(e,Vl,Hl);break;default:throw Error(s(329))}}}return ru(e,Je()),e.callbackNode===n?iu.bind(null,e):null}function su(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Vl,Vl=n,null!==t&&ou(t)),e}function ou(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function au(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Tl))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return ru(e,Je()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Rl,du(e,0),au(e,t),ru(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Vl,Hl),ru(e,Je()),null}function uu(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Je()+500,Ui&&Bi())}}function cu(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&Eu();var t=Tl;Tl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Tl=t))&&Bi()}}function hu(){Ol=Nl.current,Pi(Nl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Qs(),Pi(xi),Pi(Ti),no();break;case 5:$s(r);break;case 4:Qs();break;case 13:case 19:Pi(Zs);break;case 10:Is(r.type._context);break;case 22:case 23:hu()}n=n.return}if(xl=e,Dl=e=Nu(e.current,null),Al=Ol=t,jl=0,Rl=null,Fl=Ll=Ml=0,Vl=Ul=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function fu(e,t){for(;;){var n=Dl;try{if(ks(),ro.current=$o,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(so=0,lo=ao=oo=null,co=!1,ho=0,kl.current=null,null===n||null===n.return){jl=1,Rl=t,Dl=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Al,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ga(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ua(u,l));break e}}o=u=ua(u,l),4!==jl&&(jl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wl||!Wl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wu(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function pu(){var e=Pl.current;return Pl.current=$o,null===e?$o:e}function gu(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===xl||0===(268435455&Ml)&&0===(268435455&Ll)||au(xl,Al)}function mu(e,t){var n=Tl;Tl|=2;var r=pu();for(xl===e&&Al===t||(Hl=null,du(e,t));;)try{vu();break}catch(i){fu(e,i)}if(ks(),Tl=n,Pl.current=r,null!==Dl)throw Error(s(261));return xl=null,Al=0,jl}function vu(){for(;null!==Dl;)bu(Dl)}function yu(){for(;null!==Dl&&!Ye();)bu(Dl)}function bu(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wu(e):Dl=t,kl.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return jl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===jl&&(jl=5)}function _u(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Eu()}while(null!==Xl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===xl&&(Dl=xl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,xu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=bt;bt=1;var l=Tl;Tl|=4,kl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){Cu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Tl=l,bt=a,Il.transition=o}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,Bi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function Eu(){if(null!==Xl){var e=wt(Yl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($a=c;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(sl(h),h===c){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$a=y;break e}$a=o.return}}var b=e.current;for($a=b;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Cu(l,l.return,E)}if(l===a){$a=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,$a=_;break e}$a=l.return}}if(Tl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Su(e,t,n){e=Us(e,t=fa(0,t=ua(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Cu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ua(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Pu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,xl===e&&(Al&n)===n&&(4===jl||3===jl&&(130023424&Al)===Al&&500>Je()-zl?du(e,0):Fl|=n),ru(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=js(e,t))&&(vt(e,t,n),ru(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),ku(e,n)}function xu(e,t){return Ke(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Au(e,t,n,r){return new Du(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Au(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ju(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ou(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ru(n.children,i,o,t);case C:a=8,i|=8;break;case P:return(e=Au(12,n,t,2|i)).elementType=P,e.lanes=o,e;case x:return(e=Au(13,n,t,i)).elementType=x,e.lanes=o,e;case D:return(e=Au(19,n,t,i)).elementType=D,e.lanes=o,e;case N:return Mu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case I:a=9;break e;case T:a=11;break e;case A:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Au(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ru(e,t,n,r){return(e=Au(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Au(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Au(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Au(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vu(e,t,n,r,i,s,o,a,l){return e=new Uu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Au(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zu(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function Bu(e,t,n,r,i,s,o,a,l){return(e=Vu(n,r,!0,e,0,s,0,a,l)).context=zu(null),n=e.current,(s=Fs(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Hu(e,t,n,r){var i=t.current,s=eu(),o=tu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(nu(e,i,o,s),Vs(e,i,o)),o}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:xa(t),fs();break;case 5:Js(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(ki(Zs,1&Zs.current),null!==(e=qa(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return qa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ai(t,Ti.current);xs(t,n),i=mo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ta(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===A)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(xa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ls(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Pa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return La(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!xi.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Fs(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ts(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ts(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xs(t,n),r=r(i=Ds(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,xs(t,n),oa(t,r,i),la(t,r,i,n),Ta(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function Zu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=qu(o);a.call(e)}}Hu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qu(o);s.call(e)}}var o=Bu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=qu(l);a.call(e)}}var l=Vu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),cu((function(){Hu(t,l,n,r)})),l}(n,t,e,i,r);return qu(o)}Yu.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hu(e,t,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Hu(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Je()),0===(6&Tl)&&(Bl=Je()+500,Bi()))}break;case 13:cu((function(){var t=js(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Wu(e,1)}},Et=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=js(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},Ct=function(){return bt},Pt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uu,xe=cu;var ec={usingClientEntryPoint:!1,Events:[bi,wi,_i,ke,Ie,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),st=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(s(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),x(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+T(a=e[u],u);l+=x(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=x(a=a.value,t,i,c=s+T(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},N={transition:null},j={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(m=!1,w(e),!g)if(null!==r(u))g=!0,N(E);else{var t=r(c);null!==t&&j(_,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,y(k),k=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!x());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&j(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,P=null,k=-1,I=5,T=-1;function x(){return!(t.unstable_now()-T<I)}function D(){if(null!==P){var e=t.unstable_now();T=e;var n=!0;try{n=P(!0,e)}finally{n?S():(C=!1,P=null)}}else C=!1}if("function"===typeof b)S=function(){b(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=D,S=function(){O.postMessage(null)}}else S=function(){v(D,0)};function N(e){P=e,C||(C=!0,S())}function j(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(y(k),k=-1):m=!0,j(_,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,N(E))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},593:(e,t,n)=>{var r={"./amazon.json":[400,400],"./apple.json":[820,820],"./facebook.json":[456,456],"./google.json":[291,291],"./netflix.json":[220,220]};function i(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((()=>n.t(i,19)))}i.keys=()=>Object.keys(r),i.id=593,e.exports=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{220:"4888d073",291:"2a36fbce",400:"f6aeba88",453:"6139446a",456:"f6d93729",820:"3d366c80"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="faangcode:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/FaangCode/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkfaangcode=self.webpackChunkfaangcode||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391),r=n(81);const i=n.p+"static/media/facebook.29730c3fae2a69f5456d.webp",s=n.p+"static/media/amazon.4fb17ed649c7a4bb7e13.webp",o=n.p+"static/media/apple.20e1f74454f5d49cb487.webp",a=n.p+"static/media/netflix.aecc0a8ed00fcb2c36fb.webp",l=n.p+"static/media/google.a05d721bb9bba483749f.webp";var u=n(579);const c=t=>{let{onNodeClick:n}=t;const c=(0,e.useRef)(null);return(0,e.useEffect)((()=>{r.jsPlumb.importDefaults({ConnectionsDetachable:!1}),r.jsPlumb.setContainer(c.current);const e="faang",t=["Facebook","Amazon","Apple","Netflix","Google"];r.jsPlumb.draggable(e,{containment:"parent"}),t.forEach((e=>{r.jsPlumb.draggable(e,{containment:"parent"})})),t.forEach((t=>{document.getElementById(e)&&document.getElementById(t)&&r.jsPlumb.connect({source:e,target:t,connector:["Bezier"],overlays:[["Arrow",{location:1,width:12,length:12}]],endpoints:[["Dot",{radius:1}],"Blank"],paintStyle:{stroke:"#7f8c8d",strokeWidth:2},endpointStyle:{fillStyle:"#7f8c8d"},anchor:["Continuous",{faces:["left","right","top","bottom"]}]})}));const n=()=>{r.jsPlumb.repaintEverything()};return window.addEventListener("resize",n),()=>{r.jsPlumb.reset(),window.removeEventListener("resize",n)}}),[]),(0,u.jsxs)("div",{className:"graph",ref:c,children:[(0,u.jsx)("div",{id:"faang",className:"node",children:"FAANGCode"}),(0,u.jsx)("div",{id:"Facebook",className:"node",onClick:()=>n("facebook"),children:(0,u.jsx)("img",{src:i,alt:"Facebook"})}),(0,u.jsx)("div",{id:"Amazon",className:"node",onClick:()=>n("amazon"),children:(0,u.jsx)("img",{src:s,alt:"Amazon"})}),(0,u.jsx)("div",{id:"Apple",className:"node",onClick:()=>n("apple"),children:(0,u.jsx)("img",{src:o,alt:"Apple"})}),(0,u.jsx)("div",{id:"Netflix",className:"node",onClick:()=>n("netflix"),children:(0,u.jsx)("img",{src:a,alt:"Netflix"})}),(0,u.jsx)("div",{id:"Google",className:"node",onClick:()=>n("google"),children:(0,u.jsx)("img",{src:l,alt:"Google"})})]})},h=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new f;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p=function(e){return function(e){const t=h(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")},g=function(e){try{return d.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const m=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,v=()=>{try{return m()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/FaangCode",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&g(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t,n;return null===(n=null===(t=v())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},b=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class _{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return!function(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(I,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new P(n,s,t)}}const I=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(x(n)&&x(s)){if(!T(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function x(e){return null!==e&&"object"===typeof e}function D(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function A(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function O(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function j(){}function R(e){return e&&e._delegate?e._delegate:e}class M{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const L="[DEFAULT]";class F{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new _;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:L})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===L?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.component?this.component.multipleInstances?e:L:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const V=[];var z;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(z||(z={}));const B={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},H=z.INFO,q={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},G=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=q[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class W{constructor(e){this.name=e,this._logLevel=H,this._logHandler=G,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?B[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...t),this._logHandler(this,z.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...t),this._logHandler(this,z.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.INFO,...t),this._logHandler(this,z.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.WARN,...t),this._logHandler(this,z.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,z.ERROR,...t),this._logHandler(this,z.ERROR,...t)}}const K=(e,t)=>t.some((t=>e instanceof t));let X,Y;const Q=new WeakMap,J=new WeakMap,$=new WeakMap,Z=new WeakMap,ee=new WeakMap;let te={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return J.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(se(this),n),ie(Q.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(e.apply(se(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(se(this),t,...r);return $.set(s,t.sort?t.sort():[t]),ie(s)}}function re(e){return"function"===typeof e?ne(e):(e instanceof IDBTransaction&&function(e){if(J.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));J.set(e,t)}(e),K(e,X||(X=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,te):e)}function ie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ie(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Q.set(t,e)})).catch((()=>{})),ee.set(t,e),t}(e);if(Z.has(e))return Z.get(e);const t=re(e);return t!==e&&(Z.set(e,t),ee.set(t,e)),t}const se=e=>ee.get(e);const oe=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],le=new Map;function ue(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(le.get(t))return le.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!oe.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return le.set(t,s),s}te=(e=>({...e,get:(t,n,r)=>ue(t,n)||e.get(t,n,r),has:(t,n)=>!!ue(t,n)||e.has(t,n)}))(te);class ce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const he="@firebase/app",de="0.10.6",fe=new W("@firebase/app"),pe="@firebase/app-compat",ge="@firebase/analytics-compat",me="@firebase/analytics",ve="@firebase/app-check-compat",ye="@firebase/app-check",be="@firebase/auth",we="@firebase/auth-compat",_e="@firebase/database",Ee="@firebase/database-compat",Se="@firebase/functions",Ce="@firebase/functions-compat",Pe="@firebase/installations",ke="@firebase/installations-compat",Ie="@firebase/messaging",Te="@firebase/messaging-compat",xe="@firebase/performance",De="@firebase/performance-compat",Ae="@firebase/remote-config",Oe="@firebase/remote-config-compat",Ne="@firebase/storage",je="@firebase/storage-compat",Re="@firebase/firestore",Me="@firebase/vertexai-preview",Le="@firebase/firestore-compat",Fe="firebase",Ue="[DEFAULT]",Ve={[he]:"fire-core",[pe]:"fire-core-compat",[me]:"fire-analytics",[ge]:"fire-analytics-compat",[ye]:"fire-app-check",[ve]:"fire-app-check-compat",[be]:"fire-auth",[we]:"fire-auth-compat",[_e]:"fire-rtdb",[Ee]:"fire-rtdb-compat",[Se]:"fire-fn",[Ce]:"fire-fn-compat",[Pe]:"fire-iid",[ke]:"fire-iid-compat",[Ie]:"fire-fcm",[Te]:"fire-fcm-compat",[xe]:"fire-perf",[De]:"fire-perf-compat",[Ae]:"fire-rc",[Oe]:"fire-rc-compat",[Ne]:"fire-gcs",[je]:"fire-gcs-compat",[Re]:"fire-fst",[Le]:"fire-fst-compat",[Me]:"fire-vertex","fire-js":"fire-js",[Fe]:"fire-js-all"},ze=new Map,Be=new Map,He=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e){const t=e.name;if(He.has(t))return fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;He.set(t,e);for(const n of ze.values())qe(n,e);for(const n of Be.values())qe(n,e);return!0}function We(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ke(e){return void 0!==e.settings}const Xe=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ye{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new M("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xe.create("app-deleted",{appName:this._name})}}const Qe="10.12.3";function Je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ue,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Xe.create("bad-app-name",{appName:String(i)});if(n||(n=b()),!n)throw Xe.create("no-options");const s=ze.get(i);if(s){if(T(n,s.options)&&T(r,s.config))return s;throw Xe.create("duplicate-app",{appName:i})}const o=new U(i);for(const l of He.values())o.addComponent(l);const a=new Ye(n,r,o);return ze.set(i,a),a}function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;const t=ze.get(e);if(!t&&e===Ue&&b())return Je();if(!t)throw Xe.create("no-app",{appName:e});return t}function Ze(e,t,n){var r;let i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fe.warn(e.join(" "))}Ge(new M("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const et="firebase-heartbeat-database",tt=1,nt="firebase-heartbeat-store";let rt=null;function it(){return rt||(rt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ie(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ie(o.result),e.oldVersion,e.newVersion,ie(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(et,tt,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(nt)}catch(n){console.warn(n)}}}).catch((e=>{throw Xe.create("idb-open",{originalErrorMessage:e.message})}))),rt}async function st(e,t){try{const n=(await it()).transaction(nt,"readwrite"),r=n.objectStore(nt);await r.put(t,ot(e)),await n.done}catch(n){if(n instanceof P)fe.warn(n.message);else{const e=Xe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});fe.warn(e.message)}}}function ot(e){return"".concat(e.name,"!").concat(e.options.appId)}class at{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ut(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=lt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ct(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ct(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=p(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function lt(){return(new Date).toISOString().substring(0,10)}class ut{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!C()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await it()).transaction(nt),n=await t.objectStore(nt).get(ot(e));return await t.done,n}catch(t){if(t instanceof P)fe.warn(t.message);else{const e=Xe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});fe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return st(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return st(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ct(e){return p(JSON.stringify({version:2,heartbeats:e})).length}var ht;ht="",Ge(new M("platform-logger",(e=>new ce(e)),"PRIVATE")),Ge(new M("heartbeat",(e=>new at(e)),"PRIVATE")),Ze(he,de,ht),Ze(he,de,"esm2017"),Ze("fire-js","");Ze("firebase","10.12.3","app");function dt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ft(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pt=ft,gt=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new W("@firebase/auth");function vt(e){if(mt.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mt.error("Auth (".concat(Qe,"): ").concat(e),...n)}}function yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw St(e,...n)}function bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return St(e,...n)}function wt(e,t,n){const r=Object.assign(Object.assign({},pt()),{[t]:n});return new k("auth","Firebase",r).create(t,{appName:e.name})}function _t(e){return wt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Et(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yt(e,"argument-error"),wt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function St(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return gt.create(e,...n)}function Ct(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw St(t,...r)}}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vt(t),new Error(t)}function kt(e,t){e||Pt(t)}function It(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tt(){return"http:"===xt()||"https:"===xt()}function xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Dt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Tt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class At{constructor(e,t){this.shortDelay=e,this.longDelay=t,kt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Dt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ot(e,t){kt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Nt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Rt=new At(3e4,6e4);function Mt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Lt(e,t,n,r){return Ft(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=D(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Nt.fetch()(Vt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ft(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},jt),t);try{const t=new Bt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ht(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ht(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ht(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ht(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw wt(e,a,o);yt(e,a)}}catch(i){if(i instanceof P)throw i;yt(e,"network-request-failed",{message:String(i)})}}async function Ut(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Lt(e,t,n,r,i);return"mfaPendingCredential"in s&&yt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Vt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ot(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function zt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(bt(this.auth,"network-request-failed"))),Rt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ht(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bt(e,t,r);return i.customData._tokenResponse=n,i}function qt(e){return void 0!==e&&void 0!==e.enterprise}class Gt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Wt(e,t){return Lt(e,"GET","/v2/recaptchaConfig",Mt(e,t))}async function Kt(e,t){return Lt(e,"POST","/v1/accounts:lookup",t)}function Xt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Yt(e){return 1e3*Number(e)}function Qt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return vt("JWT malformed, contained fewer than 3 sections"),null;try{const e=g(n);return e?JSON.parse(e):(vt("Failed to decode base64 JWT payload"),null)}catch(i){return vt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Jt(e){const t=Qt(e);return Ct(t,"internal-error"),Ct("undefined"!==typeof t.exp,"internal-error"),Ct("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function $t(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Zt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class en{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xt(this.lastLoginAt),this.creationTime=Xt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await $t(e,Kt(n,{idToken:r}));Ct(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?nn(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new en(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function nn(e){return e.map((e=>{var{providerId:t}=e,n=dt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct("undefined"!==typeof e.idToken,"internal-error"),Ct("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Jt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ct(0!==e.length,"internal-error");const t=Jt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ft(e,{},(async()=>{const n=D({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Vt(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Nt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new rn;return n&&(Ct("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ct("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ct("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rn,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function sn(e,t){Ct("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class on{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=dt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new en(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await $t(this,this.stsTokenManager.getToken(this.auth,e));return Ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R(e),r=await n.getIdToken(t),i=Qt(r);Ct(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Xt(Yt(i.auth_time)),issuedAtTime:Xt(Yt(i.iat)),expirationTime:Xt(Yt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=R(e);await tn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new on(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await tn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(_t(this.auth));const e=await this.getIdToken();return await $t(this,async function(e,t){return Lt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=t;Ct(y&&E,e,"internal-error");const S=rn.fromJSON(this.name,E);Ct("string"===typeof y,e,"internal-error"),sn(c,e.name),sn(h,e.name),Ct("boolean"===typeof b,e,"internal-error"),Ct("boolean"===typeof w,e,"internal-error"),sn(d,e.name),sn(f,e.name),sn(p,e.name),sn(g,e.name),sn(m,e.name),sn(v,e.name);const C=new on({uid:y,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(C.providerData=_.map((e=>Object.assign({},e)))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new rn;r.updateFromServerResponse(t);const i=new on({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await tn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ct(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?nn(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new rn;o.updateFromIdToken(n);const a=new on({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new en(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const an=new Map;function ln(e){kt(e instanceof Function,"Expected a class definition");let t=an.get(e);return t?(kt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,an.set(e,t),t)}class un{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}un.type="NONE";const cn=un;function hn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class dn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=hn(this.userKey,r.apiKey,i),this.fullPersistenceKey=hn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?on._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new dn(ln(cn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ln(cn);const s=hn(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=on._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new dn(i,e,n)):new dn(i,e,n)}}function fn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(pn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bn(t))return"Blackberry";if(wn(t))return"Webos";if(gn(t))return"Safari";if((t.includes("chrome/")||mn(t))&&!t.includes("edge/"))return"Chrome";if(yn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/firefox\//i.test(e)}function gn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/crios\//i.test(e)}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iemobile/i.test(e)}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/android/i.test(e)}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/blackberry/i.test(e)}function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/webos/i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function En(){return function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return _n(e)||yn(e)||wn(e)||bn(e)||/windows phone/i.test(e)||vn(e)}function Cn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fn(E());break;case"Worker":t="".concat(fn(E()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qe,"/").concat(r)}class Pn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class kn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class In{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xn(this),this.idTokenSubscription=new xn(this),this.beforeStateQueue=new Pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ln(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await dn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Kt(this,{idToken:e}),n=await on._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ke(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ke(this.app))return Promise.reject(_t(this));const t=e?R(e):null;return t&&Ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Ke(this.app)?Promise.reject(_t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ke(this.app)?Promise.reject(_t(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ln(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Lt(e,"GET","/v2/passwordPolicy",Mt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new kn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Lt(e,"POST","/v2/accounts:revokeToken",Mt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ln(e)||this._popupRedirectResolver;Ct(t,this,"argument-error"),this.redirectPersistenceManager=await dn.create(this,[ln(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(mt.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mt.warn("Auth (".concat(Qe,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Tn(e){return R(e)}class xn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new N(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function An(e){return Dn.loadJS(e)}function On(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Nn{constructor(e){this.type="recaptcha-enterprise",this.auth=Tn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;qt(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Wt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Gt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&qt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Dn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),An(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function jn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Nn(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rn(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await jn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await jn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Mn(e,t,n){const r=Tn(e);Ct(r._canInitEmulator,r,"emulator-config-failed"),Ct(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ln(t),{host:o,port:a}=function(e){const t=Ln(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Fn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Fn(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ln(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Un{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}async function Vn(e,t){return Lt(e,"POST","/v1/accounts:signUp",t)}async function zn(e,t){return Ut(e,"POST","/v1/accounts:signInWithPassword",Mt(e,t))}class Bn extends Un{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Bn(e,t,"password")}static _fromEmailAndCode(e,t){return new Bn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Rn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",zn);case"emailLink":return async function(e,t){return Ut(e,"POST","/v1/accounts:signInWithEmailLink",Mt(e,t))}(e,{email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Rn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vn);case"emailLink":return async function(e,t){return Ut(e,"POST","/v1/accounts:signInWithEmailLink",Mt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Hn(e,t){return Ut(e,"POST","/v1/accounts:signInWithIdp",Mt(e,t))}class qn extends Un{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=dt(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new qn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Hn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Hn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Hn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=D(t)}return e}}const Gn={USER_NOT_FOUND:"user-not-found"};class Wn extends Un{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Wn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Wn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ut(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ut(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,t));if(n.temporaryProof)throw Ht(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ut(e,"POST","/v1/accounts:signInWithPhoneNumber",Mt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Gn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Wn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Kn{constructor(e){var t,n,r,i,s,o;const a=A(O(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ct(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=A(O(e)).link,n=t?A(O(t)).deep_link_id:null,r=A(O(e)).deep_link_id;return(r?A(O(r)).link:null)||r||n||t||e}(e);try{return new Kn(t)}catch(n){return null}}}class Xn{constructor(){this.providerId=Xn.PROVIDER_ID}static credential(e,t){return Bn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Kn.parseLink(t);return Ct(n,"argument-error"),Bn._fromEmailAndCode(e,n.code,n.tenantId)}}Xn.PROVIDER_ID="password",Xn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Yn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qn extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jn extends Qn{constructor(){super("facebook.com")}static credential(e){return qn._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Jn.credential(t.oauthAccessToken)}catch(n){return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jn.PROVIDER_ID="facebook.com";class $n extends Qn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qn._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $n.credential(n,r)}catch(i){return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com",$n.PROVIDER_ID="google.com";class Zn extends Qn{constructor(){super("github.com")}static credential(e){return qn._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zn.credential(t.oauthAccessToken)}catch(n){return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com",Zn.PROVIDER_ID="github.com";class er extends Qn{constructor(){super("twitter.com")}static credential(e,t){return qn._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return er.credential(n,r)}catch(i){return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com",er.PROVIDER_ID="twitter.com";class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await on._fromIdTokenResponse(e,n,r),s=nr(n);return new tr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nr(n);return new tr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rr extends P{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rr(e,t,n,r)}}function ir(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw rr._fromErrorAndOperation(e,n,t,r);throw n}))}async function sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await $t(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tr._forOperation(e,"link",r)}async function or(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ke(r.app))return Promise.reject(_t(r));const i="reauthenticate";try{const s=await $t(e,ir(r,i,t,e),n);Ct(s.idToken,r,"internal-error");const o=Qt(s.idToken);Ct(o,r,"internal-error");const{sub:a}=o;return Ct(e.uid===a,r,"user-mismatch"),tr._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&yt(r,"user-mismatch"),s}}async function ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke(e.app))return Promise.reject(_t(e));const r="signIn",i=await ir(e,r,t),s=await tr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const lr="__sak";class ur{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lr,"1"),this.storage.removeItem(lr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class cr extends ur{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=E();return gn(e)||_n(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Sn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);En()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cr.type="LOCAL";const hr=cr;class dr extends ur{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}dr.type="SESSION";const fr=dr;class pr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new pr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function gr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}pr.receivers=[];class mr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=gr("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function vr(){return window}function yr(){return"undefined"!==typeof vr().WorkerGlobalScope&&"function"===typeof vr().importScripts}const br="firebaseLocalStorageDb",wr="firebaseLocalStorage",_r="fbase_key";class Er{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Sr(e,t){return e.transaction([wr],t?"readwrite":"readonly").objectStore(wr)}function Cr(){const e=indexedDB.open(br,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(wr,{keyPath:_r})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(wr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(br);return new Er(e).toPromise()}(),t(await Cr()))}))}))}async function Pr(e,t,n){const r=Sr(e,!0).put({[_r]:t,value:n});return new Er(r).toPromise()}function kr(e,t){const n=Sr(e,!0).delete(t);return new Er(n).toPromise()}class Ir{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Cr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pr._getInstance(yr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new mr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cr();return await Pr(e,lr,"1"),await kr(e,lr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Pr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Sr(e,!1).get(t),r=await new Er(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>kr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Sr(e,!1).getAll();return new Er(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ir.type="LOCAL";const Tr=Ir;On("rcb"),new At(3e4,6e4);const xr="recaptcha";async function Dr(e,t,n){var r;const i=await n.verify();try{let s;if(Ct("string"===typeof i,e,"argument-error"),Ct(n.type===xr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Ct("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Lt(e,"POST","/v2/accounts/mfaEnrollment:start",Mt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ct("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Ct(n,e,"missing-multi-factor-info");const o=await function(e,t){return Lt(e,"POST","/v2/accounts/mfaSignIn:start",Mt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Lt(e,"POST","/v1/accounts:sendVerificationCode",Mt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Ar{constructor(e){this.providerId=Ar.PROVIDER_ID,this.auth=Tn(e)}verifyPhoneNumber(e,t){return Dr(this.auth,e,R(t))}static credential(e,t){return Wn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ar.credentialFromTaggedObject(t)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Wn._fromTokenResponse(n,r):null}}function Or(e,t){return t?ln(t):(Ct(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ar.PROVIDER_ID="phone",Ar.PHONE_SIGN_IN_METHOD="phone";class Nr extends Un{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Hn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Hn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jr(e){return ar(e.auth,new Nr(e),e.bypassAuthState)}function Rr(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),or(n,new Nr(e),e.bypassAuthState)}async function Mr(e){const{auth:t,user:n}=e;return Ct(n,t,"internal-error"),sr(n,new Nr(e),e.bypassAuthState)}class Lr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jr;case"linkViaPopup":case"linkViaRedirect":return Mr;case"reauthViaPopup":case"reauthViaRedirect":return Rr;default:yt(this.auth,"internal-error")}}resolve(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Fr=new At(2e3,1e4);class Ur extends Lr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ur.currentPopupAction&&Ur.currentPopupAction.cancel(),Ur.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){kt(1===this.filter.length,"Popup operations only handle one event");const e=gr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(bt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ur.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(bt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Fr.get())};e()}}Ur.currentPopupAction=null;const Vr="pendingRedirect",zr=new Map;class Br extends Lr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=zr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Gr(t),r=qr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}zr.set(this.auth._key(),e)}return this.bypassAuthState||zr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Hr(e,t){zr.set(e._key(),t)}function qr(e){return ln(e._redirectPersistence)}function Gr(e){return hn(Vr,e.config.apiKey,e.name)}async function Wr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ke(e.app))return Promise.reject(_t(e));const r=Tn(e),i=Or(r,t),s=new Br(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Kr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Yr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xr(e))}saveEventToCache(e){this.cachedEventUids.add(Xr(e)),this.lastProcessedEventTime=Date.now()}}function Xr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Yr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Qr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jr=/^https?/;async function $r(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Lt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Zr(r))return}catch(n){}yt(e,"unauthorized-domain")}function Zr(e){const t=It(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Jr.test(n))return!1;if(Qr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ei=new At(3e4,6e4);function ti(){const e=vr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function ni(e){return new Promise(((t,n)=>{var r,i,s;function o(){ti(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ti(),n(bt(e,"network-request-failed"))},timeout:ei.get()})}if(null===(i=null===(r=vr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=vr().gapi)||void 0===s?void 0:s.load)){const t=On("iframefcb");return vr()[t]=()=>{gapi.load?o():n(bt(e,"network-request-failed"))},An("".concat(Dn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ri=null,e}))}let ri=null;const ii=new At(5e3,15e3),si="__/auth/iframe",oi="emulator/auth/iframe",ai={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ui(e){const t=e.config;Ct(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ot(t,oi):"https://".concat(e.config.authDomain,"/").concat(si),r={apiKey:t.apiKey,appName:e.name,v:Qe},i=li.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(D(r).slice(1))}async function ci(e){const t=await function(e){return ri=ri||ni(e),ri}(e),n=vr().gapi;return Ct(n,e,"internal-error"),t.open({where:document.body,url:ui(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ai,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=bt(e,"network-request-failed"),s=vr().setTimeout((()=>{r(i)}),ii.get());function o(){vr().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const hi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class di{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function fi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hi),{width:r.toString(),height:i.toString(),top:s,left:o}),u=E().toLowerCase();n&&(a=mn(u)?"_blank":n),pn(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return _n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new di(null);const h=window.open(t||"",a,c);Ct(h,e,"popup-blocked");try{h.focus()}catch(d){}return new di(h)}const pi="__/auth/handler",gi="emulator/auth/handler",mi=encodeURIComponent("fac");async function vi(e,t,n,r,i,s){Ct(e.config.authDomain,e,"auth-domain-config-required"),Ct(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qe,eventId:i};if(t instanceof Yn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Qn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?"#".concat(mi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pi);return Ot(t,gi)}(e),"?").concat(D(a).slice(1)).concat(u)}const yi="webStorageSupport";const bi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fr,this._completeRedirectFn=Wr,this._overrideRedirectResult=Hr}async _openPopup(e,t,n,r){var i;kt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return fi(e,await vi(e,t,n,It(),r),gr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){vr().location.href=e}(await vi(e,t,n,It(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(kt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ci(e),n=new Kr(e);return t.register("authEvent",(t=>{Ct(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yi,{type:yi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yi];void 0!==i&&t(!!i),yt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$r(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sn()||gn()||_n()}};var wi="@firebase/auth",_i="1.7.5";class Ei{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Si=w("authIdTokenMaxAge")||300;let Ci=null;var Pi;Dn={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=bt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Pi="Browser",Ge(new M("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ct(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Pi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(Pi)},u=new In(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ln);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ge(new M("auth-internal",(e=>(e=>new Ei(e))(Tn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(wi,_i,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pi)),Ze(wi,_i,"esm2017");var ki,Ii,Ti="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},xi={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);h(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ii=xi.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},ki=xi.Integer=r}).apply("undefined"!==typeof Ti?Ti:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Di,Ai,Oi,Ni,ji,Ri,Mi,Li,Fi,Ui="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ui&&Ui];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function C(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var P=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,T=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=P.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(A)}};var A=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){S(n)}var t=P;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function O(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function R(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&R.aa.h.call(this)}}h(R,N);var M={2:"touch",3:"pen",4:"mouse"};R.prototype.h=function(){R.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=H(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,i){if(r&&r.once)return X(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)j||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function X(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)X(e,t[s],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function J(e){return e in G?G[e]:G[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new R(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;_(t=new N(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,O),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}h(le,O);var ue=[];function ce(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Q(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){N.call(this,"d")}function be(){N.call(this,"c")}h(ye,N),h(be,N);var we={},_e=null;function Ee(){return _e=_e||new ne}function Se(e){N.call(this,we.La,e)}function Ce(e){const t=Ee();re(t,new Se(t))}function Pe(e,t){N.call(this,we.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ee();re(t,new Pe(t,e))}function Ie(e,t){N.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function xe(){this.g=!0}function De(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Se,N),we.STAT_EVENT="statevent",h(Pe,N),we.Ma="timingevent",h(Ie,N),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var Ae,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function je(){}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(je,pe),je.prototype.g=function(){return new XMLHttpRequest},je.prototype.i=function(){return{}},Ae=new je;var Le={},Fe={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),He(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Pt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(u(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Qt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(u(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ge(a),He(a)),r.g=o}else nn(r);0<n.i.length&&$t(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Yt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ce()}catch(c){}}Re.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||Ce(),Ge(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,ke(12),Ke(this),We(this);break e}De(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==d&&(this.s=4,ke(14),n=!1),De(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,ke(15),De(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}De(this.i,this.l,e,null),Xe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,ke(11))}}else De(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else De(this.i,this.l,a,null),Xe(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ke(this),We(this)}}}catch(d){}},Re.prototype.cancel=function(){this.J=!0,Ke(this)},Re.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ce(),ke(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Pt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new _t(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){Et(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return Et(e),t=kt(e,t),e.g.has(t)}function Pt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function It(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Tt(){this.g=new fe}function xt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,jt(e)}function jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){Et(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Ct(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Dt,pe),Dt.prototype.g=function(){return new At(this.l,this.j)},Dt.prototype.i=(gt={},function(){return gt}),h(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jt(this)),this.g&&(this.readyState=3,jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):jt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Qa=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Lt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Ht(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Gt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){qt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Hi){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Re(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function Qt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Qt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||D(),T||(I(),T=!0),x.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Re(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{xt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||D(),T||(I(),T=!0),x.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ie(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new xe;if(i.Image){const r=new Image;r.onload=c(It,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(It,n,"TestLoadImage: error",!1,t,r),r.onabort=c(It,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(It,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout((()=>{n.abort(),It(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?It(0,0,!0,t):It(0,0,!1,t)})).catch((()=>{clearTimeout(r),It(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),Jt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Dt({eb:n})):new Lt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?ge(this.o):ge(Ae),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Re(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Rt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Qt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},h(vn,ye),h(yn,be),h(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Fi=Vi.createWebChannelTransport=function(){return new gn},Li=Vi.getStatEventTarget=function(){return Ee()},Mi=Vi.Event=we,Ri=Vi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,ji=Vi.ErrorCode=Oe,Ne.COMPLETE="complete",Ni=Vi.EventType=Ne,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Oi=Vi.WebChannel=me,Ai=Vi.FetchXmlHttpFactory=Dt,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Di=Vi.XhrIo=Lt}).apply("undefined"!==typeof Ui?Ui:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const zi="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let Hi="10.12.3";const qi=new W("@firebase/firestore");function Gi(){return qi.logLevel}function Wi(e){if(qi.logLevel<=z.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);qi.debug("Firestore (".concat(Hi,"): ").concat(e),...i)}}function Ki(e){if(qi.logLevel<=z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);qi.error("Firestore (".concat(Hi,"): ").concat(e),...i)}}function Xi(e){if(qi.logLevel<=z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);qi.warn("Firestore (".concat(Hi,"): ").concat(e),...i)}}function Yi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Hi,") INTERNAL ASSERTION FAILED: ")+e;throw Ki(t),new Error(t)}function Ji(e,t){e||Qi()}function $i(e,t){return e}const Zi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class es extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ns{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class rs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bi.UNAUTHENTICATED)))}shutdown(){}}class is{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ss{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ts;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ts,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Wi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Wi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ts)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Wi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ji("string"==typeof t.accessToken),new ns(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ji(null===e||"string"==typeof e),new Bi(e)}}class os{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class as{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new os(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Bi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ls{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class us{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Wi("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Wi("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Wi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Wi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ji("string"==typeof e.token),this.R=e.token,new ls(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class hs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=cs(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ds(e,t){return e<t?-1:e>t?1:0}function fs(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class ps{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new es(Zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new es(Zi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new es(Zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new es(Zi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ps.fromMillis(Date.now())}static fromDate(e){return ps.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ps(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ds(this.nanoseconds,e.nanoseconds):ds(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gs(e)}static min(){return new gs(new ps(0,0))}static max(){return new gs(new ps(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ms{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qi(),void 0===n?n=e.length-t:n>e.length-t&&Qi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ms.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ms?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vs extends ms{construct(e,t,n){return new vs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new es(Zi.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new vs(e)}static emptyPath(){return new vs([])}}const ys=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bs extends ms{construct(e,t,n){return new bs(e,t,n)}static isValidIdentifier(e){return ys.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bs(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new es(Zi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new es(Zi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new es(Zi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new es(Zi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bs(t)}static emptyPath(){return new bs([])}}class ws{constructor(e){this.path=e}static fromPath(e){return new ws(vs.fromString(e))}static fromName(e){return new ws(vs.fromString(e).popFirst(5))}static empty(){return new ws(vs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ws(new vs(e.slice()))}}class _s{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_s.UNKNOWN_ID=-1;function Es(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=gs.fromTimestamp(1e9===r?new ps(n+1,0):new ps(n,r));return new Cs(i,ws.empty(),t)}function Ss(e){return new Cs(e.readTime,e.key,-1)}class Cs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cs(gs.min(),ws.empty(),-1)}static max(){return new Cs(gs.max(),ws.empty(),-1)}}function Ps(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ws.comparator(e.documentKey,t.documentKey),0!==n?n:ds(e.largestBatchId,t.largestBatchId))}const ks="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Is{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ts(e){if(e.code!==Zi.FAILED_PRECONDITION||e.message!==ks)throw e;Wi("LocalStore","Unexpectedly lost primary lease")}class xs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xs(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xs?t:xs.resolve(t)}catch(e){return xs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xs.reject(t)}static resolve(e){return new xs(((t,n)=>{t(e)}))}static reject(e){return new xs(((t,n)=>{n(e)}))}static waitFor(e){return new xs(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=xs.resolve(!1);for(const n of e)t=t.next((e=>e?xs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new xs(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new xs(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Ds(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function As(e){return"IndexedDbTransactionError"===e.name}class Os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Ns(e){return null==e}function js(e){return 0===e&&1/e==-1/0}function Rs(e){return"number"==typeof e&&Number.isInteger(e)&&!js(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Os.oe=-1;const Ms=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ls=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fs=Ls;function Us(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Bs{constructor(e,t){this.comparator=e,this.root=t||qs.EMPTY}insert(e,t){return new Bs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qs.BLACK,null,null))}remove(e){return new Bs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hs(this.root,e,this.comparator,!0)}}class Hs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qs{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:qs.RED,this.left=null!=r?r:qs.EMPTY,this.right=null!=i?i:qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new qs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return qs.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qi();if(this.right.isRed())throw Qi();const e=this.left.check();if(e!==this.right.check())throw Qi();return e+(this.isRed()?0:1)}}qs.EMPTY=null,qs.RED=!0,qs.BLACK=!1,qs.EMPTY=new class{constructor(){this.size=0}get key(){throw Qi()}get value(){throw Qi()}get color(){throw Qi()}get left(){throw Qi()}get right(){throw Qi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new qs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gs{constructor(e){this.comparator=e,this.data=new Bs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(e){return new Ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Gs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gs(this.comparator);return t.data=e,t}}class Ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ks{constructor(e){this.fields=e,e.sort(bs.comparator)}static empty(){return new Ks([])}unionWith(e){let t=new Gs(bs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Xs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Xs("Invalid base64 string: "+e):e}}(e);return new Ys(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ds(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const Qs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(e){if(Ji(!!e),"string"==typeof e){let t=0;const n=Qs.exec(e);if(Ji(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$s(e.seconds),nanos:$s(e.nanos)}}function $s(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zs(e){return"string"==typeof e?Ys.fromBase64String(e):Ys.fromUint8Array(e)}function eo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function to(e){const t=e.mapValue.fields.__previous_value__;return eo(t)?to(t):t}function no(e){const t=Js(e.mapValue.fields.__local_write_time__.timestampValue);return new ps(t.seconds,t.nanos)}class ro{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class io{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}const so={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?eo(e)?4:wo(e)?9007199254740991:10:Qi()}function ao(e,t){if(e===t)return!0;const n=oo(e);if(n!==oo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return no(e).isEqual(no(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Js(e.timestampValue),r=Js(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zs(e.bytesValue).isEqual(Zs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $s(e.geoPointValue.latitude)===$s(t.geoPointValue.latitude)&&$s(e.geoPointValue.longitude)===$s(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $s(e.integerValue)===$s(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$s(e.doubleValue),r=$s(t.doubleValue);return n===r?js(n)===js(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fs(e.arrayValue.values||[],t.arrayValue.values||[],ao);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Us(n)!==Us(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ao(n[i],r[i])))return!1;return!0}(e,t);default:return Qi()}}function lo(e,t){return void 0!==(e.values||[]).find((e=>ao(e,t)))}function uo(e,t){if(e===t)return 0;const n=oo(e),r=oo(t);if(n!==r)return ds(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ds(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$s(e.integerValue||e.doubleValue),r=$s(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return co(e.timestampValue,t.timestampValue);case 4:return co(no(e),no(t));case 5:return ds(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Zs(e),r=Zs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ds(n[i],r[i]);if(0!==e)return e}return ds(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ds($s(e.latitude),$s(t.latitude));return 0!==n?n:ds($s(e.longitude),$s(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=uo(n[i],r[i]);if(e)return e}return ds(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===so.mapValue&&t===so.mapValue)return 0;if(e===so.mapValue)return 1;if(t===so.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ds(r[o],s[o]);if(0!==e)return e;const t=uo(n[r[o]],i[s[o]]);if(0!==t)return t}return ds(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Qi()}}function co(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ds(e,t);const n=Js(e),r=Js(t),i=ds(n.seconds,r.seconds);return 0!==i?i:ds(n.nanos,r.nanos)}function ho(e){return fo(e)}function fo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Js(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Zs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ws.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=fo(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(fo(e.fields[i]));return n+"}"}(e.mapValue):Qi()}function po(e){return!!e&&"integerValue"in e}function go(e){return!!e&&"arrayValue"in e}function mo(e){return!!e&&"nullValue"in e}function vo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yo(e){return!!e&&"mapValue"in e}function bo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Vs(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=bo(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class _o{constructor(e){this.value=e}static empty(){return new _o({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bo(t)}setAll(e){let t=bs.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=bo(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Vs(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new _o(bo(this.value))}}function Eo(e){const t=[];return Vs(e.fields,((e,n)=>{const r=new bs([e]);if(yo(n)){const e=Eo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ks(t)}class So{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new So(e,0,gs.min(),gs.min(),gs.min(),_o.empty(),0)}static newFoundDocument(e,t,n,r){return new So(e,1,t,gs.min(),n,r,0)}static newNoDocument(e,t){return new So(e,2,t,gs.min(),gs.min(),_o.empty(),0)}static newUnknownDocument(e,t){return new So(e,3,t,gs.min(),gs.min(),_o.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_o.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_o.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof So&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new So(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Co{constructor(e,t){this.position=e,this.inclusive=t}}function Po(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ws.comparator(ws.fromName(o.referenceValue),n.key):uo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ko(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ao(e.position[n],t.position[n]))return!1;return!0}class Io{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function To(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xo{}class Do extends xo{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fo(e,t,n):"array-contains"===t?new Bo(e,n):"in"===t?new Ho(e,n):"not-in"===t?new qo(e,n):"array-contains-any"===t?new Go(e,n):new Do(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Uo(e,n):new Vo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(uo(t,this.value)):null!==t&&oo(this.value)===oo(t)&&this.matchesComparison(uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ao extends xo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ao(e,t)}matches(e){return Oo(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Oo(e){return"and"===e.op}function No(e){return jo(e)&&Oo(e)}function jo(e){for(const t of e.filters)if(t instanceof Ao)return!1;return!0}function Ro(e){if(e instanceof Do)return e.field.canonicalString()+e.op.toString()+ho(e.value);if(No(e))return e.filters.map((e=>Ro(e))).join(",");{const t=e.filters.map((e=>Ro(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Mo(e,t){return e instanceof Do?function(e,t){return t instanceof Do&&e.op===t.op&&e.field.isEqual(t.field)&&ao(e.value,t.value)}(e,t):e instanceof Ao?function(e,t){return t instanceof Ao&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Mo(n,t.filters[r])),!0)}(e,t):void Qi()}function Lo(e){return e instanceof Do?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ho(e.value))}(e):e instanceof Ao?function(e){return e.op.toString()+" {"+e.getFilters().map(Lo).join(" ,")+"}"}(e):"Filter"}class Fo extends Do{constructor(e,t,n){super(e,t,n),this.key=ws.fromName(n.referenceValue)}matches(e){const t=ws.comparator(e.key,this.key);return this.matchesComparison(t)}}class Uo extends Do{constructor(e,t){super(e,"in",t),this.keys=zo("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Vo extends Do{constructor(e,t){super(e,"not-in",t),this.keys=zo("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ws.fromName(e.referenceValue)))}class Bo extends Do{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return go(t)&&lo(t.arrayValue,this.value)}}class Ho extends Do{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lo(this.value.arrayValue,t)}}class qo extends Do{constructor(e,t){super(e,"not-in",t)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lo(this.value.arrayValue,t)}}class Go extends Do{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!go(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>lo(this.value.arrayValue,e)))}}class Wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Ko(e){return new Wo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xo(e){const t=$i(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ro(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ns(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>ho(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>ho(e))).join(",")),t.ue=e}return t.ue}function Yo(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!To(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Mo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ko(e.startAt,t.startAt)&&ko(e.endAt,t.endAt)}function Qo(e){return ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Jo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $o(e,t,n,r,i,s,o,a){return new Jo(e,t,n,r,i,s,o,a)}function Zo(e){return new Jo(e)}function ea(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ta(e){return null!==e.collectionGroup}function na(e){const t=$i(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Gs(bs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Io(r,n))})),e.has(bs.keyField().canonicalString())||t.ce.push(new Io(bs.keyField(),n))}return t.ce}function ra(e){const t=$i(e);return t.le||(t.le=ia(t,na(e))),t.le}function ia(e,t){if("F"===e.limitType)return Ko(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Io(e.field,t)}));const n=e.endAt?new Co(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Co(e.startAt.position,e.startAt.inclusive):null;return Ko(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function sa(e,t,n){return new Jo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oa(e,t){return Yo(ra(e),ra(t))&&e.limitType===t.limitType}function aa(e){return"".concat(Xo(ra(e)),"|lt:").concat(e.limitType)}function la(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Lo(e))).join(", "),"]")),Ns(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>ho(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>ho(e))).join(",")),"Target(".concat(t,")")}(ra(e)),"; limitType=").concat(e.limitType,")")}function ua(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ws.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of na(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Po(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,na(e),t))&&!(e.endAt&&!function(e,t,n){const r=Po(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,na(e),t))}(e,t)}function ca(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ha(e){return(t,n)=>{let r=!1;for(const i of na(e)){const e=da(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function da(e,t,n){const r=e.field.isKeyField()?ws.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?uo(r,i):Qi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qi()}}class fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return zs(this.inner)}size(){return this.innerSize}}const pa=new Bs(ws.comparator);function ga(){return pa}const ma=new Bs(ws.comparator);function va(){let e=ma;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ya(e){let t=ma;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ba(){return _a()}function wa(){return _a()}function _a(){return new fa((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ea=new Bs(ws.comparator),Sa=new Gs(ws.comparator);function Ca(){let e=Sa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Pa=new Gs(ds);function ka(){return Pa}function Ia(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:js(t)?"-0":t}}function Ta(e){return{integerValue:""+e}}function xa(e,t){return Rs(t)?Ta(t):Ia(e,t)}class Da{constructor(){this._=void 0}}function Aa(e,t,n){return e instanceof ja?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&eo(t)&&(t=to(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ra?Ma(e,t):e instanceof La?Fa(e,t):function(e,t){const n=Na(e,t),r=Va(n)+Va(e.Pe);return po(n)&&po(e.Pe)?Ta(r):Ia(e.serializer,r)}(e,t)}function Oa(e,t,n){return e instanceof Ra?Ma(e,t):e instanceof La?Fa(e,t):n}function Na(e,t){return e instanceof Ua?function(e){return po(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ja extends Da{}class Ra extends Da{constructor(e){super(),this.elements=e}}function Ma(e,t){const n=za(t);for(const r of e.elements)n.some((e=>ao(e,r)))||n.push(r);return{arrayValue:{values:n}}}class La extends Da{constructor(e){super(),this.elements=e}}function Fa(e,t){let n=za(t);for(const r of e.elements)n=n.filter((e=>!ao(e,r)));return{arrayValue:{values:n}}}class Ua extends Da{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Va(e){return $s(e.integerValue||e.doubleValue)}function za(e){return go(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ba{constructor(e,t){this.version=e,this.transformResults=t}}class Ha{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ha}static exists(e){return new Ha(void 0,e)}static updateTime(e){return new Ha(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qa(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ga{}function Wa(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new nl(e.key,Ha.none()):new Ja(e.key,e.data,Ha.none());{const n=e.data,r=_o.empty();let i=new Gs(bs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new $a(e.key,r,new Ks(i.toArray()),Ha.none())}}function Ka(e,t,n){e instanceof Ja?function(e,t,n){const r=e.value.clone(),i=el(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $a?function(e,t,n){if(!qa(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=el(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Za(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xa(e,t,n,r){return e instanceof Ja?function(e,t,n,r){if(!qa(e.precondition,t))return n;const i=e.value.clone(),s=tl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $a?function(e,t,n,r){if(!qa(e.precondition,t))return n;const i=tl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Za(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return qa(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ya(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Na(r.transform,e||null);null!=i&&(null===n&&(n=_o.empty()),n.set(r.field,i))}return n||null}function Qa(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ra&&t instanceof Ra||e instanceof La&&t instanceof La?fs(e.elements,t.elements,ao):e instanceof Ua&&t instanceof Ua?ao(e.Pe,t.Pe):e instanceof ja&&t instanceof ja}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ja extends Ga{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $a extends Ga{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Za(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function el(e,t,n){const r=new Map;Ji(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Oa(o,a,n[i]))}return r}function tl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Aa(e,s,t))}return r}class nl extends Ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rl extends Ga{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class il{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ka(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xa(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xa(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wa();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Wa(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(gs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ca())}isEqual(e){return this.batchId===e.batchId&&fs(this.mutations,e.mutations,((e,t)=>Qa(e,t)))&&fs(this.baseMutations,e.baseMutations,((e,t)=>Qa(e,t)))}}class sl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ji(e.mutations.length===n.length);let r=Ea;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new sl(e,t,n,r)}}class ol{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class al{constructor(e,t){this.count=e,this.unchangedNames=t}}var ll,ul;function cl(e){switch(e){default:return Qi();case Zi.CANCELLED:case Zi.UNKNOWN:case Zi.DEADLINE_EXCEEDED:case Zi.RESOURCE_EXHAUSTED:case Zi.INTERNAL:case Zi.UNAVAILABLE:case Zi.UNAUTHENTICATED:return!1;case Zi.INVALID_ARGUMENT:case Zi.NOT_FOUND:case Zi.ALREADY_EXISTS:case Zi.PERMISSION_DENIED:case Zi.FAILED_PRECONDITION:case Zi.ABORTED:case Zi.OUT_OF_RANGE:case Zi.UNIMPLEMENTED:case Zi.DATA_LOSS:return!0}}function hl(e){if(void 0===e)return Ki("GRPC error has no .code"),Zi.UNKNOWN;switch(e){case ll.OK:return Zi.OK;case ll.CANCELLED:return Zi.CANCELLED;case ll.UNKNOWN:return Zi.UNKNOWN;case ll.DEADLINE_EXCEEDED:return Zi.DEADLINE_EXCEEDED;case ll.RESOURCE_EXHAUSTED:return Zi.RESOURCE_EXHAUSTED;case ll.INTERNAL:return Zi.INTERNAL;case ll.UNAVAILABLE:return Zi.UNAVAILABLE;case ll.UNAUTHENTICATED:return Zi.UNAUTHENTICATED;case ll.INVALID_ARGUMENT:return Zi.INVALID_ARGUMENT;case ll.NOT_FOUND:return Zi.NOT_FOUND;case ll.ALREADY_EXISTS:return Zi.ALREADY_EXISTS;case ll.PERMISSION_DENIED:return Zi.PERMISSION_DENIED;case ll.FAILED_PRECONDITION:return Zi.FAILED_PRECONDITION;case ll.ABORTED:return Zi.ABORTED;case ll.OUT_OF_RANGE:return Zi.OUT_OF_RANGE;case ll.UNIMPLEMENTED:return Zi.UNIMPLEMENTED;case ll.DATA_LOSS:return Zi.DATA_LOSS;default:return Qi()}}(ul=ll||(ll={}))[ul.OK=0]="OK",ul[ul.CANCELLED=1]="CANCELLED",ul[ul.UNKNOWN=2]="UNKNOWN",ul[ul.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ul[ul.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ul[ul.NOT_FOUND=5]="NOT_FOUND",ul[ul.ALREADY_EXISTS=6]="ALREADY_EXISTS",ul[ul.PERMISSION_DENIED=7]="PERMISSION_DENIED",ul[ul.UNAUTHENTICATED=16]="UNAUTHENTICATED",ul[ul.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ul[ul.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ul[ul.ABORTED=10]="ABORTED",ul[ul.OUT_OF_RANGE=11]="OUT_OF_RANGE",ul[ul.UNIMPLEMENTED=12]="UNIMPLEMENTED",ul[ul.INTERNAL=13]="INTERNAL",ul[ul.UNAVAILABLE=14]="UNAVAILABLE",ul[ul.DATA_LOSS=15]="DATA_LOSS";let dl=null;function fl(){return new TextEncoder}const pl=new ki([4294967295,4294967295],0);function gl(e){const t=fl().encode(e),n=new Ii;return n.update(t),new Uint8Array(n.digest())}function ml(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ki([n,r],0),new ki([i,s],0)]}class vl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new yl("Invalid padding: ".concat(t));if(n<0)throw new yl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new yl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new yl("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ki.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ki.fromNumber(n)));return 1===r.compare(pl)&&(r=new ki([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=gl(e),[n,r]=ml(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new vl(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=gl(e),[n,r]=ml(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new bl(gs.min(),r,new Bs(ds),ga(),Ca())}}class wl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wl(n,t,Ca(),Ca(),Ca())}}class _l{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class El{constructor(e,t){this.targetId=e,this.me=t}}class Sl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ys.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Cl{constructor(){this.fe=0,this.ge=Il(),this.pe=Ys.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ca(),t=Ca(),n=Ca();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qi()}})),new wl(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=Il()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ji(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pl{constructor(e){this.Le=e,this.Be=new Map,this.ke=ga(),this.qe=kl(),this.Qe=new Bs(ds)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Qi()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Qo(i))if(0===n){const e=new ws(i.path);this.Ue(t,e,So.newNoDocument(e,gs.min()))}else Ji(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==dl||dl.et(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Zs(n).toUint8Array()}catch(e){if(e instanceof Xs)return Xi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new vl(s,r,i)}catch(e){return Xi(e instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Qo(i.target)){const t=new ws(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,So.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Ca();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new bl(e,t,this.Qe,this.ke,n);return this.ke=ga(),this.qe=kl(),this.Qe=new Bs(ds),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Cl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gs(ds),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Wi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cl),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function kl(){return new Bs(ws.comparator)}function Il(){return new Bs(ws.comparator)}const Tl={asc:"ASCENDING",desc:"DESCENDING"},xl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dl={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ol(e,t){return e.useProto3Json||Ns(t)?t:{value:t}}function Nl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rl(e,t){return Nl(e,t.toTimestamp())}function Ml(e){return Ji(!!e),gs.fromTimestamp(function(e){const t=Js(e);return new ps(t.seconds,t.nanos)}(e))}function Ll(e,t){return Fl(e,t).canonicalString()}function Fl(e,t){const n=function(e){return new vs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ul(e){const t=vs.fromString(e);return Ji(su(t)),t}function Vl(e,t){return Ll(e.databaseId,t.path)}function zl(e,t){const n=Ul(t);if(n.get(1)!==e.databaseId.projectId)throw new es(Zi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new es(Zi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ws(Gl(n))}function Bl(e,t){return Ll(e.databaseId,t)}function Hl(e){const t=Ul(e);return 4===t.length?vs.emptyPath():Gl(t)}function ql(e){return new vs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gl(e){return Ji(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wl(e,t,n){return{name:Vl(e,t),fields:n.value.mapValue.fields}}function Kl(e,t){let n;if(t instanceof Ja)n={update:Wl(e,t.key,t.value)};else if(t instanceof nl)n={delete:Vl(e,t.key)};else if(t instanceof $a)n={update:Wl(e,t.key,t.data),updateMask:iu(t.fieldMask)};else{if(!(t instanceof rl))return Qi();n={verify:Vl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ja)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ra)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof La)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ua)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Qi()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qi()}(e,t.precondition)),n}function Xl(e,t){return{documents:[Bl(e,t.path)]}}function Yl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bl(e,i);const s=function(e){if(0!==e.length)return ru(Ao.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tu(e.field),direction:$l(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ol(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Ql(e){let t=Hl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ji(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Jl(e);return t instanceof Ao&&No(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Io(nu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ns(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Co(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Co(n,t)}(n.endAt)),$o(t,i,o,s,a,"F",l,u)}function Jl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=nu(e.unaryFilter.field);return Do.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=nu(e.unaryFilter.field);return Do.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nu(e.unaryFilter.field);return Do.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=nu(e.unaryFilter.field);return Do.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qi()}}(e):void 0!==e.fieldFilter?function(e){return Do.create(nu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ao.create(e.compositeFilter.filters.map((e=>Jl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qi()}}(e.compositeFilter.op))}(e):Qi()}function $l(e){return Tl[e]}function Zl(e){return xl[e]}function eu(e){return Dl[e]}function tu(e){return{fieldPath:e.canonicalString()}}function nu(e){return bs.fromServerFormat(e.fieldPath)}function ru(e){return e instanceof Do?function(e){if("=="===e.op){if(vo(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NAN"}};if(mo(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vo(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NOT_NAN"}};if(mo(e.value))return{unaryFilter:{field:tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(e.field),op:Zl(e.op),value:e.value}}}(e):e instanceof Ao?function(e){const t=e.getFilters().map((e=>ru(e)));return 1===t.length?t[0]:{compositeFilter:{op:eu(e.op),filters:t}}}(e):Qi()}function iu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function su(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ou{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:gs.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ys.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class au{constructor(e){this.ct=e}}function lu(e){const t=Ql({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sa(t,t.limit,"L"):t}class uu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt($s(e.integerValue));else if("doubleValue"in e){const n=$s(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),js(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=Js(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Zs(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?wo(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Qi()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),ws.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}uu.bt=new uu;class cu{constructor(){this._n=new hu}addToCollectionParentIndex(e,t){return this._n.add(t),xs.resolve()}getCollectionParents(e,t){return xs.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return xs.resolve()}deleteFieldIndex(e,t){return xs.resolve()}deleteAllFieldIndexes(e){return xs.resolve()}createTargetIndexes(e,t){return xs.resolve()}getDocumentsMatchingTarget(e,t){return xs.resolve(null)}getIndexType(e,t){return xs.resolve(0)}getFieldIndexes(e,t){return xs.resolve([])}getNextCollectionGroupToUpdate(e){return xs.resolve(null)}getMinOffset(e,t){return xs.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return xs.resolve(Cs.min())}updateCollectionGroup(e,t,n){return xs.resolve()}updateIndexEntries(e,t){return xs.resolve()}}class hu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gs(vs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Gs(vs.comparator)).toArray()}}new Uint8Array(0);class du{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new du(e,du.DEFAULT_COLLECTION_PERCENTILE,du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}du.DEFAULT_COLLECTION_PERCENTILE=10,du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,du.DEFAULT=new du(41943040,du.DEFAULT_COLLECTION_PERCENTILE,du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),du.DISABLED=new du(-1,0,0);class fu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fu(0)}static Ln(){return new fu(-1)}}class pu{constructor(){this.changes=new fa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,So.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Xa(n.mutation,e,Ks.empty(),ps.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ca()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ca();const r=ba();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=va();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ba();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ca())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ga();const s=_a(),o=_a();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $a)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Xa(o.mutation,t,o.mutation.getFieldMask(),ps.now())):s.set(t.key,Ks.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new gu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=_a();let r=new Bs(((e,t)=>e-t)),i=Ca();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ks.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ca()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=wa();l.forEach((e=>{if(!i.has(e)){const r=Wa(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return xs.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ws.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ta(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xs.resolve(ba());let o=-1,a=i;return s.next((t=>xs.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ca()))).next((e=>({batchId:o,changes:ya(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ws(t)).next((e=>{let t=va();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=va();return this.indexManager.getCollectionParents(e,i).next((o=>xs.forEach(o,(o=>{const a=function(e,t){return new Jo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,So.newInvalidDocument(r)))}));let n=va();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Xa(s.mutation,r,Ks.empty(),ps.now()),ua(t,r)&&(n=n.insert(e,r))})),n}))}}class vu{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return xs.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ml(e.createTime)}}(t)),xs.resolve()}getNamedQuery(e,t){return xs.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:lu(e.bundledQuery),readTime:Ml(e.readTime)}}(t)),xs.resolve()}}class yu{constructor(){this.overlays=new Bs(ws.comparator),this.hr=new Map}getOverlay(e,t){return xs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ba();return xs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),xs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),xs.resolve()}getOverlaysForCollection(e,t,n){const r=ba(),i=t.length+1,s=new ws(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Bs(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ba(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ba(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return xs.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ol(t,n));let i=this.hr.get(t);void 0===i&&(i=Ca(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class bu{constructor(){this.Pr=new Gs(wu.Ir),this.Tr=new Gs(wu.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new wu(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new wu(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new ws(new vs([])),n=new wu(t,e),r=new wu(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ws(new vs([])),n=new wu(t,e),r=new wu(t,e+1);let i=Ca();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wu(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wu{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ws.comparator(e.key,t.key)||ds(e.pr,t.pr)}static Er(e,t){return ds(e.pr,t.pr)||ws.comparator(e.key,t.key)}}class _u{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Gs(wu.Ir)}checkEmpty(e){return xs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new il(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new wu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xs.resolve(s)}lookupMutationBatch(e,t){return xs.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return xs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xs.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return xs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wu(t,0),r=new wu(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),xs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Gs(ds);return t.forEach((e=>{const t=new wu(e,0),r=new wu(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),xs.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ws.isDocumentKey(i)||(i=i.child(""));const s=new wu(new ws(i),0);let o=new Gs(ds);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),xs.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ji(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return xs.forEach(t.mutations,(r=>{const i=new wu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new wu(t,0),r=this.wr.firstAfterOrEqual(n);return xs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xs.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Eu{constructor(e){this.vr=e,this.docs=new Bs(ws.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xs.resolve(n?n.document.mutableCopy():So.newInvalidDocument(t))}getEntries(e,t){let n=ga();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():So.newInvalidDocument(e))})),xs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ga();const s=t.path,o=new ws(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ps(Ss(o),n)<=0||(r.has(o.key)||ua(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Qi()}Fr(e,t){return xs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Su(this)}getSize(e){return xs.resolve(this.size)}}class Su extends pu{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),xs.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Cu{constructor(e){this.persistence=e,this.Mr=new fa((e=>Xo(e)),Yo),this.lastRemoteSnapshotVersion=gs.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bu,this.targetCount=0,this.Lr=fu.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),xs.resolve()}getLastRemoteSnapshotVersion(e){return xs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xs.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),xs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),xs.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new fu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,xs.resolve()}updateTargetData(e,t){return this.qn(t),xs.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,xs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),xs.waitFor(i).next((()=>r))}getTargetCount(e){return xs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return xs.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),xs.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),xs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),xs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return xs.resolve(n)}containsKey(e,t){return xs.resolve(this.Nr.containsKey(t))}}class Pu{constructor(e,t){this.Br={},this.overlays={},this.kr=new Os(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Cu(this),this.indexManager=new cu,this.remoteDocumentCache=function(e){return new Eu(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new au(t),this.$r=new vu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new _u(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Wi("MemoryPersistence","Starting transaction:",e);const r=new ku(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return xs.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class ku extends Is{constructor(e){super(),this.currentSequenceNumber=e}}class Iu{constructor(e){this.persistence=e,this.zr=new bu,this.jr=null}static Hr(e){return new Iu(e)}get Jr(){if(this.jr)return this.jr;throw Qi()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),xs.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),xs.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),xs.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xs.forEach(this.Jr,(n=>{const r=ws.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,gs.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return xs.or([()=>xs.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Tu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Ca(),r=Ca();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tu(e,t.fromCache,n,r)}}class xu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Du{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=S()?8:Ds(E())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new xu;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Gi()<=z.DEBUG&&Wi("QueryEngine","SDK will not create cache indexes for query:",la(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),xs.resolve()):(Gi()<=z.DEBUG&&Wi("QueryEngine","Query:",la(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Gi()<=z.DEBUG&&Wi("QueryEngine","The SDK decides to create cache indexes for query:",la(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ra(t))):xs.resolve())}ji(e,t){if(ea(t))return xs.resolve(null);let n=ra(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=sa(t,null,"F"),n=ra(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ca(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,sa(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return ea(t)||r.isEqual(gs.min())?xs.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?xs.resolve(null):(Gi()<=z.DEBUG&&Wi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),la(t)),this.es(e,s,t,Es(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Gs(ha(e));return t.forEach(((t,r)=>{ua(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Gi()<=z.DEBUG&&Wi("QueryEngine","Using full collection scan to execute query:",la(t)),this.zi.getDocumentsMatchingQuery(e,t,Cs.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Au{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Bs(ds),this.rs=new fa((e=>Xo(e)),Yo),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mu(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Ou(e,t,n,r){return new Au(e,t,n,r)}async function Nu(e,t){const n=$i(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ca();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ju(e){const t=$i(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Ru(e,t,n){let r=Ca(),i=Ca();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ga();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(gs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Wi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Mu(e,t){const n=$i(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Lu(e,t){const n=$i(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,xs.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new ou(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Fu(e,t,n){const r=$i(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!As(e))throw e;Wi("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Uu(e,t,n){const r=$i(e);let i=gs.min(),s=Ca();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=$i(e),i=r.rs.get(n);return void 0!==i?xs.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,ra(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:gs.min(),n?s:Ca()))).next((e=>(Vu(r,ca(t),e),{documents:e,hs:s})))))}function Vu(e,t,n){let r=e.ss.get(t)||gs.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}class zu{constructor(){this.activeTargetIds=ka()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bu{constructor(){this.no=new zu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new zu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hu{io(e){}shutdown(){}}class qu{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Wi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Wi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gu=null;function Wu(){return null===Gu?Gu=268435456+Math.round(2147483648*Math.random()):Gu++,"0x"+Gu.toString(16)}const Ku={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Xu{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Yu="WebChannelConnection";class Qu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=Wu(),o=this.vo(e,t.toUriEncodedString());Wi("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Wi("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Xi("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=Ku[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=Wu();return new Promise(((s,o)=>{const a=new Di;a.setWithCredentials(!0),a.listenOnce(Ni.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ji.NO_ERROR:const t=a.getResponseJson();Wi(Yu,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ji.TIMEOUT:Wi(Yu,"RPC '".concat(e,"' ").concat(i," timed out")),o(new es(Zi.DEADLINE_EXCEEDED,"Request time out"));break;case ji.HTTP_ERROR:const n=a.getStatus();if(Wi(Yu,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Zi).indexOf(t)>=0?t:Zi.UNKNOWN}(t.status);o(new es(e,t.message))}else o(new es(Zi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new es(Zi.UNAVAILABLE,"Connection failed."));break;default:Qi()}}finally{Wi(Yu,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Wi(Yu,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=Wu(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fi(),o=Li(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Ai({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Wi(Yu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Xu({lo:t=>{d?Wi(Yu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Wi(Yu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Oi.EventType.OPEN,(()=>{d||(Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(c,Oi.EventType.CLOSE,(()=>{d||(d=!0,Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(c,Oi.EventType.ERROR,(t=>{d||(d=!0,Xi(Yu,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new es(Zi.UNAVAILABLE,"The operation could not be completed")))})),p(c,Oi.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ji(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ll[e];if(void 0!==t)return hl(t)}(t),i=o.message;void 0===n&&(n=Zi.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new es(n,i)),c.close()}else Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(o,Mi.STAT_EVENT,(t=>{t.stat===Ri.PROXY?Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ri.NOPROXY&&Wi(Yu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function Ju(){return"undefined"!=typeof document?document:null}function $u(e){return new Al(e,!0)}class Zu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Wi("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class ec{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Zu(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Zi.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Zi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new es(Zi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Wi("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Wi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tc extends ec{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ji(void 0===t||"string"==typeof t),Ys.fromBase64String(t||"")):(Ji(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ys.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Zi.UNKNOWN:hl(e.code);return new es(t,e.message||"")}(o);n=new Sl(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=zl(e,r.document.name),s=Ml(r.document.updateTime),o=r.document.createTime?Ml(r.document.createTime):gs.min(),a=new _o({mapValue:{fields:r.document.fields}}),l=So.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new _l(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=zl(e,r.document),s=r.readTime?Ml(r.readTime):gs.min(),o=So.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _l([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=zl(e,r.document),s=r.removedTargetIds||[];n=new _l([],s,i,null)}else{if(!("filter"in t))return Qi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new al(r,i),o=e.targetId;n=new El(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return gs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?gs.min():t.readTime?Ml(t.readTime):gs.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=ql(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Qo(r)?{documents:Xl(e,r)}:{query:Yl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jl(e,t.resumeToken);const r=Ol(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(gs.min())>0){n.readTime=Nl(e,t.snapshotVersion.toTimestamp());const r=Ol(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=ql(this.serializer),t.removeTarget=e,this.i_(t)}}class nc extends ec{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Ji(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Ji(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ml(e.updateTime):Ml(t);return n.isEqual(gs.min())&&(n=Ml(t)),new Ba(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ml(e.commitTime);return this.listener.A_(n,t)}return Ji(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=ql(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Kl(this.serializer,e)))};this.i_(t)}}class rc extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new es(Zi.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,Fl(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new es(Zi.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,Fl(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Zi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new es(Zi.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class ic{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Ki(t),this.y_=!1):Wi("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class sc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{pc(this)&&(Wi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=$i(e);t.M_.add(4),await ac(t),t.N_.set("Unknown"),t.M_.delete(4),await oc(t)}(this))}))})),this.N_=new ic(n,r)}}async function oc(e){if(pc(e))for(const t of e.x_)await t(!0)}async function ac(e){for(const t of e.x_)await t(!1)}function lc(e,t){const n=$i(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),fc(n)?dc(n):Nc(n).Xo()&&cc(n,t))}function uc(e,t){const n=$i(e),r=Nc(n);n.F_.delete(t),r.Xo()&&hc(n,t),0===n.F_.size&&(r.Xo()?r.n_():pc(n)&&n.N_.set("Unknown"))}function cc(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nc(e).P_(t)}function hc(e,t){e.L_.xe(t),Nc(e).I_(t)}function dc(e){e.L_=new Pl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Nc(e).start(),e.N_.w_()}function fc(e){return pc(e)&&!Nc(e).Zo()&&e.F_.size>0}function pc(e){return 0===$i(e).M_.size}function gc(e){e.L_=void 0}async function mc(e){e.N_.set("Online")}async function vc(e){e.F_.forEach(((t,n)=>{cc(e,t)}))}async function yc(e,t){gc(e),fc(e)?(e.N_.D_(t),dc(e)):e.N_.set("Unknown")}async function bc(e,t,n){if(e.N_.set("Online"),t instanceof Sl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Wi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wc(e,n)}else if(t instanceof _l?e.L_.Ke(t):t instanceof El?e.L_.He(t):e.L_.We(t),!n.isEqual(gs.min()))try{const t=await ju(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(Ys.EMPTY_BYTE_STRING,r.snapshotVersion)),hc(e,t);const i=new ou(r.target,t,n,r.sequenceNumber);cc(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Wi("RemoteStore","Failed to raise snapshot:",t),await wc(e,t)}}async function wc(e,t,n){if(!As(t))throw t;e.M_.add(1),await ac(e),e.N_.set("Offline"),n||(n=()=>ju(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Wi("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await oc(e)}))}function _c(e,t){return t().catch((n=>wc(e,n,t)))}async function Ec(e){const t=$i(e),n=jc(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Sc(t);)try{const e=await Mu(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Cc(t,e)}catch(e){await wc(t,e)}Pc(t)&&kc(t)}function Sc(e){return pc(e)&&e.v_.length<10}function Cc(e,t){e.v_.push(t);const n=jc(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Pc(e){return pc(e)&&!jc(e).Zo()&&e.v_.length>0}function kc(e){jc(e).start()}async function Ic(e){jc(e).V_()}async function Tc(e){const t=jc(e);for(const n of e.v_)t.d_(n.mutations)}async function xc(e,t,n){const r=e.v_.shift(),i=sl.from(r,t,n);await _c(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Ec(e)}async function Dc(e,t){t&&jc(e).E_&&await async function(e,t){if(function(e){return cl(e)&&e!==Zi.ABORTED}(t.code)){const n=e.v_.shift();jc(e).t_(),await _c(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ec(e)}}(e,t),Pc(e)&&kc(e)}async function Ac(e,t){const n=$i(e);n.asyncQueue.verifyOperationInProgress(),Wi("RemoteStore","RemoteStore received new credentials");const r=pc(n);n.M_.add(3),await ac(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await oc(n)}async function Oc(e,t){const n=$i(e);t?(n.M_.delete(2),await oc(n)):t||(n.M_.add(2),await ac(n),n.N_.set("Unknown"))}function Nc(e){return e.B_||(e.B_=function(e,t,n){const r=$i(e);return r.f_(),new tc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:mc.bind(null,e),To:vc.bind(null,e),Ao:yc.bind(null,e),h_:bc.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),fc(e)?dc(e):e.N_.set("Unknown")):(await e.B_.stop(),gc(e))}))),e.B_}function jc(e){return e.k_||(e.k_=function(e,t,n){const r=$i(e);return r.f_(),new nc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Ic.bind(null,e),Ao:Dc.bind(null,e),R_:Tc.bind(null,e),A_:xc.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Ec(e)):(await e.k_.stop(),e.v_.length>0&&(Wi("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class Rc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Rc(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new es(Zi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mc(e,t){if(Ki("AsyncQueue","".concat(t,": ").concat(e)),As(e))return new es(Zi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Lc{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ws.comparator(t.key,n.key):(e,t)=>ws.comparator(e.key,t.key),this.keyedMap=va(),this.sortedSet=new Bs(this.comparator)}static emptySet(e){return new Lc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Lc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Fc{constructor(){this.q_=new Bs(ws.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Qi():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Uc{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Uc(e,t,Lc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Vc{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class zc{constructor(){this.queries=new fa((e=>aa(e)),oa),this.onlineState="Unknown",this.z_=new Set}}async function Bc(e,t){const n=$i(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new Vc,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Mc(e,"Initialization of query '".concat(la(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Wc(n)}async function Hc(e,t){const n=$i(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qc(e,t){const n=$i(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&Wc(n)}function Gc(e,t,n){const r=$i(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Wc(e){e.z_.forEach((e=>{e.next()}))}var Kc,Xc;(Xc=Kc||(Kc={})).J_="default",Xc.Cache="cache";class Yc{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Uc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Kc.Cache}}class Qc{constructor(e){this.key=e}}class Jc{constructor(e){this.key=e}}class $c{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ca(),this.mutatedKeys=Ca(),this.Ia=ha(e),this.Ta=new Lc(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Fc,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=ua(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ra(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Ia(c,a)>0||l&&this.Ia(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qi()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new Uc(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Fc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Ca(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new Jc(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new Qc(n))})),t}pa(e){this.la=e.hs,this.Pa=Ca();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Uc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class Zc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class eh{constructor(e){this.key=e,this.wa=!1}}class th{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new fa((e=>aa(e)),oa),this.Da=new Map,this.Ca=new Set,this.va=new Bs(ws.comparator),this.Fa=new Map,this.Ma=new bu,this.xa={},this.Oa=new Map,this.Na=fu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function nh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Sh(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await ih(r,t,n,!0),i}async function rh(e,t){const n=Sh(e);await ih(n,t,!0,!1)}async function ih(e,t,n,r){const i=await Lu(e.localStore,ra(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await sh(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&lc(e.remoteStore,i),a}async function sh(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await Uu(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return vh(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Uu(e.localStore,t,!0),o=new $c(t,s.hs),a=o.da(s.documents),l=wl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);vh(e,n,u.fa);const c=new Zc(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}async function oh(e,t,n){const r=$i(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!oa(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fu(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uc(r.remoteStore,i.targetId),gh(r,i.targetId)})).catch(Ts)):(gh(r,i.targetId),await Fu(r.localStore,i.targetId,!0))}async function ah(e,t){const n=$i(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uc(n.remoteStore,r.targetId))}async function lh(e,t){const n=$i(e);try{const e=await function(e,t){const n=$i(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Ys.EMPTY_BYTE_STRING,gs.min()).withLastLimboFreeSnapshotVersion(gs.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=ga(),l=Ca();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ru(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(gs.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return xs.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Ji(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Ji(r.wa):e.removedDocuments.size>0&&(Ji(r.wa),r.wa=!1))})),await wh(n,e,t)}catch(e){await Ts(e)}}function uh(e,t,n){const r=$i(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=$i(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&Wc(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ch(e,t,n){const r=$i(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new Bs(ws.comparator);e=e.insert(s,So.newNoDocument(s,gs.min()));const n=Ca().add(s),i=new bl(gs.min(),new Map,new Bs(ds),e,n);await lh(r,i),r.va=r.va.remove(s),r.Fa.delete(t),bh(r)}else await Fu(r.localStore,t,!1).then((()=>gh(r,t,n))).catch(Ts)}async function hh(e,t){const n=$i(e),r=t.batch.batchId;try{const e=await function(e,t){const n=$i(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xs.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ji(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ca();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ph(n,r,null),fh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wh(n,e)}catch(e){await Ts(e)}}async function dh(e,t,n){const r=$i(e);try{const e=await function(e,t){const n=$i(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ji(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ph(r,t,n),fh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await wh(r,e)}catch(n){await Ts(n)}}function fh(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function ph(e,t,n){const r=$i(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function gh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||mh(e,t)}))}function mh(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(uc(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),bh(e))}function vh(e,t,n){for(const r of n)r instanceof Qc?(e.Ma.addReference(r.key,t),yh(e,r)):r instanceof Jc?(Wi("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||mh(e,r.key)):Qi()}function yh(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Wi("SyncEngine","New document in limbo: "+n),e.Ca.add(r),bh(e))}function bh(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new ws(vs.fromString(t)),r=e.Na.next();e.Fa.set(r,new eh(n)),e.va=e.va.insert(n,r),lc(e.remoteStore,new ou(ra(Zo(n.path)),r,"TargetPurposeLimboResolution",Os.oe))}}async function wh(e,t,n){const r=$i(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Tu.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=$i(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>xs.forEach(t,(t=>xs.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>xs.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!As(e))throw e;Wi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function _h(e,t){const n=$i(e);if(!n.currentUser.isEqual(t)){Wi("SyncEngine","User change. New user:",t.toKey());const e=await Nu(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new es(Zi.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wh(n,e.us)}}function Eh(e,t){const n=$i(e),r=n.Fa.get(t);if(r&&r.wa)return Ca().add(r.key);{let e=Ca();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}function Sh(e){const t=$i(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ch.bind(null,t),t.Sa.h_=qc.bind(null,t.eventManager),t.Sa.ka=Gc.bind(null,t.eventManager),t}function Ch(e){const t=$i(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dh.bind(null,t),t}class Ph{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ou(this.persistence,new Du,e.initialUser,this.serializer)}createPersistence(e){return new Pu(Iu.Hr,this.serializer)}createSharedClientState(e){return new Bu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class kh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>uh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=_h.bind(null,this.syncEngine),await Oc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zc}createDatastore(e){const t=$u(e.databaseInfo.databaseId),n=function(e){return new Qu(e)}(e.databaseInfo);return function(e,t,n,r){return new rc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new sc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>uh(this.syncEngine,e,0)),qu.D()?new qu:new Hu)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new th(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=$i(e);Wi("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await ac(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Ih{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Th{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Bi.UNAUTHENTICATED,this.clientId=hs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Wi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Wi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new es(Zi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Mc(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function xh(e,t){e.asyncQueue.verifyOperationInProgress(),Wi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Nu(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Dh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Oh(e);Wi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ac(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ac(t.remoteStore,n))),e._onlineComponents=t}function Ah(e){return"FirebaseError"===e.name?e.code===Zi.FAILED_PRECONDITION||e.code===Zi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Oh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Wi("FirestoreClient","Using user provided OfflineComponentProvider");try{await xh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Ah(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await xh(e,new Ph)}}else Wi("FirestoreClient","Using default OfflineComponentProvider"),await xh(e,new Ph);return e._offlineComponents}async function Nh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Wi("FirestoreClient","Using user provided OnlineComponentProvider"),await Dh(e,e._uninitializedComponentsProvider._online)):(Wi("FirestoreClient","Using default OnlineComponentProvider"),await Dh(e,new kh))),e._onlineComponents}function jh(e){return Nh(e).then((e=>e.syncEngine))}async function Rh(e){const t=await Nh(e),n=t.eventManager;return n.onListen=nh.bind(null,t.syncEngine),n.onUnlisten=oh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=rh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ah.bind(null,t.syncEngine),n}function Mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ts;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Ih({next:s=>{t.enqueueAndForget((()=>Hc(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new es(Zi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new es(Zi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Yc(Zo(n.path),s,{includeMetadataChanges:!0,ra:!0});return Bc(e,o)}(await Rh(e),e.asyncQueue,t,n,r))),r.promise}function Lh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fh=new Map;function Uh(e,t,n){if(!n)throw new es(Zi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Vh(e){if(!ws.isDocumentKey(e))throw new es(Zi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function zh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Qi()}function Bh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new es(Zi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zh(e);throw new es(Zi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Hh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new es(Zi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new es(Zi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new es(Zi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new es(Zi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new es(Zi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new es(Zi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new es(Zi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new es(Zi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new rs;switch(e.type){case"firstParty":return new as(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new es(Zi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fh.get(e);t&&(Wi("ComponentProvider","Removing Datastore"),Fh.delete(e),t.terminate())}(this),Promise.resolve()}}function Gh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Bh(e,qh))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Bi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new es(Zi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Bi(s)}e._authCredentials=new is(new ns(t,n))}}class Wh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Wh(this.firestore,e,this._query)}}class Kh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kh(this.firestore,e,this._key)}}class Xh extends Wh{constructor(e,t,n){super(e,t,Zo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kh(this.firestore,null,new ws(e))}withConverter(e){return new Xh(this.firestore,e,this._path)}}function Yh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=R(e),1===arguments.length&&(t=hs.newId()),Uh("doc","path",t),e instanceof qh){const n=vs.fromString(t,...r);return Vh(n),new Kh(e,null,new ws(n))}{if(!(e instanceof Kh||e instanceof Xh))throw new es(Zi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(vs.fromString(t,...r));return Vh(n),new Kh(e.firestore,e instanceof Xh?e.converter:null,new ws(n))}}class Qh{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Zu(this,"async_queue_retry"),this.hu=()=>{const e=Ju();e&&Wi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=Ju();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=Ju();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new ts;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!As(e))throw e;Wi("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ki("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Rc.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Qi()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}class Jh extends qh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Qh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Zh(this),this._firestoreClient.terminate()}}function $h(e){return e._firestoreClient||Zh(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zh(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ro(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Lh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Th(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class ed{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ed(Ys.fromBase64String(e))}catch(e){throw new es(Zi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ed(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class td{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new es(Zi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nd{constructor(e){this._methodName=e}}class rd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new es(Zi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new es(Zi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ds(this._lat,e._lat)||ds(this._long,e._long)}}const id=/^__.*__$/;class sd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ja(e,this.data,t,this.fieldTransforms)}}class od{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ad(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qi()}}class ld{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new ld(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ed(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(ad(this.fu)&&id.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class ud{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$u(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ld({fu:e,methodName:t,vu:n,path:bs.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cd(e){const t=e._freezeSettings(),n=$u(e._databaseId);return new ud(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hd(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);yd("Data must be an object, but it was:",o,r);const a=md(r,o);let l,u;if(s.merge)l=new Ks(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=bd(t,r,n);if(!o.contains(i))throw new es(Zi.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Sd(e,i)||e.push(i)}l=new Ks(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new sd(new _o(a),l,u)}class dd extends nd{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function fd(e,t,n,r){const i=e.Fu(1,t,n);yd("Data must be an object, but it was:",i,r);const s=[],o=_o.empty();Vs(r,((e,r)=>{const a=_d(t,e,n);r=R(r);const l=i.Su(a);if(r instanceof dd)s.push(a);else{const e=gd(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ks(s);return new od(o,a,i.fieldTransforms)}function pd(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[bd(t,r,n)],l=[i];if(s.length%2!=0)throw new es(Zi.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(bd(t,s[d])),l.push(s[d+1]);const u=[],c=_o.empty();for(let d=a.length-1;d>=0;--d)if(!Sd(u,a[d])){const e=a[d];let t=l[d];t=R(t);const n=o.Su(e);if(t instanceof dd)u.push(e);else{const r=gd(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new Ks(u);return new od(c,h,o.fieldTransforms)}function gd(e,t){if(vd(e=R(e)))return yd("Unsupported field value:",t,e),md(e,t);if(e instanceof nd)return function(e,t){if(!ad(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gd(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=R(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xa(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ps.fromDate(e);return{timestampValue:Nl(t.serializer,n)}}if(e instanceof ps){const n=new ps(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Nl(t.serializer,n)}}if(e instanceof rd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ed)return{bytesValue:jl(t.serializer,e._byteString)};if(e instanceof Kh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ll(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(zh(e)))}(e,t)}function md(e,t){const n={};return zs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vs(e,((e,r)=>{const i=gd(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ps||e instanceof rd||e instanceof ed||e instanceof Kh||e instanceof nd)}function yd(e,t,n){if(!vd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=zh(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function bd(e,t,n){if((t=R(t))instanceof td)return t._internalPath;if("string"==typeof t)return _d(e,t);throw Ed("Field path arguments must be of type string or ",e,!1,void 0,n)}const wd=new RegExp("[~\\*/\\[\\]]");function _d(e,t,n){if(t.search(wd)>=0)throw Ed("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new td(...t.split("."))._internalPath}catch(r){throw Ed("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ed(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new es(Zi.INVALID_ARGUMENT,a+e+l)}function Sd(e,t){return e.some((e=>e.isEqual(t)))}class Cd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pd extends Cd{data(){return super.data()}}function kd(e,t){return"string"==typeof t?_d(e,t):t instanceof td?t._internalPath:t._delegate._internalPath}class Id{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Vs(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new rd($s(e.latitude),$s(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=to(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const t=Js(e);return new ps(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=vs.fromString(e);Ji(su(n));const r=new io(n.get(1),n.get(3)),i=new ws(n.popFirst(5));return r.isEqual(t)||Ki("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Td(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class xd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends Cd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ad extends Dd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Od extends Id{constructor(e){super(),this.firestore=e}convertBytes(e){return new ed(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kh(this.firestore,null,t)}}function Nd(e,t,n){e=Bh(e,Kh);const r=Bh(e.firestore,Jh),i=Td(e.converter,t,n);return jd(r,[hd(cd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ha.none())])}function jd(e,t){return function(e,t){const n=new ts;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ch(e);try{const e=await function(e,t){const n=$i(e),r=ps.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ca());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ga(),l=Ca();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Ya(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new $a(e.key,t,Eo(t.value.mapValue),Ha.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ya(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new Bs(ds)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await wh(r,e.changes),await Ec(r.remoteStore)}catch(e){const t=Mc(e,"Failed to persist write");n.reject(t)}}(await jh(e),t,n))),n.promise}($h(e),t)}function Rd(e,t,n){const r=n.docs.get(t._key),i=new Od(e);return new Dd(e,i,t._key,r,new xd(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hi=e}(Qe),Ge(new M("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Jh(new ss(e.getProvider("auth-internal")),new us(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new es(Zi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ze(zi,"4.6.4",e),Ze(zi,"4.6.4","esm2017")}();const Md=Je({apiKey:"AIzaSyBORi0udvOzPYM3dIYAQlzEdHgKVpnWqR8",authDomain:"faangcode-9b510.firebaseapp.com",projectId:"faangcode-9b510",storageBucket:"faangcode-9b510.appspot.com",messagingSenderId:"941377739415",appId:"1:941377739415:web:e9cfb3952f5400f21d67d2"}),Ld=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e();const t=We(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=We(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(T(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;yt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:bi,persistence:[Tr,hr,fr]}),r=w("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Si)return;const r=null===t||void 0===t?void 0:t.token;Ci!==r&&(Ci=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){R(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){R(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=y("auth");return s&&Mn(n,"http://".concat(s)),n}(Md),Fd=new $n,Ud=function(e,t){const n="string"==typeof e?e:t||"(default)",r=We("object"==typeof e?e:$e(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Gh(r,...e)}return r}(Md),Vd=t=>{let{company:r,user:i,onClose:s}=t;const[o,a]=(0,e.useState)([]),[l,c]=(0,e.useState)({}),[h,d]=(0,e.useState)({key:"Difficulty",direction:"ascending"});(0,e.useEffect)((()=>{n(593)("./".concat(r,".json")).then((e=>{const t=e.default.sort(((e,t)=>{const n={Easy:1,Medium:2,Hard:3};return n[e.Difficulty]-n[t.Difficulty]}));a(t)})).catch((e=>{console.error("Error loading JSON data: ",e)}))}),[r]),(0,e.useEffect)((()=>{if(i){const e=Yh(Ud,"users",i.uid);(function(e){e=Bh(e,Kh);const t=Bh(e.firestore,Jh);return Mh($h(t),e._key).then((n=>Rd(t,e,n)))})(e).then((t=>{if(t.exists()){const e=t.data();c(e.completedProblems||{})}else Nd(e,{completedProblems:{}})})).catch((e=>{console.error("Error fetching user data: ",e)}))}}),[i]);const f=async e=>{const t={...l,[e]:!l[e]};if(c(t),i){const e=Yh(Ud,"users",i.uid);await function(e,t,n){e=Bh(e,Kh);const r=Bh(e.firestore,Jh),i=cd(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=R(t))||t instanceof td?pd(i,"updateDoc",e._key,t,n,a):fd(i,"updateDoc",e._key,t),jd(r,[s.toMutation(e._key,Ha.exists(!0))])}(e,{completedProblems:t}).catch((async n=>{"not-found"===n.code?await Nd(e,{completedProblems:t}):console.error("Error updating user data: ",n)}))}},p=e=>{let t="ascending";h.key===e&&"ascending"===h.direction&&(t="descending");const n=[...o].sort(((n,r)=>{if("Difficulty"===e){const i={Easy:1,Medium:2,Hard:3};return"ascending"===t?i[n[e]]-i[r[e]]:i[r[e]]-i[n[e]]}return n[e]<r[e]?"ascending"===t?-1:1:n[e]>r[e]?"ascending"===t?1:-1:0}));d({key:e,direction:t}),a(n)},g=e=>h.key!==e?(0,u.jsx)("i",{className:"fa-solid fa-sort"}):"ascending"===h.direction?(0,u.jsx)("i",{className:"fa-solid fa-sort-down"}):(0,u.jsx)("i",{className:"fa-solid fa-sort-up"}),m=o.reduce(((e,t)=>l[t.ID]?e+1:e),0);return(0,u.jsxs)("div",{className:"problems-overlay",children:[(0,u.jsx)("div",{className:"overlay-backdrop",onClick:s}),(0,u.jsxs)("div",{className:"overlay-content",children:[(0,u.jsx)("button",{className:"close-button",onClick:s,children:(0,u.jsx)("i",{className:"fa-solid fa-xmark"})}),(0,u.jsxs)("h2",{children:["LeetCode Problems for ",r[0].toUpperCase()+r.slice(1),": ",m,"/",o.length," Completed"]}),(0,u.jsxs)("div",{className:"problem-table",children:[(0,u.jsxs)("div",{className:"table-header",children:[(0,u.jsx)("div",{children:"Status"}),(0,u.jsxs)("div",{children:["ID ",(0,u.jsx)("button",{className:"sort-button",onClick:()=>p("ID"),children:g("ID")})]}),(0,u.jsxs)("div",{children:["Title ",(0,u.jsx)("button",{className:"sort-button",onClick:()=>p("Title"),children:g("Title")})]}),(0,u.jsxs)("div",{children:["Acceptance ",(0,u.jsx)("button",{className:"sort-button",onClick:()=>p("Acceptance"),children:g("Acceptance")})]}),(0,u.jsxs)("div",{children:["Difficulty ",(0,u.jsx)("button",{className:"sort-button",onClick:()=>p("Difficulty"),children:g("Difficulty")})]}),(0,u.jsxs)("div",{children:["Frequency ",(0,u.jsx)("button",{className:"sort-button",onClick:()=>p("Frequency"),children:g("Frequency")})]})]}),o.map(((e,t)=>(0,u.jsxs)("div",{className:"table-row",children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"checkbox",checked:l[e.ID],onChange:()=>f(e.ID)})}),(0,u.jsx)("div",{children:e.ID}),(0,u.jsx)("div",{children:(0,u.jsxs)("a",{href:e["Leetcode Question Link"],target:"_blank",rel:"noopener noreferrer",children:[e.Title," ",(0,u.jsx)("i",{className:"fa-solid fa-arrow-up-right-from-square"})]})}),(0,u.jsx)("div",{children:e.Acceptance}),(0,u.jsx)("div",{className:e.Difficulty.toLowerCase(),children:e.Difficulty}),(0,u.jsx)("div",{children:Math.round(100*e.Frequency)/100})]},t)))]})]})]})},zd=t=>{let{user:n,onUserChange:r}=t;const[i,s]=(0,e.useState)(localStorage.getItem("theme")||"auto");(0,e.useEffect)((()=>{if("auto"===i){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.querySelector(":root").className=e?"dark":"light"}else document.querySelector(":root").className=i;localStorage.setItem("theme",i)}),[i]),(0,e.useEffect)((()=>{const e=Ld.onAuthStateChanged((e=>{r(e||null)}));return()=>e()}),[r]);return(0,u.jsxs)("div",{className:"navbar",children:[(0,u.jsx)("div",{className:"left",children:(0,u.jsx)("p",{children:"FAANGCode"})}),(0,u.jsxs)("div",{className:"right",children:[(0,u.jsx)("button",{className:"color-button",onClick:()=>{s("auto"===i?"dark":"dark"===i?"light":"auto")},children:"auto"===i?(0,u.jsx)("i",{className:"fa-solid fa-circle-half-stroke"}):"dark"===i?(0,u.jsx)("i",{className:"fa-solid fa-moon"}):(0,u.jsx)("i",{className:"fa-solid fa-sun"})}),n?(0,u.jsx)("div",{className:"user-profile",children:(0,u.jsx)("img",{src:n.photoURL,alt:"User",className:"user-avatar"})}):(0,u.jsx)("button",{className:"login-button",onClick:()=>{(async function(e,t,n){if(Ke(e.app))return Promise.reject(bt(e,"operation-not-supported-in-this-environment"));const r=Tn(e);Et(e,t,Yn);const i=Or(r,n);return new Ur(r,"signInViaPopup",t,i).executeNotNull()})(Ld,Fd).then((e=>{console.log("User signed in"),r(e.user)})).catch((e=>{console.error("Error during sign in:",e)}))},children:(0,u.jsx)("i",{className:"fa-solid fa-right-to-bracket"})}),n&&(0,u.jsx)("button",{className:"login-button",onClick:()=>{(function(e){return R(e).signOut()})(Ld).then((()=>{console.log("User signed out"),r(null)})).catch((e=>{console.error("Error during sign out:",e)}))},children:(0,u.jsx)("i",{className:"fa-solid fa-right-from-bracket"})})]})]})},Bd=()=>{const e=(new Date).getFullYear();return(0,u.jsx)("div",{className:"footer",children:(0,u.jsxs)("p",{children:["Copyright \xa9 FaangCode ",e," All rights reserved."]})})},Hd=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(null);return(0,u.jsxs)("div",{className:"app",children:[(0,u.jsx)(zd,{user:r,onUserChange:e=>{i(e)}}),(0,u.jsx)(c,{onNodeClick:e=>{n(e)}}),t&&(0,u.jsx)(Vd,{company:t,onClose:()=>{n("")},user:r}),(0,u.jsx)(Bd,{})]})},qd=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,u.jsx)(e.StrictMode,{children:(0,u.jsx)(Hd,{})})),qd()})()})();
//# sourceMappingURL=main.bdd1c3df.js.map